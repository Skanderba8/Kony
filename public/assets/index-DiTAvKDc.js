(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();const Kv=()=>{};var zp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Jv=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},g1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,f=l?n[i+2]:0,g=s>>2,y=(s&3)<<4|a>>4;let b=(a&15)<<2|f>>6,v=f&63;l||(v=64,o||(b=64)),r.push(t[g],t[y],t[b],t[v])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(p1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Jv(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const y=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||f==null||y==null)throw new Qv;const b=s<<2|a>>4;if(r.push(b),f!==64){const v=a<<4&240|f>>2;if(r.push(v),y!==64){const M=f<<6&192|y;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Qv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Yv=function(n){const e=p1(n);return g1.encodeByteArray(e,!0)},dl=function(n){return Yv(n).replace(/\./g,"")},m1=function(n){try{return g1.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=()=>Xv().__FIREBASE_DEFAULTS__,ey=()=>{if(typeof process>"u"||typeof zp>"u")return;const n=zp.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ty=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&m1(n[1]);return e&&JSON.parse(e)},ql=()=>{try{return Kv()||Zv()||ey()||ty()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},v1=n=>{var e,t;return(t=(e=ql())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},y1=n=>{const e=v1(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},_1=()=>{var n;return(n=ql())===null||n===void 0?void 0:n.config},w1=n=>{var e;return(e=ql())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[dl(JSON.stringify(t)),dl(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ry(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qn())}function iy(){var n;const e=(n=ql())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sy(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oy(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ay(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cy(){const n=Qn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function uy(){return!iy()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function A1(){try{return typeof indexedDB=="object"}catch{return!1}}function E1(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}function ly(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy="FirebaseError";class oi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=hy,Object.setPrototypeOf(this,oi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jo.prototype.create)}}class Jo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?fy(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new oi(i,a,r)}}function fy(n,e){return n.replace(dy,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const dy=/\{\$([^}]+)}/g;function py(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function zo(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if($p(s)&&$p(o)){if(!zo(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function $p(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Cc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function kc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function gy(n,e){const t=new my(n,e);return t.subscribe.bind(t)}class my{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");vy(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Vh),i.error===void 0&&(i.error=Vh),i.complete===void 0&&(i.complete=Vh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vy(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Vh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(n){return n&&n._delegate?n._delegate:n}class ri{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new ny;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wy(e))try{this.getOrInitializeService({instanceIdentifier:Fo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Fo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fo){return this.instances.has(e)}getOptions(e=Fo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_y(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Fo){return this.component?this.component.multipleInstances?e:Fo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _y(n){return n===Fo?void 0:n}function wy(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new yy(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(_t||(_t={}));const Ay={debug:_t.DEBUG,verbose:_t.VERBOSE,info:_t.INFO,warn:_t.WARN,error:_t.ERROR,silent:_t.SILENT},Ey=_t.INFO,Iy={[_t.DEBUG]:"log",[_t.VERBOSE]:"log",[_t.INFO]:"info",[_t.WARN]:"warn",[_t.ERROR]:"error"},Ty=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=Iy[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zl{constructor(e){this.name=e,this._logLevel=Ey,this._logHandler=Ty,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _t))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ay[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_t.DEBUG,...e),this._logHandler(this,_t.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_t.VERBOSE,...e),this._logHandler(this,_t.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_t.INFO,...e),this._logHandler(this,_t.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_t.WARN,...e),this._logHandler(this,_t.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_t.ERROR,...e),this._logHandler(this,_t.ERROR,...e)}}const Sy=(n,e)=>e.some(t=>n instanceof t);let Hp,Wp;function Ny(){return Hp||(Hp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Py(){return Wp||(Wp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const I1=new WeakMap,gf=new WeakMap,T1=new WeakMap,Uh=new WeakMap,od=new WeakMap;function Ly(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Qs(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&I1.set(t,n)}).catch(()=>{}),od.set(e,n),e}function Ry(n){if(gf.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});gf.set(n,e)}let mf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return gf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||T1.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Qs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Cy(n){mf=n(mf)}function ky(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(jh(this),e,...t);return T1.set(r,e.sort?e.sort():[e]),Qs(r)}:Py().includes(n)?function(...e){return n.apply(jh(this),e),Qs(I1.get(this))}:function(...e){return Qs(n.apply(jh(this),e))}}function xy(n){return typeof n=="function"?ky(n):(n instanceof IDBTransaction&&Ry(n),Sy(n,Ny())?new Proxy(n,mf):n)}function Qs(n){if(n instanceof IDBRequest)return Ly(n);if(Uh.has(n))return Uh.get(n);const e=xy(n);return e!==n&&(Uh.set(n,e),od.set(e,n)),e}const jh=n=>od.get(n);function S1(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=Qs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Qs(o.result),l.oldVersion,l.newVersion,Qs(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),a}const Oy=["get","getKey","getAll","getAllKeys","count"],Dy=["put","add","delete","clear"],Bh=new Map;function Gp(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Bh.get(e))return Bh.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Dy.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Oy.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let f=l.store;return r&&(f=f.index(a.shift())),(await Promise.all([f[t](...a),i&&l.done]))[0]};return Bh.set(e,s),s}Cy(n=>({...n,get:(e,t,r)=>Gp(e,t)||n.get(e,t,r),has:(e,t)=>!!Gp(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(My(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function My(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vf="@firebase/app",Kp="0.11.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss=new zl("@firebase/app"),Vy="@firebase/app-compat",Uy="@firebase/analytics-compat",jy="@firebase/analytics",By="@firebase/app-check-compat",qy="@firebase/app-check",zy="@firebase/auth",$y="@firebase/auth-compat",Hy="@firebase/database",Wy="@firebase/data-connect",Gy="@firebase/database-compat",Ky="@firebase/functions",Jy="@firebase/functions-compat",Qy="@firebase/installations",Yy="@firebase/installations-compat",Xy="@firebase/messaging",Zy="@firebase/messaging-compat",e_="@firebase/performance",t_="@firebase/performance-compat",n_="@firebase/remote-config",r_="@firebase/remote-config-compat",i_="@firebase/storage",s_="@firebase/storage-compat",o_="@firebase/firestore",a_="@firebase/vertexai",c_="@firebase/firestore-compat",u_="firebase",l_="11.6.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf="[DEFAULT]",h_={[vf]:"fire-core",[Vy]:"fire-core-compat",[jy]:"fire-analytics",[Uy]:"fire-analytics-compat",[qy]:"fire-app-check",[By]:"fire-app-check-compat",[zy]:"fire-auth",[$y]:"fire-auth-compat",[Hy]:"fire-rtdb",[Wy]:"fire-data-connect",[Gy]:"fire-rtdb-compat",[Ky]:"fire-fn",[Jy]:"fire-fn-compat",[Qy]:"fire-iid",[Yy]:"fire-iid-compat",[Xy]:"fire-fcm",[Zy]:"fire-fcm-compat",[e_]:"fire-perf",[t_]:"fire-perf-compat",[n_]:"fire-rc",[r_]:"fire-rc-compat",[i_]:"fire-gcs",[s_]:"fire-gcs-compat",[o_]:"fire-fst",[c_]:"fire-fst-compat",[a_]:"fire-vertex","fire-js":"fire-js",[u_]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=new Map,f_=new Map,_f=new Map;function Jp(n,e){try{n.container.addComponent(e)}catch(t){ss.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ki(n){const e=n.name;if(_f.has(e))return ss.debug(`There were multiple attempts to register component ${e}.`),!1;_f.set(e,n);for(const t of pl.values())Jp(t,n);for(const t of f_.values())Jp(t,n);return!0}function Qo(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Mr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ys=new Jo("app","Firebase",d_);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ri("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=l_;function N1(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:yf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ys.create("bad-app-name",{appName:String(i)});if(t||(t=_1()),!t)throw Ys.create("no-options");const s=pl.get(i);if(s){if(zo(t,s.options)&&zo(r,s.config))return s;throw Ys.create("duplicate-app",{appName:i})}const o=new by(i);for(const l of _f.values())o.addComponent(l);const a=new p_(t,r,o);return pl.set(i,a),a}function $l(n=yf){const e=pl.get(n);if(!e&&n===yf&&_1())return N1();if(!e)throw Ys.create("no-app",{appName:n});return e}function fr(n,e,t){var r;let i=(r=h_[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ss.warn(a.join(" "));return}ki(new ri(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_="firebase-heartbeat-database",m_=1,Wc="firebase-heartbeat-store";let qh=null;function P1(){return qh||(qh=S1(g_,m_,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Wc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ys.create("idb-open",{originalErrorMessage:n.message})})),qh}async function v_(n){try{const t=(await P1()).transaction(Wc),r=await t.objectStore(Wc).get(L1(n));return await t.done,r}catch(e){if(e instanceof oi)ss.warn(e.message);else{const t=Ys.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ss.warn(t.message)}}}async function Qp(n,e){try{const r=(await P1()).transaction(Wc,"readwrite");await r.objectStore(Wc).put(e,L1(n)),await r.done}catch(t){if(t instanceof oi)ss.warn(t.message);else{const r=Ys.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ss.warn(r.message)}}}function L1(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_=1024,__=30;class w_{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new A_(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Yp();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>__){const o=E_(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ss.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Yp(),{heartbeatsToSend:r,unsentEntries:i}=b_(this._heartbeatsCache.heartbeats),s=dl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return ss.warn(t),""}}}function Yp(){return new Date().toISOString().substring(0,10)}function b_(n,e=y_){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Xp(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Xp(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class A_{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return A1()?E1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await v_(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Qp(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Qp(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Xp(n){return dl(JSON.stringify({version:2,heartbeats:n})).length}function E_(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(n){ki(new ri("platform-logger",e=>new Fy(e),"PRIVATE")),ki(new ri("heartbeat",e=>new w_(e),"PRIVATE")),fr(vf,Kp,n),fr(vf,Kp,"esm2017"),fr("fire-js","")}I_("");function ad(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function R1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const T_=R1,C1=new Jo("auth","Firebase",R1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=new zl("@firebase/auth");function S_(n,...e){gl.logLevel<=_t.WARN&&gl.warn(`Auth (${Yo}): ${n}`,...e)}function Yu(n,...e){gl.logLevel<=_t.ERROR&&gl.error(`Auth (${Yo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(n,...e){throw cd(n,...e)}function Si(n,...e){return cd(n,...e)}function k1(n,e,t){const r=Object.assign(Object.assign({},T_()),{[e]:t});return new Jo("auth","Firebase",r).create(e,{appName:n.name})}function Xs(n){return k1(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cd(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return C1.create(n,...e)}function st(n,e,...t){if(!n)throw cd(e,...t)}function ns(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Yu(e),new Error(e)}function os(n,e){n||ns(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function N_(){return Zp()==="http:"||Zp()==="https:"}function Zp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(N_()||oy()||"connection"in navigator)?navigator.onLine:!0}function L_(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,t){this.shortDelay=e,this.longDelay=t,os(t>e,"Short delay should be less than long delay!"),this.isMobile=ry()||ay()}get(){return P_()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(n,e){os(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],k_=new iu(3e4,6e4);function Xo(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function po(n,e,t,r,i={}){return O1(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=ru(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const f=Object.assign({method:e,headers:l},s);return sy()||(f.referrerPolicy="no-referrer"),x1.fetch()(await D1(n,n.config.apiHost,t,a),f)})}async function O1(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},R_),e);try{const i=new O_(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Vu(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,f]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vu(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Vu(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Vu(n,"user-disabled",o);const g=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw k1(n,g,f);ii(n,g)}}catch(i){if(i instanceof oi)throw i;ii(n,"network-request-failed",{message:String(i)})}}async function Hl(n,e,t,r,i={}){const s=await po(n,e,t,r,i);return"mfaPendingCredential"in s&&ii(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function D1(n,e,t,r){const i=`${e}${t}?${r}`,s=n,o=s.config.emulator?ud(n.config,i):`${n.config.apiScheme}://${i}`;return C_.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function x_(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class O_{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Si(this.auth,"network-request-failed")),k_.get())})}}function Vu(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Si(n,e,r);return i.customData._tokenResponse=t,i}function eg(n){return n!==void 0&&n.enterprise!==void 0}class D_{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return x_(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function F_(n,e){return po(n,"GET","/v2/recaptchaConfig",Xo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M_(n,e){return po(n,"POST","/v1/accounts:delete",e)}async function ml(n,e){return po(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function V_(n,e=!1){const t=_n(n),r=await t.getIdToken(e),i=ld(r);st(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Mc(zh(i.auth_time)),issuedAtTime:Mc(zh(i.iat)),expirationTime:Mc(zh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function zh(n){return Number(n)*1e3}function ld(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Yu("JWT malformed, contained fewer than 3 sections"),null;try{const i=m1(t);return i?JSON.parse(i):(Yu("Failed to decode base64 JWT payload"),null)}catch(i){return Yu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function tg(n){const e=ld(n);return st(e,"internal-error"),st(typeof e.exp<"u","internal-error"),st(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof oi&&U_(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function U_({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mc(this.lastLoginAt),this.creationTime=Mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vl(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Gc(n,ml(t,{idToken:r}));st(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?F1(s.providerUserInfo):[],a=q_(n.providerData,o),l=n.isAnonymous,f=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),g=l?f:!1,y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new bf(s.createdAt,s.lastLoginAt),isAnonymous:g};Object.assign(n,y)}async function B_(n){const e=_n(n);await vl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function q_(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function F1(n){return n.map(e=>{var{providerId:t}=e,r=ad(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z_(n,e){const t=await O1(n,{},async()=>{const r=ru({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await D1(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",x1.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function $_(n,e){return po(n,"POST","/v2/accounts:revokeToken",Xo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){st(e.idToken,"internal-error"),st(typeof e.idToken<"u","internal-error"),st(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){st(e.length!==0,"internal-error");const t=tg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(st(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await z_(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new Va;return r&&(st(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(st(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(st(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Va,this.toJSON())}_performRefresh(){return ns("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(n,e){st(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ei{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=ad(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new j_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new bf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Gc(this,this.stsTokenManager.getToken(this.auth,e));return st(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return V_(this,e)}reload(){return B_(this)}_assign(e){this!==e&&(st(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ei(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){st(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await vl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mr(this.auth.app))return Promise.reject(Xs(this.auth));const e=await this.getIdToken();return await Gc(this,M_(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,f,g;const y=(r=t.displayName)!==null&&r!==void 0?r:void 0,b=(i=t.email)!==null&&i!==void 0?i:void 0,v=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,M=(o=t.photoURL)!==null&&o!==void 0?o:void 0,x=(a=t.tenantId)!==null&&a!==void 0?a:void 0,F=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,P=(f=t.createdAt)!==null&&f!==void 0?f:void 0,B=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:K,emailVerified:ie,isAnonymous:le,providerData:we,stsTokenManager:U}=t;st(K&&U,e,"internal-error");const I=Va.fromJSON(this.name,U);st(typeof K=="string",e,"internal-error"),Us(y,e.name),Us(b,e.name),st(typeof ie=="boolean",e,"internal-error"),st(typeof le=="boolean",e,"internal-error"),Us(v,e.name),Us(M,e.name),Us(x,e.name),Us(F,e.name),Us(P,e.name),Us(B,e.name);const k=new ei({uid:K,auth:e,email:b,emailVerified:ie,displayName:y,isAnonymous:le,photoURL:M,phoneNumber:v,tenantId:x,stsTokenManager:I,createdAt:P,lastLoginAt:B});return we&&Array.isArray(we)&&(k.providerData=we.map(j=>Object.assign({},j))),F&&(k._redirectEventId=F),k}static async _fromIdTokenResponse(e,t,r=!1){const i=new Va;i.updateFromServerResponse(t);const s=new ei({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await vl(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];st(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?F1(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Va;a.updateFromIdToken(r);const l=new ei({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new bf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,f),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng=new Map;function rs(n){os(n instanceof Function,"Expected a class definition");let e=ng.get(n);return e?(os(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ng.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}M1.type="NONE";const rg=M1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(n,e,t){return`firebase:${n}:${e}:${t}`}class Ua{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Xu(this.userKey,i.apiKey,s),this.fullPersistenceKey=Xu("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ml(this.auth,{idToken:e}).catch(()=>{});return t?ei._fromGetAccountInfoResponse(this.auth,t,e):null}return ei._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ua(rs(rg),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let s=i[0]||rs(rg);const o=Xu(r,e.config.apiKey,e.name);let a=null;for(const f of t)try{const g=await f._get(o);if(g){let y;if(typeof g=="string"){const b=await ml(e,{idToken:g}).catch(()=>{});if(!b)break;y=await ei._fromGetAccountInfoResponse(e,b,g)}else y=ei._fromJSON(e,g);f!==s&&(a=y),s=f;break}}catch{}const l=i.filter(f=>f._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ua(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async f=>{if(f!==s)try{await f._remove(o)}catch{}})),new Ua(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(B1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(V1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(z1(e))return"Blackberry";if($1(e))return"Webos";if(U1(e))return"Safari";if((e.includes("chrome/")||j1(e))&&!e.includes("edge/"))return"Chrome";if(q1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function V1(n=Qn()){return/firefox\//i.test(n)}function U1(n=Qn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function j1(n=Qn()){return/crios\//i.test(n)}function B1(n=Qn()){return/iemobile/i.test(n)}function q1(n=Qn()){return/android/i.test(n)}function z1(n=Qn()){return/blackberry/i.test(n)}function $1(n=Qn()){return/webos/i.test(n)}function hd(n=Qn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function H_(n=Qn()){var e;return hd(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function W_(){return cy()&&document.documentMode===10}function H1(n=Qn()){return hd(n)||q1(n)||$1(n)||z1(n)||/windows phone/i.test(n)||B1(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(n,e=[]){let t;switch(n){case"Browser":t=ig(Qn());break;case"Worker":t=`${ig(Qn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Yo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K_(n,e={}){return po(n,"GET","/v2/passwordPolicy",Xo(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_=6;class Q_{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:J_,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sg(this),this.idTokenSubscription=new sg(this),this.beforeStateQueue=new G_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=C1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=rs(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Ua.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ml(this,{idToken:e}),r=await ei._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Mr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return st(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vl(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=L_()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mr(this.app))return Promise.reject(Xs(this));const t=e?_n(e):null;return t&&st(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&st(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mr(this.app)?Promise.reject(Xs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mr(this.app)?Promise.reject(Xs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await K_(this),t=new Q_(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Jo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await $_(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&rs(e)||this._popupRedirectResolver;st(t,this,"argument-error"),this.redirectPersistenceManager=await Ua.create(this,[rs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(st(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return st(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=W1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Mr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&S_(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function nc(n){return _n(n)}class sg{constructor(e){this.auth=e,this.observer=null,this.addObserver=gy(t=>this.observer=t)}get next(){return st(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function X_(n){Wl=n}function G1(n){return Wl.loadJS(n)}function Z_(){return Wl.recaptchaEnterpriseScript}function ew(){return Wl.gapiScript}function tw(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class nw{constructor(){this.enterprise=new rw}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class rw{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const iw="recaptcha-enterprise",K1="NO_RECAPTCHA";class sw{constructor(e){this.type=iw,this.auth=nc(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{F_(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const f=new D_(l);return s.tenantId==null?s._agentRecaptchaConfig=f:s._tenantRecaptchaConfigs[s.tenantId]=f,o(f.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;eg(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(f=>{o(f)}).catch(()=>{o(K1)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new nw().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&eg(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Z_();l.length!==0&&(l+=a),G1(l).then(()=>{i(a,s,o)}).catch(f=>{o(f)})}}).catch(a=>{o(a)})})}}async function og(n,e,t,r=!1,i=!1){const s=new sw(n);let o;if(i)o=K1;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}const a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,f=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:f,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ag(n,e,t,r,i){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await og(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await og(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(n,e){const t=Qo(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(zo(s,e??{}))return i;ii(i,"already-initialized")}return t.initialize({options:e})}function aw(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(rs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function cw(n,e,t){const r=nc(n);st(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=J1(e),{host:o,port:a}=uw(e),l=a===null?"":`:${a}`,f={url:`${s}//${o}${l}/`},g=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){st(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),st(zo(f,r.config.emulator)&&zo(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,lw()}function J1(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function uw(n){const e=J1(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:cg(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:cg(o)}}}function cg(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function lw(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ns("not implemented")}_getIdTokenResponse(e){return ns("not implemented")}_linkToIdToken(e,t){return ns("not implemented")}_getReauthenticationResolver(e){return ns("not implemented")}}async function hw(n,e){return po(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fw(n,e){return Hl(n,"POST","/v1/accounts:signInWithPassword",Xo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dw(n,e){return Hl(n,"POST","/v1/accounts:signInWithEmailLink",Xo(n,e))}async function pw(n,e){return Hl(n,"POST","/v1/accounts:signInWithEmailLink",Xo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc extends fd{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Kc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Kc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ag(e,t,"signInWithPassword",fw);case"emailLink":return dw(e,{email:this._email,oobCode:this._password});default:ii(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ag(e,r,"signUpPassword",hw);case"emailLink":return pw(e,{idToken:t,email:this._email,oobCode:this._password});default:ii(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ja(n,e){return Hl(n,"POST","/v1/accounts:signInWithIdp",Xo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw="http://localhost";class $o extends fd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new $o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ii("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=ad(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new $o(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return ja(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ja(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ja(e,t)}buildRequest(){const e={requestUri:gw,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ru(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vw(n){const e=Cc(kc(n)).link,t=e?Cc(kc(e)).deep_link_id:null,r=Cc(kc(n)).deep_link_id;return(r?Cc(kc(r)).link:null)||r||t||e||n}class dd{constructor(e){var t,r,i,s,o,a;const l=Cc(kc(e)),f=(t=l.apiKey)!==null&&t!==void 0?t:null,g=(r=l.oobCode)!==null&&r!==void 0?r:null,y=mw((i=l.mode)!==null&&i!==void 0?i:null);st(f&&g&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=g,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=vw(e);try{return new dd(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(){this.providerId=rc.PROVIDER_ID}static credential(e,t){return Kc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=dd.parseLink(t);return st(r,"argument-error"),Kc._fromEmailAndCode(e,r.code,r.tenantId)}}rc.PROVIDER_ID="password";rc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";rc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends Q1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends su{constructor(){super("facebook.com")}static credential(e){return $o._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zs.credential(e.oauthAccessToken)}catch{return null}}}zs.FACEBOOK_SIGN_IN_METHOD="facebook.com";zs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends su{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return $o._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return $s.credential(t,r)}catch{return null}}}$s.GOOGLE_SIGN_IN_METHOD="google.com";$s.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends su{constructor(){super("github.com")}static credential(e){return $o._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hs.credential(e.oauthAccessToken)}catch{return null}}}Hs.GITHUB_SIGN_IN_METHOD="github.com";Hs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends su{constructor(){super("twitter.com")}static credential(e,t){return $o._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ws.credentialFromTaggedObject(e)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ws.credential(t,r)}catch{return null}}}Ws.TWITTER_SIGN_IN_METHOD="twitter.com";Ws.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await ei._fromIdTokenResponse(e,r,i),o=ug(r);return new Ka({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=ug(r);return new Ka({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function ug(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl extends oi{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,yl.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new yl(e,t,r,i)}}function Y1(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?yl._fromErrorAndOperation(n,s,e,r):s})}async function yw(n,e,t=!1){const r=await Gc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ka._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _w(n,e,t=!1){const{auth:r}=n;if(Mr(r.app))return Promise.reject(Xs(r));const i="reauthenticate";try{const s=await Gc(n,Y1(r,i,e,n),t);st(s.idToken,r,"internal-error");const o=ld(s.idToken);st(o,r,"internal-error");const{sub:a}=o;return st(n.uid===a,r,"user-mismatch"),Ka._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ii(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X1(n,e,t=!1){if(Mr(n.app))return Promise.reject(Xs(n));const r="signIn",i=await Y1(n,r,e),s=await Ka._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function ww(n,e){return X1(nc(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bw(n){const e=nc(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function Aw(n,e,t){return Mr(n.app)?Promise.reject(Xs(n)):ww(_n(n),rc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&bw(n),r})}function Ew(n,e,t,r){return _n(n).onIdTokenChanged(e,t,r)}function Iw(n,e,t){return _n(n).beforeAuthStateChanged(e,t)}function Tw(n,e,t,r){return _n(n).onAuthStateChanged(e,t,r)}function Sw(n){return _n(n).signOut()}const _l="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_l,"1"),this.storage.removeItem(_l),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw=1e3,Pw=10;class e2 extends Z1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=H1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);W_()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Pw):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Nw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}e2.type="LOCAL";const Lw=e2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2 extends Z1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}t2.type="SESSION";const n2=t2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Gl(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async f=>f(t.origin,s)),l=await Rw(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gl.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const f=pd("",20);i.port1.start();const g=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(y){const b=y;if(b.data.eventId===f)switch(b.data.status){case"ack":clearTimeout(g),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(b.data.response);break;default:clearTimeout(g),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(){return window}function kw(n){Ni().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(){return typeof Ni().WorkerGlobalScope<"u"&&typeof Ni().importScripts=="function"}async function xw(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ow(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Dw(){return r2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2="firebaseLocalStorageDb",Fw=1,wl="firebaseLocalStorage",s2="fbase_key";class ou{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Kl(n,e){return n.transaction([wl],e?"readwrite":"readonly").objectStore(wl)}function Mw(){const n=indexedDB.deleteDatabase(i2);return new ou(n).toPromise()}function Af(){const n=indexedDB.open(i2,Fw);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(wl,{keyPath:s2})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(wl)?e(r):(r.close(),await Mw(),e(await Af()))})})}async function lg(n,e,t){const r=Kl(n,!0).put({[s2]:e,value:t});return new ou(r).toPromise()}async function Vw(n,e){const t=Kl(n,!1).get(e),r=await new ou(t).toPromise();return r===void 0?null:r.value}function hg(n,e){const t=Kl(n,!0).delete(e);return new ou(t).toPromise()}const Uw=800,jw=3;class o2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Af(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>jw)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return r2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gl._getInstance(Dw()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await xw(),!this.activeServiceWorker)return;this.sender=new Cw(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ow()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Af();return await lg(e,_l,"1"),await hg(e,_l),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>lg(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Vw(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>hg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Kl(i,!1).getAll();return new ou(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Uw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}o2.type="LOCAL";const Bw=o2;new iu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(n,e){return e?rs(e):(st(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd extends fd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ja(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ja(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ja(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function zw(n){return X1(n.auth,new gd(n),n.bypassAuthState)}function $w(n){const{auth:e,user:t}=n;return st(t,e,"internal-error"),_w(t,new gd(n),n.bypassAuthState)}async function Hw(n){const{auth:e,user:t}=n;return st(t,e,"internal-error"),yw(t,new gd(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zw;case"linkViaPopup":case"linkViaRedirect":return Hw;case"reauthViaPopup":case"reauthViaRedirect":return $w;default:ii(this.auth,"internal-error")}}resolve(e){os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww=new iu(2e3,1e4);class Da extends a2{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Da.currentPopupAction&&Da.currentPopupAction.cancel(),Da.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return st(e,this.auth,"internal-error"),e}async onExecution(){os(this.filter.length===1,"Popup operations only handle one event");const e=pd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Da.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ww.get())};e()}}Da.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="pendingRedirect",Zu=new Map;class Kw extends a2{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Zu.get(this.auth._key());if(!e){try{const r=await Jw(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Zu.set(this.auth._key(),e)}return this.bypassAuthState||Zu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Jw(n,e){const t=Xw(e),r=Yw(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function Qw(n,e){Zu.set(n._key(),e)}function Yw(n){return rs(n._redirectPersistence)}function Xw(n){return Xu(Gw,n.config.apiKey,n.name)}async function Zw(n,e,t=!1){if(Mr(n.app))return Promise.reject(Xs(n));const r=nc(n),i=qw(r,e),o=await new Kw(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=10*60*1e3;class tb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nb(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!c2(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Si(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eb&&this.cachedEventUids.clear(),this.cachedEventUids.has(fg(e))}saveEventToCache(e){this.cachedEventUids.add(fg(e)),this.lastProcessedEventTime=Date.now()}}function fg(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function c2({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function nb(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return c2(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rb(n,e={}){return po(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sb=/^https?/;async function ob(n){if(n.config.emulator)return;const{authorizedDomains:e}=await rb(n);for(const t of e)try{if(ab(t))return}catch{}ii(n,"unauthorized-domain")}function ab(n){const e=wf(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!sb.test(t))return!1;if(ib.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb=new iu(3e4,6e4);function dg(){const n=Ni().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function ub(n){return new Promise((e,t)=>{var r,i,s;function o(){dg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dg(),t(Si(n,"network-request-failed"))},timeout:cb.get()})}if(!((i=(r=Ni().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ni().gapi)===null||s===void 0)&&s.load)o();else{const a=tw("iframefcb");return Ni()[a]=()=>{gapi.load?o():t(Si(n,"network-request-failed"))},G1(`${ew()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw el=null,e})}let el=null;function lb(n){return el=el||ub(n),el}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb=new iu(5e3,15e3),fb="__/auth/iframe",db="emulator/auth/iframe",pb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mb(n){const e=n.config;st(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ud(e,db):`https://${n.config.authDomain}/${fb}`,r={apiKey:e.apiKey,appName:n.name,v:Yo},i=gb.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${ru(r).slice(1)}`}async function vb(n){const e=await lb(n),t=Ni().gapi;return st(t,n,"internal-error"),e.open({where:document.body,url:mb(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pb,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Si(n,"network-request-failed"),a=Ni().setTimeout(()=>{s(o)},hb.get());function l(){Ni().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_b=500,wb=600,bb="_blank",Ab="http://localhost";class pg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Eb(n,e,t,r=_b,i=wb){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},yb),{width:r.toString(),height:i.toString(),top:s,left:o}),f=Qn().toLowerCase();t&&(a=j1(f)?bb:t),V1(f)&&(e=e||Ab,l.scrollbars="yes");const g=Object.entries(l).reduce((b,[v,M])=>`${b}${v}=${M},`,"");if(H_(f)&&a!=="_self")return Ib(e||"",a),new pg(null);const y=window.open(e||"",a,g);st(y,n,"popup-blocked");try{y.focus()}catch{}return new pg(y)}function Ib(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb="__/auth/handler",Sb="emulator/auth/handler",Nb=encodeURIComponent("fac");async function gg(n,e,t,r,i,s){st(n.config.authDomain,n,"auth-domain-config-required"),st(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Yo,eventId:i};if(e instanceof Q1){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",py(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))o[g]=y}if(e instanceof su){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(o.scopes=g.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const g of Object.keys(a))a[g]===void 0&&delete a[g];const l=await n._getAppCheckToken(),f=l?`#${Nb}=${encodeURIComponent(l)}`:"";return`${Pb(n)}?${ru(a).slice(1)}${f}`}function Pb({config:n}){return n.emulator?ud(n,Sb):`https://${n.authDomain}/${Tb}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h="webStorageSupport";class Lb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=n2,this._completeRedirectFn=Zw,this._overrideRedirectResult=Qw}async _openPopup(e,t,r,i){var s;os((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await gg(e,t,r,wf(),i);return Eb(e,o,pd())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await gg(e,t,r,wf(),i);return kw(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(os(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await vb(e),r=new tb(e);return t.register("authEvent",i=>(st(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($h,{type:$h},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[$h];o!==void 0&&t(!!o),ii(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ob(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return H1()||U1()||hd()}}const Rb=Lb;var mg="@firebase/auth",vg="1.10.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){st(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xb(n){ki(new ri("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;st(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:W1(n)},f=new Y_(r,i,s,l);return aw(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ki(new ri("auth-internal",e=>{const t=nc(e.getProvider("auth").getImmediate());return(r=>new Cb(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),fr(mg,vg,kb(n)),fr(mg,vg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=5*60,Db=w1("authIdTokenMaxAge")||Ob;let yg=null;const Fb=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Db)return;const i=t==null?void 0:t.token;yg!==i&&(yg=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Mb(n=$l()){const e=Qo(n,"auth");if(e.isInitialized())return e.getImmediate();const t=ow(n,{popupRedirectResolver:Rb,persistence:[Bw,Lw,n2]}),r=w1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Fb(s.toString());Iw(t,o,()=>o(t.currentUser)),Ew(t,a=>o(a))}}const i=v1("auth");return i&&cw(t,`http://${i}`),t}function Vb(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}X_({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Si("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Vb().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xb("Browser");var Ub="firebase",jb="11.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fr(Ub,jb,"app");var _g=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zs,u2;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(U,I){function k(){}k.prototype=I.prototype,U.D=I.prototype,U.prototype=new k,U.prototype.constructor=U,U.C=function(j,A,E){for(var N=Array(arguments.length-2),G=2;G<arguments.length;G++)N[G-2]=arguments[G];return I.prototype[A].apply(j,N)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(U,I,k){k||(k=0);var j=Array(16);if(typeof I=="string")for(var A=0;16>A;++A)j[A]=I.charCodeAt(k++)|I.charCodeAt(k++)<<8|I.charCodeAt(k++)<<16|I.charCodeAt(k++)<<24;else for(A=0;16>A;++A)j[A]=I[k++]|I[k++]<<8|I[k++]<<16|I[k++]<<24;I=U.g[0],k=U.g[1],A=U.g[2];var E=U.g[3],N=I+(E^k&(A^E))+j[0]+3614090360&4294967295;I=k+(N<<7&4294967295|N>>>25),N=E+(A^I&(k^A))+j[1]+3905402710&4294967295,E=I+(N<<12&4294967295|N>>>20),N=A+(k^E&(I^k))+j[2]+606105819&4294967295,A=E+(N<<17&4294967295|N>>>15),N=k+(I^A&(E^I))+j[3]+3250441966&4294967295,k=A+(N<<22&4294967295|N>>>10),N=I+(E^k&(A^E))+j[4]+4118548399&4294967295,I=k+(N<<7&4294967295|N>>>25),N=E+(A^I&(k^A))+j[5]+1200080426&4294967295,E=I+(N<<12&4294967295|N>>>20),N=A+(k^E&(I^k))+j[6]+2821735955&4294967295,A=E+(N<<17&4294967295|N>>>15),N=k+(I^A&(E^I))+j[7]+4249261313&4294967295,k=A+(N<<22&4294967295|N>>>10),N=I+(E^k&(A^E))+j[8]+1770035416&4294967295,I=k+(N<<7&4294967295|N>>>25),N=E+(A^I&(k^A))+j[9]+2336552879&4294967295,E=I+(N<<12&4294967295|N>>>20),N=A+(k^E&(I^k))+j[10]+4294925233&4294967295,A=E+(N<<17&4294967295|N>>>15),N=k+(I^A&(E^I))+j[11]+2304563134&4294967295,k=A+(N<<22&4294967295|N>>>10),N=I+(E^k&(A^E))+j[12]+1804603682&4294967295,I=k+(N<<7&4294967295|N>>>25),N=E+(A^I&(k^A))+j[13]+4254626195&4294967295,E=I+(N<<12&4294967295|N>>>20),N=A+(k^E&(I^k))+j[14]+2792965006&4294967295,A=E+(N<<17&4294967295|N>>>15),N=k+(I^A&(E^I))+j[15]+1236535329&4294967295,k=A+(N<<22&4294967295|N>>>10),N=I+(A^E&(k^A))+j[1]+4129170786&4294967295,I=k+(N<<5&4294967295|N>>>27),N=E+(k^A&(I^k))+j[6]+3225465664&4294967295,E=I+(N<<9&4294967295|N>>>23),N=A+(I^k&(E^I))+j[11]+643717713&4294967295,A=E+(N<<14&4294967295|N>>>18),N=k+(E^I&(A^E))+j[0]+3921069994&4294967295,k=A+(N<<20&4294967295|N>>>12),N=I+(A^E&(k^A))+j[5]+3593408605&4294967295,I=k+(N<<5&4294967295|N>>>27),N=E+(k^A&(I^k))+j[10]+38016083&4294967295,E=I+(N<<9&4294967295|N>>>23),N=A+(I^k&(E^I))+j[15]+3634488961&4294967295,A=E+(N<<14&4294967295|N>>>18),N=k+(E^I&(A^E))+j[4]+3889429448&4294967295,k=A+(N<<20&4294967295|N>>>12),N=I+(A^E&(k^A))+j[9]+568446438&4294967295,I=k+(N<<5&4294967295|N>>>27),N=E+(k^A&(I^k))+j[14]+3275163606&4294967295,E=I+(N<<9&4294967295|N>>>23),N=A+(I^k&(E^I))+j[3]+4107603335&4294967295,A=E+(N<<14&4294967295|N>>>18),N=k+(E^I&(A^E))+j[8]+1163531501&4294967295,k=A+(N<<20&4294967295|N>>>12),N=I+(A^E&(k^A))+j[13]+2850285829&4294967295,I=k+(N<<5&4294967295|N>>>27),N=E+(k^A&(I^k))+j[2]+4243563512&4294967295,E=I+(N<<9&4294967295|N>>>23),N=A+(I^k&(E^I))+j[7]+1735328473&4294967295,A=E+(N<<14&4294967295|N>>>18),N=k+(E^I&(A^E))+j[12]+2368359562&4294967295,k=A+(N<<20&4294967295|N>>>12),N=I+(k^A^E)+j[5]+4294588738&4294967295,I=k+(N<<4&4294967295|N>>>28),N=E+(I^k^A)+j[8]+2272392833&4294967295,E=I+(N<<11&4294967295|N>>>21),N=A+(E^I^k)+j[11]+1839030562&4294967295,A=E+(N<<16&4294967295|N>>>16),N=k+(A^E^I)+j[14]+4259657740&4294967295,k=A+(N<<23&4294967295|N>>>9),N=I+(k^A^E)+j[1]+2763975236&4294967295,I=k+(N<<4&4294967295|N>>>28),N=E+(I^k^A)+j[4]+1272893353&4294967295,E=I+(N<<11&4294967295|N>>>21),N=A+(E^I^k)+j[7]+4139469664&4294967295,A=E+(N<<16&4294967295|N>>>16),N=k+(A^E^I)+j[10]+3200236656&4294967295,k=A+(N<<23&4294967295|N>>>9),N=I+(k^A^E)+j[13]+681279174&4294967295,I=k+(N<<4&4294967295|N>>>28),N=E+(I^k^A)+j[0]+3936430074&4294967295,E=I+(N<<11&4294967295|N>>>21),N=A+(E^I^k)+j[3]+3572445317&4294967295,A=E+(N<<16&4294967295|N>>>16),N=k+(A^E^I)+j[6]+76029189&4294967295,k=A+(N<<23&4294967295|N>>>9),N=I+(k^A^E)+j[9]+3654602809&4294967295,I=k+(N<<4&4294967295|N>>>28),N=E+(I^k^A)+j[12]+3873151461&4294967295,E=I+(N<<11&4294967295|N>>>21),N=A+(E^I^k)+j[15]+530742520&4294967295,A=E+(N<<16&4294967295|N>>>16),N=k+(A^E^I)+j[2]+3299628645&4294967295,k=A+(N<<23&4294967295|N>>>9),N=I+(A^(k|~E))+j[0]+4096336452&4294967295,I=k+(N<<6&4294967295|N>>>26),N=E+(k^(I|~A))+j[7]+1126891415&4294967295,E=I+(N<<10&4294967295|N>>>22),N=A+(I^(E|~k))+j[14]+2878612391&4294967295,A=E+(N<<15&4294967295|N>>>17),N=k+(E^(A|~I))+j[5]+4237533241&4294967295,k=A+(N<<21&4294967295|N>>>11),N=I+(A^(k|~E))+j[12]+1700485571&4294967295,I=k+(N<<6&4294967295|N>>>26),N=E+(k^(I|~A))+j[3]+2399980690&4294967295,E=I+(N<<10&4294967295|N>>>22),N=A+(I^(E|~k))+j[10]+4293915773&4294967295,A=E+(N<<15&4294967295|N>>>17),N=k+(E^(A|~I))+j[1]+2240044497&4294967295,k=A+(N<<21&4294967295|N>>>11),N=I+(A^(k|~E))+j[8]+1873313359&4294967295,I=k+(N<<6&4294967295|N>>>26),N=E+(k^(I|~A))+j[15]+4264355552&4294967295,E=I+(N<<10&4294967295|N>>>22),N=A+(I^(E|~k))+j[6]+2734768916&4294967295,A=E+(N<<15&4294967295|N>>>17),N=k+(E^(A|~I))+j[13]+1309151649&4294967295,k=A+(N<<21&4294967295|N>>>11),N=I+(A^(k|~E))+j[4]+4149444226&4294967295,I=k+(N<<6&4294967295|N>>>26),N=E+(k^(I|~A))+j[11]+3174756917&4294967295,E=I+(N<<10&4294967295|N>>>22),N=A+(I^(E|~k))+j[2]+718787259&4294967295,A=E+(N<<15&4294967295|N>>>17),N=k+(E^(A|~I))+j[9]+3951481745&4294967295,U.g[0]=U.g[0]+I&4294967295,U.g[1]=U.g[1]+(A+(N<<21&4294967295|N>>>11))&4294967295,U.g[2]=U.g[2]+A&4294967295,U.g[3]=U.g[3]+E&4294967295}r.prototype.u=function(U,I){I===void 0&&(I=U.length);for(var k=I-this.blockSize,j=this.B,A=this.h,E=0;E<I;){if(A==0)for(;E<=k;)i(this,U,E),E+=this.blockSize;if(typeof U=="string"){for(;E<I;)if(j[A++]=U.charCodeAt(E++),A==this.blockSize){i(this,j),A=0;break}}else for(;E<I;)if(j[A++]=U[E++],A==this.blockSize){i(this,j),A=0;break}}this.h=A,this.o+=I},r.prototype.v=function(){var U=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);U[0]=128;for(var I=1;I<U.length-8;++I)U[I]=0;var k=8*this.o;for(I=U.length-8;I<U.length;++I)U[I]=k&255,k/=256;for(this.u(U),U=Array(16),I=k=0;4>I;++I)for(var j=0;32>j;j+=8)U[k++]=this.g[I]>>>j&255;return U};function s(U,I){var k=a;return Object.prototype.hasOwnProperty.call(k,U)?k[U]:k[U]=I(U)}function o(U,I){this.h=I;for(var k=[],j=!0,A=U.length-1;0<=A;A--){var E=U[A]|0;j&&E==I||(k[A]=E,j=!1)}this.g=k}var a={};function l(U){return-128<=U&&128>U?s(U,function(I){return new o([I|0],0>I?-1:0)}):new o([U|0],0>U?-1:0)}function f(U){if(isNaN(U)||!isFinite(U))return y;if(0>U)return F(f(-U));for(var I=[],k=1,j=0;U>=k;j++)I[j]=U/k|0,k*=4294967296;return new o(I,0)}function g(U,I){if(U.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(U.charAt(0)=="-")return F(g(U.substring(1),I));if(0<=U.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=f(Math.pow(I,8)),j=y,A=0;A<U.length;A+=8){var E=Math.min(8,U.length-A),N=parseInt(U.substring(A,A+E),I);8>E?(E=f(Math.pow(I,E)),j=j.j(E).add(f(N))):(j=j.j(k),j=j.add(f(N)))}return j}var y=l(0),b=l(1),v=l(16777216);n=o.prototype,n.m=function(){if(x(this))return-F(this).m();for(var U=0,I=1,k=0;k<this.g.length;k++){var j=this.i(k);U+=(0<=j?j:4294967296+j)*I,I*=4294967296}return U},n.toString=function(U){if(U=U||10,2>U||36<U)throw Error("radix out of range: "+U);if(M(this))return"0";if(x(this))return"-"+F(this).toString(U);for(var I=f(Math.pow(U,6)),k=this,j="";;){var A=ie(k,I).g;k=P(k,A.j(I));var E=((0<k.g.length?k.g[0]:k.h)>>>0).toString(U);if(k=A,M(k))return E+j;for(;6>E.length;)E="0"+E;j=E+j}},n.i=function(U){return 0>U?0:U<this.g.length?this.g[U]:this.h};function M(U){if(U.h!=0)return!1;for(var I=0;I<U.g.length;I++)if(U.g[I]!=0)return!1;return!0}function x(U){return U.h==-1}n.l=function(U){return U=P(this,U),x(U)?-1:M(U)?0:1};function F(U){for(var I=U.g.length,k=[],j=0;j<I;j++)k[j]=~U.g[j];return new o(k,~U.h).add(b)}n.abs=function(){return x(this)?F(this):this},n.add=function(U){for(var I=Math.max(this.g.length,U.g.length),k=[],j=0,A=0;A<=I;A++){var E=j+(this.i(A)&65535)+(U.i(A)&65535),N=(E>>>16)+(this.i(A)>>>16)+(U.i(A)>>>16);j=N>>>16,E&=65535,N&=65535,k[A]=N<<16|E}return new o(k,k[k.length-1]&-2147483648?-1:0)};function P(U,I){return U.add(F(I))}n.j=function(U){if(M(this)||M(U))return y;if(x(this))return x(U)?F(this).j(F(U)):F(F(this).j(U));if(x(U))return F(this.j(F(U)));if(0>this.l(v)&&0>U.l(v))return f(this.m()*U.m());for(var I=this.g.length+U.g.length,k=[],j=0;j<2*I;j++)k[j]=0;for(j=0;j<this.g.length;j++)for(var A=0;A<U.g.length;A++){var E=this.i(j)>>>16,N=this.i(j)&65535,G=U.i(A)>>>16,pe=U.i(A)&65535;k[2*j+2*A]+=N*pe,B(k,2*j+2*A),k[2*j+2*A+1]+=E*pe,B(k,2*j+2*A+1),k[2*j+2*A+1]+=N*G,B(k,2*j+2*A+1),k[2*j+2*A+2]+=E*G,B(k,2*j+2*A+2)}for(j=0;j<I;j++)k[j]=k[2*j+1]<<16|k[2*j];for(j=I;j<2*I;j++)k[j]=0;return new o(k,0)};function B(U,I){for(;(U[I]&65535)!=U[I];)U[I+1]+=U[I]>>>16,U[I]&=65535,I++}function K(U,I){this.g=U,this.h=I}function ie(U,I){if(M(I))throw Error("division by zero");if(M(U))return new K(y,y);if(x(U))return I=ie(F(U),I),new K(F(I.g),F(I.h));if(x(I))return I=ie(U,F(I)),new K(F(I.g),I.h);if(30<U.g.length){if(x(U)||x(I))throw Error("slowDivide_ only works with positive integers.");for(var k=b,j=I;0>=j.l(U);)k=le(k),j=le(j);var A=we(k,1),E=we(j,1);for(j=we(j,2),k=we(k,2);!M(j);){var N=E.add(j);0>=N.l(U)&&(A=A.add(k),E=N),j=we(j,1),k=we(k,1)}return I=P(U,A.j(I)),new K(A,I)}for(A=y;0<=U.l(I);){for(k=Math.max(1,Math.floor(U.m()/I.m())),j=Math.ceil(Math.log(k)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),E=f(k),N=E.j(I);x(N)||0<N.l(U);)k-=j,E=f(k),N=E.j(I);M(E)&&(E=b),A=A.add(E),U=P(U,N)}return new K(A,U)}n.A=function(U){return ie(this,U).h},n.and=function(U){for(var I=Math.max(this.g.length,U.g.length),k=[],j=0;j<I;j++)k[j]=this.i(j)&U.i(j);return new o(k,this.h&U.h)},n.or=function(U){for(var I=Math.max(this.g.length,U.g.length),k=[],j=0;j<I;j++)k[j]=this.i(j)|U.i(j);return new o(k,this.h|U.h)},n.xor=function(U){for(var I=Math.max(this.g.length,U.g.length),k=[],j=0;j<I;j++)k[j]=this.i(j)^U.i(j);return new o(k,this.h^U.h)};function le(U){for(var I=U.g.length+1,k=[],j=0;j<I;j++)k[j]=U.i(j)<<1|U.i(j-1)>>>31;return new o(k,U.h)}function we(U,I){var k=I>>5;I%=32;for(var j=U.g.length-k,A=[],E=0;E<j;E++)A[E]=0<I?U.i(E+k)>>>I|U.i(E+k+1)<<32-I:U.i(E+k);return new o(A,U.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,u2=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=f,o.fromString=g,Zs=o}).apply(typeof _g<"u"?_g:typeof self<"u"?self:typeof window<"u"?window:{});var Uu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var l2,xc,h2,tl,Ef,f2,d2,p2;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,w){return u==Array.prototype||u==Object.prototype||(u[m]=w.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uu=="object"&&Uu];for(var m=0;m<u.length;++m){var w=u[m];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function i(u,m){if(m)e:{var w=r;u=u.split(".");for(var O=0;O<u.length-1;O++){var ee=u[O];if(!(ee in w))break e;w=w[ee]}u=u[u.length-1],O=w[u],m=m(O),m!=O&&m!=null&&e(w,u,{configurable:!0,writable:!0,value:m})}}function s(u,m){u instanceof String&&(u+="");var w=0,O=!1,ee={next:function(){if(!O&&w<u.length){var ce=w++;return{value:m(ce,u[ce]),done:!1}}return O=!0,{done:!0,value:void 0}}};return ee[Symbol.iterator]=function(){return ee},ee}i("Array.prototype.values",function(u){return u||function(){return s(this,function(m,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function f(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function g(u,m,w){return u.call.apply(u.bind,arguments)}function y(u,m,w){if(!u)throw Error();if(2<arguments.length){var O=Array.prototype.slice.call(arguments,2);return function(){var ee=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ee,O),u.apply(m,ee)}}return function(){return u.apply(m,arguments)}}function b(u,m,w){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:y,b.apply(null,arguments)}function v(u,m){var w=Array.prototype.slice.call(arguments,1);return function(){var O=w.slice();return O.push.apply(O,arguments),u.apply(this,O)}}function M(u,m){function w(){}w.prototype=m.prototype,u.aa=m.prototype,u.prototype=new w,u.prototype.constructor=u,u.Qb=function(O,ee,ce){for(var Le=Array(arguments.length-2),ft=2;ft<arguments.length;ft++)Le[ft-2]=arguments[ft];return m.prototype[ee].apply(O,Le)}}function x(u){const m=u.length;if(0<m){const w=Array(m);for(let O=0;O<m;O++)w[O]=u[O];return w}return[]}function F(u,m){for(let w=1;w<arguments.length;w++){const O=arguments[w];if(l(O)){const ee=u.length||0,ce=O.length||0;u.length=ee+ce;for(let Le=0;Le<ce;Le++)u[ee+Le]=O[Le]}else u.push(O)}}class P{constructor(m,w){this.i=m,this.j=w,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function B(u){return/^[\s\xa0]*$/.test(u)}function K(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function ie(u){return ie[" "](u),u}ie[" "]=function(){};var le=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function we(u,m,w){for(const O in u)m.call(w,u[O],O,u)}function U(u,m){for(const w in u)m.call(void 0,u[w],w,u)}function I(u){const m={};for(const w in u)m[w]=u[w];return m}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(u,m){let w,O;for(let ee=1;ee<arguments.length;ee++){O=arguments[ee];for(w in O)u[w]=O[w];for(let ce=0;ce<k.length;ce++)w=k[ce],Object.prototype.hasOwnProperty.call(O,w)&&(u[w]=O[w])}}function A(u){var m=1;u=u.split(":");const w=[];for(;0<m&&u.length;)w.push(u.shift()),m--;return u.length&&w.push(u.join(":")),w}function E(u){a.setTimeout(()=>{throw u},0)}function N(){var u=me;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class G{constructor(){this.h=this.g=null}add(m,w){const O=pe.get();O.set(m,w),this.h?this.h.next=O:this.g=O,this.h=O}}var pe=new P(()=>new fe,u=>u.reset());class fe{constructor(){this.next=this.g=this.h=null}set(m,w){this.h=m,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ge,se=!1,me=new G,be=()=>{const u=a.Promise.resolve(void 0);ge=()=>{u.then(qe)}};var qe=()=>{for(var u;u=N();){try{u.h.call(u.g)}catch(w){E(w)}var m=pe;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}se=!1};function C(){this.s=this.s,this.C=this.C}C.prototype.s=!1,C.prototype.ma=function(){this.s||(this.s=!0,this.N())},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var W=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const w=()=>{};a.addEventListener("test",w,m),a.removeEventListener("test",w,m)}catch{}return u}();function Q(u,m){if(z.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var w=this.type=u.type,O=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(le){e:{try{ie(m.nodeName);var ee=!0;break e}catch{}ee=!1}ee||(m=null)}}else w=="mouseover"?m=u.fromElement:w=="mouseout"&&(m=u.toElement);this.relatedTarget=m,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ne[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Q.aa.h.call(this)}}M(Q,z);var ne={2:"touch",3:"pen",4:"mouse"};Q.prototype.h=function(){Q.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ue="closure_listenable_"+(1e6*Math.random()|0),he=0;function de(u,m,w,O,ee){this.listener=u,this.proxy=null,this.src=m,this.type=w,this.capture=!!O,this.ha=ee,this.key=++he,this.da=this.fa=!1}function ke(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Re(u){this.src=u,this.g={},this.h=0}Re.prototype.add=function(u,m,w,O,ee){var ce=u.toString();u=this.g[ce],u||(u=this.g[ce]=[],this.h++);var Le=Oe(u,m,O,ee);return-1<Le?(m=u[Le],w||(m.fa=!1)):(m=new de(m,this.src,ce,!!O,ee),m.fa=w,u.push(m)),m};function Fe(u,m){var w=m.type;if(w in u.g){var O=u.g[w],ee=Array.prototype.indexOf.call(O,m,void 0),ce;(ce=0<=ee)&&Array.prototype.splice.call(O,ee,1),ce&&(ke(m),u.g[w].length==0&&(delete u.g[w],u.h--))}}function Oe(u,m,w,O){for(var ee=0;ee<u.length;++ee){var ce=u[ee];if(!ce.da&&ce.listener==m&&ce.capture==!!w&&ce.ha==O)return ee}return-1}var Xe="closure_lm_"+(1e6*Math.random()|0),_e={};function H(u,m,w,O,ee){if(Array.isArray(m)){for(var ce=0;ce<m.length;ce++)H(u,m[ce],w,O,ee);return null}return w=ht(w),u&&u[ue]?u.K(m,w,f(O)?!!O.capture:!1,ee):ut(u,m,w,!1,O,ee)}function ut(u,m,w,O,ee,ce){if(!m)throw Error("Invalid event type");var Le=f(ee)?!!ee.capture:!!ee,ft=Je(u);if(ft||(u[Xe]=ft=new Re(u)),w=ft.add(m,w,O,Le,ce),w.proxy)return w;if(O=Ke(),w.proxy=O,O.src=u,O.listener=w,u.addEventListener)W||(ee=Le),ee===void 0&&(ee=!1),u.addEventListener(m.toString(),O,ee);else if(u.attachEvent)u.attachEvent(je(m.toString()),O);else if(u.addListener&&u.removeListener)u.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Ke(){function u(w){return m.call(u.src,u.listener,w)}const m=Ve;return u}function Ce(u,m,w,O,ee){if(Array.isArray(m))for(var ce=0;ce<m.length;ce++)Ce(u,m[ce],w,O,ee);else O=f(O)?!!O.capture:!!O,w=ht(w),u&&u[ue]?(u=u.i,m=String(m).toString(),m in u.g&&(ce=u.g[m],w=Oe(ce,w,O,ee),-1<w&&(ke(ce[w]),Array.prototype.splice.call(ce,w,1),ce.length==0&&(delete u.g[m],u.h--)))):u&&(u=Je(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Oe(m,w,O,ee)),(w=-1<u?m[u]:null)&&xe(w))}function xe(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[ue])Fe(m.i,u);else{var w=u.type,O=u.proxy;m.removeEventListener?m.removeEventListener(w,O,u.capture):m.detachEvent?m.detachEvent(je(w),O):m.addListener&&m.removeListener&&m.removeListener(O),(w=Je(m))?(Fe(w,u),w.h==0&&(w.src=null,m[Xe]=null)):ke(u)}}}function je(u){return u in _e?_e[u]:_e[u]="on"+u}function Ve(u,m){if(u.da)u=!0;else{m=new Q(m,this);var w=u.listener,O=u.ha||u.src;u.fa&&xe(u),u=w.call(O,m)}return u}function Je(u){return u=u[Xe],u instanceof Re?u:null}var at="__closure_events_fn_"+(1e9*Math.random()>>>0);function ht(u){return typeof u=="function"?u:(u[at]||(u[at]=function(m){return u.handleEvent(m)}),u[at])}function Qe(){C.call(this),this.i=new Re(this),this.M=this,this.F=null}M(Qe,C),Qe.prototype[ue]=!0,Qe.prototype.removeEventListener=function(u,m,w,O){Ce(this,u,m,w,O)};function rt(u,m){var w,O=u.F;if(O)for(w=[];O;O=O.F)w.push(O);if(u=u.M,O=m.type||m,typeof m=="string")m=new z(m,u);else if(m instanceof z)m.target=m.target||u;else{var ee=m;m=new z(O,u),j(m,ee)}if(ee=!0,w)for(var ce=w.length-1;0<=ce;ce--){var Le=m.g=w[ce];ee=St(Le,O,!0,m)&&ee}if(Le=m.g=u,ee=St(Le,O,!0,m)&&ee,ee=St(Le,O,!1,m)&&ee,w)for(ce=0;ce<w.length;ce++)Le=m.g=w[ce],ee=St(Le,O,!1,m)&&ee}Qe.prototype.N=function(){if(Qe.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var w=u.g[m],O=0;O<w.length;O++)ke(w[O]);delete u.g[m],u.h--}}this.F=null},Qe.prototype.K=function(u,m,w,O){return this.i.add(String(u),m,!1,w,O)},Qe.prototype.L=function(u,m,w,O){return this.i.add(String(u),m,!0,w,O)};function St(u,m,w,O){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var ee=!0,ce=0;ce<m.length;++ce){var Le=m[ce];if(Le&&!Le.da&&Le.capture==w){var ft=Le.listener,wt=Le.ha||Le.src;Le.fa&&Fe(u.i,Le),ee=ft.call(wt,O)!==!1&&ee}}return ee&&!O.defaultPrevented}function tt(u,m,w){if(typeof u=="function")w&&(u=b(u,w));else if(u&&typeof u.handleEvent=="function")u=b(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(u,m||0)}function vt(u){u.g=tt(()=>{u.g=null,u.i&&(u.i=!1,vt(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Be extends C{constructor(m,w){super(),this.m=m,this.l=w,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:vt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xt(u){C.call(this),this.h=u,this.g={}}M(Xt,C);var Et=[];function rr(u){we(u.g,function(m,w){this.g.hasOwnProperty(w)&&xe(m)},u),u.g={}}Xt.prototype.N=function(){Xt.aa.N.call(this),rr(this)},Xt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Lt=a.JSON.stringify,qt=a.JSON.parse,Nr=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function It(){}It.prototype.h=null;function ui(u){return u.h||(u.h=u.i())}function Wt(){}var Ln={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gr(){z.call(this,"d")}M(gr,z);function zt(){z.call(this,"c")}M(zt,z);var Ze={},Nt=null;function Pr(){return Nt=Nt||new Qe}Ze.La="serverreachability";function fn(u){z.call(this,Ze.La,u)}M(fn,z);function Mn(u){const m=Pr();rt(m,new fn(m))}Ze.STAT_EVENT="statevent";function mr(u,m){z.call(this,Ze.STAT_EVENT,u),this.stat=m}M(mr,z);function He(u){const m=Pr();rt(m,new mr(m,u))}Ze.Ma="timingevent";function ir(u,m){z.call(this,Ze.Ma,u),this.size=m}M(ir,z);function Vn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},m)}function dn(){this.g=!0}dn.prototype.xa=function(){this.g=!1};function rn(u,m,w,O,ee,ce){u.info(function(){if(u.g)if(ce)for(var Le="",ft=ce.split("&"),wt=0;wt<ft.length;wt++){var dt=ft[wt].split("=");if(1<dt.length){var kt=dt[0];dt=dt[1];var Ut=kt.split("_");Le=2<=Ut.length&&Ut[1]=="type"?Le+(kt+"="+dt+"&"):Le+(kt+"=redacted&")}}else Le=null;else Le=ce;return"XMLHTTP REQ ("+O+") [attempt "+ee+"]: "+m+`
`+w+`
`+Le})}function Zt(u,m,w,O,ee,ce,Le){u.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+ee+"]: "+m+`
`+w+`
`+ce+" "+Le})}function pn(u,m,w,O){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Vr(u,w)+(O?" "+O:"")})}function ls(u,m){u.info(function(){return"TIMEOUT: "+m})}dn.prototype.info=function(){};function Vr(u,m){if(!u.g)return m;if(!m)return null;try{var w=JSON.parse(m);if(w){for(u=0;u<w.length;u++)if(Array.isArray(w[u])){var O=w[u];if(!(2>O.length)){var ee=O[1];if(Array.isArray(ee)&&!(1>ee.length)){var ce=ee[0];if(ce!="noop"&&ce!="stop"&&ce!="close")for(var Le=1;Le<ee.length;Le++)ee[Le]=""}}}}return Lt(w)}catch{return m}}var Un={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yn;function Xn(){}M(Xn,It),Xn.prototype.g=function(){return new XMLHttpRequest},Xn.prototype.i=function(){return{}},Yn=new Xn;function sn(u,m,w,O){this.j=u,this.i=m,this.l=w,this.R=O||1,this.U=new Xt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vr}function vr(){this.i=null,this.g="",this.h=!1}var li={},hi={};function fi(u,m,w){u.L=1,u.v=qi(Zn(m)),u.m=w,u.P=!0,Mi(u,null)}function Mi(u,m){u.F=Date.now(),hs(u),u.A=Zn(u.v);var w=u.A,O=u.R;Array.isArray(O)||(O=[String(O)]),ct(w.i,"t",O),u.C=0,w=u.j.J,u.h=new vr,u.g=T(u.j,w?m:null,!u.m),0<u.O&&(u.M=new Be(b(u.Y,u,u.g),u.O)),m=u.U,w=u.g,O=u.ca;var ee="readystatechange";Array.isArray(ee)||(ee&&(Et[0]=ee.toString()),ee=Et);for(var ce=0;ce<ee.length;ce++){var Le=H(w,ee[ce],O||m.handleEvent,!1,m.h||m);if(!Le)break;m.g[Le.key]=Le}m=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Mn(),rn(u.i,u.u,u.A,u.l,u.R,u.m)}sn.prototype.ca=function(u){u=u.target;const m=this.M;m&&wn(u)==3?m.j():this.Y(u)},sn.prototype.Y=function(u){try{if(u==this.g)e:{const Ut=wn(this.g);var m=this.g.Ba();const Wr=this.g.Z();if(!(3>Ut)&&(Ut!=3||this.g&&(this.h.h||this.g.oa()||fa(this.g)))){this.J||Ut!=4||m==7||(m==8||0>=Wr?Mn(3):Mn(2)),di(this);var w=this.g.Z();this.X=w;t:if(Vi(this)){var O=fa(this.g);u="";var ee=O.length,ce=wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ur(this),pi(this);var Le="";break t}this.h.i=new a.TextDecoder}for(m=0;m<ee;m++)this.h.h=!0,u+=this.h.i.decode(O[m],{stream:!(ce&&m==ee-1)});O.length=0,this.h.g+=u,this.C=0,Le=this.h.g}else Le=this.g.oa();if(this.o=w==200,Zt(this.i,this.u,this.A,this.l,this.R,Ut,w),this.o){if(this.T&&!this.K){t:{if(this.g){var ft,wt=this.g;if((ft=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(ft)){var dt=ft;break t}}dt=null}if(w=dt)pn(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ui(this,w);else{this.o=!1,this.s=3,He(12),Ur(this),pi(this);break e}}if(this.P){w=!0;let Cn;for(;!this.J&&this.C<Le.length;)if(Cn=ra(this,Le),Cn==hi){Ut==4&&(this.s=4,He(14),w=!1),pn(this.i,this.l,null,"[Incomplete Response]");break}else if(Cn==li){this.s=4,He(15),pn(this.i,this.l,Le,"[Invalid Chunk]"),w=!1;break}else pn(this.i,this.l,Cn,null),Ui(this,Cn);if(Vi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||Le.length!=0||this.h.h||(this.s=1,He(16),w=!1),this.o=this.o&&w,!w)pn(this.i,this.l,Le,"[Invalid Chunked Response]"),Ur(this),pi(this);else if(0<Le.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+Le.length),Ts(kt),kt.M=!0,He(11))}}else pn(this.i,this.l,Le,null),Ui(this,Le);Ut==4&&Ur(this),this.o&&!this.J&&(Ut==4?_i(this.j,this):(this.o=!1,hs(this)))}else vi(this.g),w==400&&0<Le.indexOf("Unknown SID")?(this.s=3,He(12)):(this.s=0,He(13)),Ur(this),pi(this)}}}catch{}finally{}};function Vi(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ra(u,m){var w=u.C,O=m.indexOf(`
`,w);return O==-1?hi:(w=Number(m.substring(w,O)),isNaN(w)?li:(O+=1,O+w>m.length?hi:(m=m.slice(O,O+w),u.C=O+w,m)))}sn.prototype.cancel=function(){this.J=!0,Ur(this)};function hs(u){u.S=Date.now()+u.I,ia(u,u.I)}function ia(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Vn(b(u.ba,u),m)}function di(u){u.B&&(a.clearTimeout(u.B),u.B=null)}sn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ls(this.i,this.A),this.L!=2&&(Mn(),He(17)),Ur(this),this.s=2,pi(this)):ia(this,this.S-u)};function pi(u){u.j.G==0||u.J||_i(u.j,u)}function Ur(u){di(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,rr(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Ui(u,m){try{var w=u.j;if(w.G!=0&&(w.g==u||vo(w.h,u))){if(!u.K&&vo(w.h,u)&&w.G==3){try{var O=w.Da.g.parse(m)}catch{O=null}if(Array.isArray(O)&&O.length==3){var ee=O;if(ee[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<u.F)Hr(w),bs(w);else break e;Gi(w),He(18)}}else w.za=ee[1],0<w.za-w.T&&37500>ee[2]&&w.F&&w.v==0&&!w.C&&(w.C=Vn(b(w.Za,w),6e3));if(1>=ji(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else jn(w,11)}else if((u.K||w.g==u)&&Hr(w),!B(m))for(ee=w.Da.g.parse(m),m=0;m<ee.length;m++){let dt=ee[m];if(w.T=dt[0],dt=dt[1],w.G==2)if(dt[0]=="c"){w.K=dt[1],w.ia=dt[2];const kt=dt[3];kt!=null&&(w.la=kt,w.j.info("VER="+w.la));const Ut=dt[4];Ut!=null&&(w.Aa=Ut,w.j.info("SVER="+w.Aa));const Wr=dt[5];Wr!=null&&typeof Wr=="number"&&0<Wr&&(O=1.5*Wr,w.L=O,w.j.info("backChannelRequestTimeoutMs_="+O)),O=w;const Cn=u.g;if(Cn){const wi=Cn.g?Cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wi){var ce=O.h;ce.g||wi.indexOf("spdy")==-1&&wi.indexOf("quic")==-1&&wi.indexOf("h2")==-1||(ce.j=ce.l,ce.g=new Set,ce.h&&(Gt(ce,ce.h),ce.h=null))}if(O.D){const bi=Cn.g?Cn.g.getResponseHeader("X-HTTP-Session-Id"):null;bi&&(O.ya=bi,Ot(O.I,O.D,bi))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-u.F,w.j.info("Handshake RTT: "+w.R+"ms")),O=w;var Le=u;if(O.qa=d(O,O.J?O.ia:null,O.W),Le.K){yo(O.h,Le);var ft=Le,wt=O.L;wt&&(ft.I=wt),ft.B&&(di(ft),hs(ft)),O.g=Le}else Is(O);0<w.i.length&&As(w)}else dt[0]!="stop"&&dt[0]!="close"||jn(w,7);else w.G==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?jn(w,7):$r(w):dt[0]!="noop"&&w.l&&w.l.ta(dt),w.v=0)}}Mn(4)}catch{}}var hc=class{constructor(u,m){this.g=u,this.map=m}};function mo(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ji(u){return u.h?1:u.g?u.g.size:0}function vo(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Gt(u,m){u.g?u.g.add(m):u.h=m}function yo(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}mo.prototype.cancel=function(){if(this.i=_o(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function _o(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const w of u.g.values())m=m.concat(w.D);return m}return x(u.i)}function oa(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var m=[],w=u.length,O=0;O<w;O++)m.push(u[O]);return m}m=[],w=0;for(O in u)m[w++]=u[O];return m}function wo(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var m=[];u=u.length;for(var w=0;w<u;w++)m.push(w);return m}m=[],w=0;for(const O in u)m[w++]=O;return m}}}function aa(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var w=wo(u),O=oa(u),ee=O.length,ce=0;ce<ee;ce++)m.call(void 0,O[ce],w&&w[ce],u)}var or=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fs(u,m){if(u){u=u.split("&");for(var w=0;w<u.length;w++){var O=u[w].indexOf("="),ee=null;if(0<=O){var ce=u[w].substring(0,O);ee=u[w].substring(O+1)}else ce=u[w];m(ce,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}function en(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof en){this.h=u.h,Bi(this,u.j),this.o=u.o,this.g=u.g,ds(this,u.s),this.l=u.l;var m=u.i,w=new gi;w.i=m.i,m.g&&(w.g=new Map(m.g),w.h=m.h),bo(this,w),this.m=u.m}else u&&(m=String(u).match(or))?(this.h=!1,Bi(this,m[1]||"",!0),this.o=zi(m[2]||""),this.g=zi(m[3]||"",!0),ds(this,m[4]),this.l=zi(m[5]||"",!0),bo(this,m[6]||"",!0),this.m=zi(m[7]||"")):(this.h=!1,this.i=new gi(null,this.h))}en.prototype.toString=function(){var u=[],m=this.j;m&&u.push(jr(m,ca,!0),":");var w=this.g;return(w||m=="file")&&(u.push("//"),(m=this.o)&&u.push(jr(m,ca,!0),"@"),u.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&u.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&u.push("/"),u.push(jr(w,w.charAt(0)=="/"?Br:dc,!0))),(w=this.i.toString())&&u.push("?",w),(w=this.m)&&u.push("#",jr(w,gs)),u.join("")};function Zn(u){return new en(u)}function Bi(u,m,w){u.j=w?zi(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function ds(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function bo(u,m,w){m instanceof gi?(u.i=m,pc(u.i,u.h)):(w||(m=jr(m,ps)),u.i=new gi(m,u.h))}function Ot(u,m,w){u.i.set(m,w)}function qi(u){return Ot(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function zi(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function jr(u,m,w){return typeof u=="string"?(u=encodeURI(u).replace(m,fc),w&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function fc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ca=/[#\/\?@]/g,dc=/[#\?:]/g,Br=/[#\?]/g,ps=/[#\?@]/g,gs=/#/g;function gi(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Kt(u){u.g||(u.g=new Map,u.h=0,u.i&&fs(u.i,function(m,w){u.add(decodeURIComponent(m.replace(/\+/g," ")),w)}))}n=gi.prototype,n.add=function(u,m){Kt(this),this.i=null,u=mi(this,u);var w=this.g.get(u);return w||this.g.set(u,w=[]),w.push(m),this.h+=1,this};function ua(u,m){Kt(u),m=mi(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Ao(u,m){return Kt(u),m=mi(u,m),u.g.has(m)}n.forEach=function(u,m){Kt(this),this.g.forEach(function(w,O){w.forEach(function(ee){u.call(m,ee,O,this)},this)},this)},n.na=function(){Kt(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),w=[];for(let O=0;O<m.length;O++){const ee=u[O];for(let ce=0;ce<ee.length;ce++)w.push(m[O])}return w},n.V=function(u){Kt(this);let m=[];if(typeof u=="string")Ao(this,u)&&(m=m.concat(this.g.get(mi(this,u))));else{u=Array.from(this.g.values());for(let w=0;w<u.length;w++)m=m.concat(u[w])}return m},n.set=function(u,m){return Kt(this),this.i=null,u=mi(this,u),Ao(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},n.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function ct(u,m,w){ua(u,m),0<w.length&&(u.i=null,u.g.set(mi(u,m),x(w)),u.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var w=0;w<m.length;w++){var O=m[w];const ce=encodeURIComponent(String(O)),Le=this.V(O);for(O=0;O<Le.length;O++){var ee=ce;Le[O]!==""&&(ee+="="+encodeURIComponent(String(Le[O]))),u.push(ee)}}return this.i=u.join("&")};function mi(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function pc(u,m){m&&!u.j&&(Kt(u),u.i=null,u.g.forEach(function(w,O){var ee=O.toLowerCase();O!=ee&&(ua(this,O),ct(this,ee,w))},u)),u.j=m}function Lr(u,m){const w=new dn;if(a.Image){const O=new Image;O.onload=v(yr,w,"TestLoadImage: loaded",!0,m,O),O.onerror=v(yr,w,"TestLoadImage: error",!1,m,O),O.onabort=v(yr,w,"TestLoadImage: abort",!1,m,O),O.ontimeout=v(yr,w,"TestLoadImage: timeout",!1,m,O),a.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=u}else m(!1)}function la(u,m){const w=new dn,O=new AbortController,ee=setTimeout(()=>{O.abort(),yr(w,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:O.signal}).then(ce=>{clearTimeout(ee),ce.ok?yr(w,"TestPingServer: ok",!0,m):yr(w,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(ee),yr(w,"TestPingServer: error",!1,m)})}function yr(u,m,w,O,ee){try{ee&&(ee.onload=null,ee.onerror=null,ee.onabort=null,ee.ontimeout=null),O(w)}catch{}}function ms(){this.g=new Nr}function Eo(u,m,w){const O=w||"";try{aa(u,function(ee,ce){let Le=ee;f(ee)&&(Le=Lt(ee)),m.push(O+ce+"="+encodeURIComponent(Le))})}catch(ee){throw m.push(O+"type="+encodeURIComponent("_badmap")),ee}}function vs(u){this.l=u.Ub||null,this.j=u.eb||!1}M(vs,It),vs.prototype.g=function(){return new ys(this.l,this.j)},vs.prototype.i=function(u){return function(){return u}}({});function ys(u,m){Qe.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(ys,Qe),n=ys.prototype,n.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,_r(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qr(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,_r(this)),this.g&&(this.readyState=3,_r(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ha(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ha(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?qr(this):_r(this),this.readyState==3&&ha(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,qr(this))},n.Qa=function(u){this.g&&(this.response=u,qr(this))},n.ga=function(){this.g&&qr(this)};function qr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,_r(u)}n.setRequestHeader=function(u,m){this.u.append(u,m)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var w=m.next();!w.done;)w=w.value,u.push(w[0]+": "+w[1]),w=m.next();return u.join(`\r
`)};function _r(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ys.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function zr(u){let m="";return we(u,function(w,O){m+=O,m+=":",m+=w,m+=`\r
`}),m}function Io(u,m,w){e:{for(O in w){var O=!1;break e}O=!0}O||(w=zr(w),typeof u=="string"?w!=null&&encodeURIComponent(String(w)):Ot(u,m,w))}function Ct(u){Qe.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(Ct,Qe);var To=/^https?$/i,_s=["POST","PUT"];n=Ct.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,m,w,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yn.g(),this.v=this.o?ui(this.o):ui(Yn),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(ce){So(this,ce);return}if(u=w||"",w=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var ee in O)w.set(ee,O[ee]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const ce of O.keys())w.set(ce,O.get(ce));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(w.keys()).find(ce=>ce.toLowerCase()=="content-type"),ee=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(_s,m,void 0))||O||ee||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ce,Le]of w)this.g.setRequestHeader(ce,Le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wr(this),this.u=!0,this.g.send(u),this.u=!1}catch(ce){So(this,ce)}};function So(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,No(u),$i(u)}function No(u){u.A||(u.A=!0,rt(u,"complete"),rt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,rt(this,"complete"),rt(this,"abort"),$i(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$i(this,!0)),Ct.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Po(this):this.bb())},n.bb=function(){Po(this)};function Po(u){if(u.h&&typeof o<"u"&&(!u.v[1]||wn(u)!=4||u.Z()!=2)){if(u.u&&wn(u)==4)tt(u.Ea,0,u);else if(rt(u,"readystatechange"),wn(u)==4){u.h=!1;try{const Le=u.Z();e:switch(Le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var w;if(!(w=m)){var O;if(O=Le===0){var ee=String(u.D).match(or)[1]||null;!ee&&a.self&&a.self.location&&(ee=a.self.location.protocol.slice(0,-1)),O=!To.test(ee?ee.toLowerCase():"")}w=O}if(w)rt(u,"complete"),rt(u,"success");else{u.m=6;try{var ce=2<wn(u)?u.g.statusText:""}catch{ce=""}u.l=ce+" ["+u.Z()+"]",No(u)}}finally{$i(u)}}}}function $i(u,m){if(u.g){wr(u);const w=u.g,O=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||rt(u,"ready");try{w.onreadystatechange=O}catch{}}}function wr(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function wn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<wn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),qt(m)}};function fa(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function vi(u){const m={};u=(u.g&&2<=wn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<u.length;O++){if(B(u[O]))continue;var w=A(u[O]);const ee=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const ce=m[ee]||[];m[ee]=ce,ce.push(w)}U(m,function(O){return O.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rn(u,m,w){return w&&w.internalChannelParams&&w.internalChannelParams[u]||m}function ws(u){this.Aa=0,this.i=[],this.j=new dn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Rn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Rn("baseRetryDelayMs",5e3,u),this.cb=Rn("retryDelaySeedMs",1e4,u),this.Wa=Rn("forwardChannelMaxRetries",2,u),this.wa=Rn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new mo(u&&u.concurrentRequestLimit),this.Da=new ms,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ws.prototype,n.la=8,n.G=1,n.connect=function(u,m,w,O){He(0),this.W=u,this.H=m||{},w&&O!==void 0&&(this.H.OSID=w,this.H.OAID=O),this.F=this.X,this.I=d(this,null,this.W),As(this)};function $r(u){if(Hi(u),u.G==3){var m=u.U++,w=Zn(u.I);if(Ot(w,"SID",u.K),Ot(w,"RID",m),Ot(w,"TYPE","terminate"),yi(u,w),m=new sn(u,u.j,m),m.L=2,m.v=qi(Zn(w)),w=!1,a.navigator&&a.navigator.sendBeacon)try{w=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!w&&a.Image&&(new Image().src=m.v,w=!0),w||(m.g=T(m.j,null),m.g.ea(m.v)),m.F=Date.now(),hs(m)}Ns(u)}function bs(u){u.g&&(Ts(u),u.g.cancel(),u.g=null)}function Hi(u){bs(u),u.u&&(a.clearTimeout(u.u),u.u=null),Hr(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function As(u){if(!sa(u.h)&&!u.s){u.s=!0;var m=u.Ga;ge||be(),se||(ge(),se=!0),me.add(m,u),u.B=0}}function Lo(u,m){return ji(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Vn(b(u.Ga,u,m),Ss(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const ee=new sn(this,this.j,u);let ce=this.o;if(this.S&&(ce?(ce=I(ce),j(ce,this.S)):ce=this.S),this.m!==null||this.O||(ee.H=ce,ce=null),this.P)e:{for(var m=0,w=0;w<this.i.length;w++){t:{var O=this.i[w];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(m+=O,4096<m){m=w;break e}if(m===4096||w===this.i.length-1){m=w+1;break e}}m=1e3}else m=1e3;m=Wi(this,ee,m),w=Zn(this.I),Ot(w,"RID",u),Ot(w,"CVER",22),this.D&&Ot(w,"X-HTTP-Session-Id",this.D),yi(this,w),ce&&(this.O?m="headers="+encodeURIComponent(String(zr(ce)))+"&"+m:this.m&&Io(w,this.m,ce)),Gt(this.h,ee),this.Ua&&Ot(w,"TYPE","init"),this.P?(Ot(w,"$req",m),Ot(w,"SID","null"),ee.T=!0,fi(ee,w,null)):fi(ee,w,m),this.G=2}}else this.G==3&&(u?Es(this,u):this.i.length==0||sa(this.h)||Es(this))};function Es(u,m){var w;m?w=m.l:w=u.U++;const O=Zn(u.I);Ot(O,"SID",u.K),Ot(O,"RID",w),Ot(O,"AID",u.T),yi(u,O),u.m&&u.o&&Io(O,u.m,u.o),w=new sn(u,u.j,w,u.B+1),u.m===null&&(w.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Wi(u,w,1e3),w.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Gt(u.h,w),fi(w,O,m)}function yi(u,m){u.H&&we(u.H,function(w,O){Ot(m,O,w)}),u.l&&aa({},function(w,O){Ot(m,O,w)})}function Wi(u,m,w){w=Math.min(u.i.length,w);var O=u.l?b(u.l.Na,u.l,u):null;e:{var ee=u.i;let ce=-1;for(;;){const Le=["count="+w];ce==-1?0<w?(ce=ee[0].g,Le.push("ofs="+ce)):ce=0:Le.push("ofs="+ce);let ft=!0;for(let wt=0;wt<w;wt++){let dt=ee[wt].g;const kt=ee[wt].map;if(dt-=ce,0>dt)ce=Math.max(0,ee[wt].g-100),ft=!1;else try{Eo(kt,Le,"req"+dt+"_")}catch{O&&O(kt)}}if(ft){O=Le.join("&");break e}}}return u=u.i.splice(0,w),m.D=u,O}function Is(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;ge||be(),se||(ge(),se=!0),me.add(m,u),u.v=0}}function Gi(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Vn(b(u.Fa,u),Ss(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,da(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Vn(b(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,He(10),bs(this),da(this))};function Ts(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function da(u){u.g=new sn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=Zn(u.qa);Ot(m,"RID","rpc"),Ot(m,"SID",u.K),Ot(m,"AID",u.T),Ot(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ot(m,"TO",u.ja),Ot(m,"TYPE","xmlhttp"),yi(u,m),u.m&&u.o&&Io(m,u.m,u.o),u.L&&(u.g.I=u.L);var w=u.g;u=u.ia,w.L=1,w.v=qi(Zn(m)),w.m=null,w.P=!0,Mi(w,u)}n.Za=function(){this.C!=null&&(this.C=null,bs(this),Gi(this),He(19))};function Hr(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function _i(u,m){var w=null;if(u.g==m){Hr(u),Ts(u),u.g=null;var O=2}else if(vo(u.h,m))w=m.D,yo(u.h,m),O=1;else return;if(u.G!=0){if(m.o)if(O==1){w=m.m?m.m.length:0,m=Date.now()-m.F;var ee=u.B;O=Pr(),rt(O,new ir(O,w)),As(u)}else Is(u);else if(ee=m.s,ee==3||ee==0&&0<m.X||!(O==1&&Lo(u,m)||O==2&&Gi(u)))switch(w&&0<w.length&&(m=u.h,m.i=m.i.concat(w)),ee){case 1:jn(u,5);break;case 4:jn(u,10);break;case 3:jn(u,6);break;default:jn(u,2)}}}function Ss(u,m){let w=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(w*=2),w*m}function jn(u,m){if(u.j.info("Error code "+m),m==2){var w=b(u.fb,u),O=u.Xa;const ee=!O;O=new en(O||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Bi(O,"https"),qi(O),ee?Lr(O.toString(),w):la(O.toString(),w)}else He(2);u.G=0,u.l&&u.l.sa(m),Ns(u),Hi(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),He(2)):(this.j.info("Failed to ping google.com"),He(1))};function Ns(u){if(u.G=0,u.ka=[],u.l){const m=_o(u.h);(m.length!=0||u.i.length!=0)&&(F(u.ka,m),F(u.ka,u.i),u.h.i.length=0,x(u.i),u.i.length=0),u.l.ra()}}function d(u,m,w){var O=w instanceof en?Zn(w):new en(w);if(O.g!="")m&&(O.g=m+"."+O.g),ds(O,O.s);else{var ee=a.location;O=ee.protocol,m=m?m+"."+ee.hostname:ee.hostname,ee=+ee.port;var ce=new en(null);O&&Bi(ce,O),m&&(ce.g=m),ee&&ds(ce,ee),w&&(ce.l=w),O=ce}return w=u.D,m=u.ya,w&&m&&Ot(O,w,m),Ot(O,"VER",u.la),yi(u,O),O}function T(u,m,w){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Ct(new vs({eb:w})):new Ct(u.pa),m.Ha(u.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function $(){}n=$.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function J(){}J.prototype.g=function(u,m){return new te(u,m)};function te(u,m){Qe.call(this),this.g=new ws(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!B(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!B(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Me(this)}M(te,Qe),te.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},te.prototype.close=function(){$r(this.g)},te.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var w={};w.__data__=u,u=w}else this.u&&(w={},w.__data__=Lt(u),u=w);m.i.push(new hc(m.Ya++,u)),m.G==3&&As(m)},te.prototype.N=function(){this.g.l=null,delete this.j,$r(this.g),delete this.g,te.aa.N.call(this)};function ye(u){gr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const w in m){u=w;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}M(ye,gr);function Pe(){zt.call(this),this.status=1}M(Pe,zt);function Me(u){this.g=u}M(Me,$),Me.prototype.ua=function(){rt(this.g,"a")},Me.prototype.ta=function(u){rt(this.g,new ye(u))},Me.prototype.sa=function(u){rt(this.g,new Pe)},Me.prototype.ra=function(){rt(this.g,"b")},J.prototype.createWebChannel=J.prototype.g,te.prototype.send=te.prototype.o,te.prototype.open=te.prototype.m,te.prototype.close=te.prototype.close,p2=function(){return new J},d2=function(){return Pr()},f2=Ze,Ef={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Un.NO_ERROR=0,Un.TIMEOUT=8,Un.HTTP_ERROR=6,tl=Un,sr.COMPLETE="complete",h2=sr,Wt.EventType=Ln,Ln.OPEN="a",Ln.CLOSE="b",Ln.ERROR="c",Ln.MESSAGE="d",Qe.prototype.listen=Qe.prototype.K,xc=Wt,Ct.prototype.listenOnce=Ct.prototype.L,Ct.prototype.getLastError=Ct.prototype.Ka,Ct.prototype.getLastErrorCode=Ct.prototype.Ba,Ct.prototype.getStatus=Ct.prototype.Z,Ct.prototype.getResponseJson=Ct.prototype.Oa,Ct.prototype.getResponseText=Ct.prototype.oa,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Ha,l2=Ct}).apply(typeof Uu<"u"?Uu:typeof self<"u"?self:typeof window<"u"?window:{});const wg="@firebase/firestore",bg="4.7.11";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wn.UNAUTHENTICATED=new Wn(null),Wn.GOOGLE_CREDENTIALS=new Wn("google-credentials-uid"),Wn.FIRST_PARTY=new Wn("first-party-uid"),Wn.MOCK_USER=new Wn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ic="11.6.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=new zl("@firebase/firestore");function La(){return Ho.logLevel}function $e(n,...e){if(Ho.logLevel<=_t.DEBUG){const t=e.map(md);Ho.debug(`Firestore (${ic}): ${n}`,...t)}}function as(n,...e){if(Ho.logLevel<=_t.ERROR){const t=e.map(md);Ho.error(`Firestore (${ic}): ${n}`,...t)}}function Ja(n,...e){if(Ho.logLevel<=_t.WARN){const t=e.map(md);Ho.warn(`Firestore (${ic}): ${n}`,...t)}}function md(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,g2(n,r,t)}function g2(n,e,t){let r=`FIRESTORE (${ic}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw as(r),new Error(r)}function xt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||g2(e,i,r)}function gt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class We extends oi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Bb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wn.UNAUTHENTICATED))}shutdown(){}}class qb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class zb{constructor(e){this.t=e,this.currentUser=Wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){xt(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new is;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new is,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new is)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xt(typeof r.accessToken=="string",31837,{l:r}),new m2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xt(e===null||typeof e=="string",2055,{h:e}),new Wn(e)}}class $b{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Wn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Hb{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new $b(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Wn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ag{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Wb{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){xt(this.o===void 0,3512);const r=s=>{s.error!=null&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,$e("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ag(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ag(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Gb(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function yt(n,e){return n<e?-1:n>e?1:0}function If(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return yt(r,i);{const s=v2(),o=Kb(s.encode(Eg(n,t)),s.encode(Eg(e,t)));return o!==0?o:yt(r,i)}}t+=r>65535?2:1}return yt(n.length,e.length)}function Eg(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Kb(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return yt(n[t],e[t]);return yt(n.length,e.length)}function Qa(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig=-62135596800,Tg=1e6;class An{static now(){return An.fromMillis(Date.now())}static fromDate(e){return An.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Tg);return new An(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new We(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new We(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ig)throw new We(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new We(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Tg}_compareTo(e){return this.seconds===e.seconds?yt(this.nanoseconds,e.nanoseconds):yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Ig;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{static fromTimestamp(e){return new lt(e)}static min(){return new lt(new An(0,0))}static max(){return new lt(new An(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg="__name__";class Ii{constructor(e,t,r){t===void 0?t=0:t>e.length&&ot(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ot(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ii.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ii?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=Ii.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return yt(e.length,t.length)}static compareSegments(e,t){const r=Ii.isNumericId(e),i=Ii.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Ii.extractNumericId(e).compare(Ii.extractNumericId(t)):If(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zs.fromString(e.substring(4,e.length-2))}}class Jt extends Ii{construct(e,t,r){return new Jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new We(Se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const Jb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dn extends Ii{construct(e,t,r){return new Dn(e,t,r)}static isValidIdentifier(e){return Jb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Sg}static keyField(){return new Dn([Sg])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new We(Se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new We(Se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new We(Se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new We(Se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dn(t)}static emptyPath(){return new Dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.path=e}static fromPath(e){return new Ye(Jt.fromString(e))}static fromName(e){return new Ye(Jt.fromString(e).popFirst(5))}static empty(){return new Ye(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Jt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ye(new Jt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc=-1;function Qb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=lt.fromTimestamp(r===1e9?new An(t+1,0):new An(t,r));return new to(i,Ye.empty(),e)}function Yb(n){return new to(n.readTime,n.key,Jc)}class to{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new to(lt.min(),Ye.empty(),Jc)}static max(){return new to(lt.max(),Ye.empty(),Jc)}}function Xb(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ye.comparator(n.documentKey,e.documentKey),t!==0?t:yt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sc(n){if(n.code!==Se.FAILED_PRECONDITION||n.message!==Zb)throw n;$e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ot(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Te((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Te?t:Te.resolve(t)}catch(t){return Te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.reject(t)}static resolve(e){return new Te((t,r)=>{t(e)})}static reject(e){return new Te((t,r)=>{r(e)})}static waitFor(e){return new Te((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=Te.resolve(!1);for(const r of e)t=t.next(i=>i?Te.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new Te((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const f=l;t(e[f]).next(g=>{o[f]=g,++a,a===s&&r(o)},g=>i(g))}})}static doWhile(e,t){return new Te((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}function tA(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function oc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Jl.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd=-1;function Ql(n){return n==null}function bl(n){return n===0&&1/n==-1/0}function nA(n){return typeof n=="number"&&Number.isInteger(n)&&!bl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2="";function rA(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ng(e)),e=iA(n.get(t),e);return Ng(e)}function iA(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case _2:t+="";break;default:t+=s}}return t}function Ng(n){return n+_2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function go(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function w2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,t){this.comparator=e,this.root=t||On.EMPTY}insert(e,t){return new Yt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,On.BLACK,null,null))}remove(e){return new Yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,On.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ju(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ju(this.root,e,this.comparator,!1)}getReverseIterator(){return new ju(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ju(this.root,e,this.comparator,!0)}}class ju{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class On{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??On.RED,this.left=i??On.EMPTY,this.right=s??On.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new On(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return On.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return On.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,On.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,On.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ot(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ot(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ot(27949);return e+(this.isRed()?0:1)}}On.EMPTY=null,On.RED=!0,On.BLACK=!1;On.EMPTY=new class{constructor(){this.size=0}get key(){throw ot(57766)}get value(){throw ot(16141)}get color(){throw ot(16727)}get left(){throw ot(29726)}get right(){throw ot(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new On(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.comparator=e,this.data=new Yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Lg(this.data.getIterator())}getIteratorFrom(e){return new Lg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof En)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new En(this.comparator);return t.data=e,t}}class Lg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this.fields=e,e.sort(Dn.comparator)}static empty(){return new ti([])}unionWith(e){let t=new En(Dn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ti(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qa(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new b2("Invalid base64 string: "+s):s}}(e);return new Fn(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Fn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fn.EMPTY_BYTE_STRING=new Fn("");const sA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function no(n){if(xt(!!n,39018),typeof n=="string"){let e=0;const t=sA.exec(n);if(xt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:cn(n.seconds),nanos:cn(n.nanos)}}function cn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ro(n){return typeof n=="string"?Fn.fromBase64String(n):Fn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2="server_timestamp",E2="__type__",I2="__previous_value__",T2="__local_write_time__";function yd(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[E2])===null||t===void 0?void 0:t.stringValue)===A2}function Yl(n){const e=n.mapValue.fields[I2];return yd(e)?Yl(e):e}function Qc(n){const e=no(n.mapValue.fields[T2].timestampValue);return new An(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,t,r,i,s,o,a,l,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=f}}const Al="(default)";class Yc{constructor(e,t){this.projectId=e,this.database=t||Al}static empty(){return new Yc("","")}get isDefaultDatabase(){return this.database===Al}isEqual(e){return e instanceof Yc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2="__type__",aA="__max__",Bu={mapValue:{}},N2="__vector__",El="value";function io(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?yd(n)?4:uA(n)?9007199254740991:cA(n)?10:11:ot(28295,{value:n})}function xi(n,e){if(n===e)return!0;const t=io(n);if(t!==io(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Qc(n).isEqual(Qc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=no(i.timestampValue),a=no(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return ro(i.bytesValue).isEqual(ro(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return cn(i.geoPointValue.latitude)===cn(s.geoPointValue.latitude)&&cn(i.geoPointValue.longitude)===cn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return cn(i.integerValue)===cn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=cn(i.doubleValue),a=cn(s.doubleValue);return o===a?bl(o)===bl(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Qa(n.arrayValue.values||[],e.arrayValue.values||[],xi);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Pg(o)!==Pg(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!xi(o[l],a[l])))return!1;return!0}(n,e);default:return ot(52216,{left:n})}}function Xc(n,e){return(n.values||[]).find(t=>xi(t,e))!==void 0}function Ya(n,e){if(n===e)return 0;const t=io(n),r=io(e);if(t!==r)return yt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return yt(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=cn(s.integerValue||s.doubleValue),l=cn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return Rg(n.timestampValue,e.timestampValue);case 4:return Rg(Qc(n),Qc(e));case 5:return If(n.stringValue,e.stringValue);case 6:return function(s,o){const a=ro(s),l=ro(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let f=0;f<a.length&&f<l.length;f++){const g=yt(a[f],l[f]);if(g!==0)return g}return yt(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=yt(cn(s.latitude),cn(o.latitude));return a!==0?a:yt(cn(s.longitude),cn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Cg(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,f,g;const y=s.fields||{},b=o.fields||{},v=(a=y[El])===null||a===void 0?void 0:a.arrayValue,M=(l=b[El])===null||l===void 0?void 0:l.arrayValue,x=yt(((f=v==null?void 0:v.values)===null||f===void 0?void 0:f.length)||0,((g=M==null?void 0:M.values)===null||g===void 0?void 0:g.length)||0);return x!==0?x:Cg(v,M)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Bu.mapValue&&o===Bu.mapValue)return 0;if(s===Bu.mapValue)return 1;if(o===Bu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),f=o.fields||{},g=Object.keys(f);l.sort(),g.sort();for(let y=0;y<l.length&&y<g.length;++y){const b=If(l[y],g[y]);if(b!==0)return b;const v=Ya(a[l[y]],f[g[y]]);if(v!==0)return v}return yt(l.length,g.length)}(n.mapValue,e.mapValue);default:throw ot(23264,{Pe:t})}}function Rg(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return yt(n,e);const t=no(n),r=no(e),i=yt(t.seconds,r.seconds);return i!==0?i:yt(t.nanos,r.nanos)}function Cg(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Ya(t[i],r[i]);if(s)return s}return yt(t.length,r.length)}function Xa(n){return Tf(n)}function Tf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=no(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ro(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ye.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=Tf(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Tf(t.fields[o])}`;return i+"}"}(n.mapValue):ot(61005,{value:n})}function nl(n){switch(io(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yl(n);return e?16+nl(e):16;case 5:return 2*n.stringValue.length;case 6:return ro(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+nl(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return go(r.fields,(s,o)=>{i+=s.length+nl(o)}),i}(n.mapValue);default:throw ot(13486,{value:n})}}function kg(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Sf(n){return!!n&&"integerValue"in n}function _d(n){return!!n&&"arrayValue"in n}function xg(n){return!!n&&"nullValue"in n}function Og(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function rl(n){return!!n&&"mapValue"in n}function cA(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[S2])===null||t===void 0?void 0:t.stringValue)===N2}function Vc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return go(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Vc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function uA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===aA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.value=e}static empty(){return new Ir({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!rl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vc(t)}setAll(e){let t=Dn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Vc(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());rl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];rl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){go(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ir(Vc(this.value))}}function P2(n){const e=[];return go(n.fields,(t,r)=>{const i=new Dn([t]);if(rl(r)){const s=P2(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ti(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Kn(e,0,lt.min(),lt.min(),lt.min(),Ir.empty(),0)}static newFoundDocument(e,t,r,i){return new Kn(e,1,t,lt.min(),r,i,0)}static newNoDocument(e,t){return new Kn(e,2,t,lt.min(),lt.min(),Ir.empty(),0)}static newUnknownDocument(e,t){return new Kn(e,3,t,lt.min(),lt.min(),Ir.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(lt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ir.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ir.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=lt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,t){this.position=e,this.inclusive=t}}function Dg(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Ye.comparator(Ye.fromName(o.referenceValue),t.key):r=Ya(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Fg(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!xi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,t="asc"){this.field=e,this.dir=t}}function lA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{}class yn extends L2{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new fA(e,t,r):t==="array-contains"?new gA(e,r):t==="in"?new mA(e,r):t==="not-in"?new vA(e,r):t==="array-contains-any"?new yA(e,r):new yn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new dA(e,r):new pA(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ya(t,this.value)):t!==null&&io(this.value)===io(t)&&this.matchesComparison(Ya(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ot(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class si extends L2{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new si(e,t)}matches(e){return R2(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function R2(n){return n.op==="and"}function C2(n){return hA(n)&&R2(n)}function hA(n){for(const e of n.filters)if(e instanceof si)return!1;return!0}function Nf(n){if(n instanceof yn)return n.field.canonicalString()+n.op.toString()+Xa(n.value);if(C2(n))return n.filters.map(e=>Nf(e)).join(",");{const e=n.filters.map(t=>Nf(t)).join(",");return`${n.op}(${e})`}}function k2(n,e){return n instanceof yn?function(r,i){return i instanceof yn&&r.op===i.op&&r.field.isEqual(i.field)&&xi(r.value,i.value)}(n,e):n instanceof si?function(r,i){return i instanceof si&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&k2(o,i.filters[a]),!0):!1}(n,e):void ot(19439)}function x2(n){return n instanceof yn?function(t){return`${t.field.canonicalString()} ${t.op} ${Xa(t.value)}`}(n):n instanceof si?function(t){return t.op.toString()+" {"+t.getFilters().map(x2).join(" ,")+"}"}(n):"Filter"}class fA extends yn{constructor(e,t,r){super(e,t,r),this.key=Ye.fromName(r.referenceValue)}matches(e){const t=Ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class dA extends yn{constructor(e,t){super(e,"in",t),this.keys=O2("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class pA extends yn{constructor(e,t){super(e,"not-in",t),this.keys=O2("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function O2(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Ye.fromName(r.referenceValue))}class gA extends yn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _d(t)&&Xc(t.arrayValue,this.value)}}class mA extends yn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Xc(this.value.arrayValue,t)}}class vA extends yn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Xc(this.value.arrayValue,t)}}class yA extends yn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_d(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Xc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Ie=null}}function Mg(n,e=null,t=[],r=[],i=null,s=null,o=null){return new _A(n,e,t,r,i,s,o)}function wd(n){const e=gt(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Nf(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ql(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Xa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Xa(r)).join(",")),e.Ie=t}return e.Ie}function bd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!lA(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!k2(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Fg(n.startAt,e.startAt)&&Fg(n.endAt,e.endAt)}function Pf(n){return Ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function wA(n,e,t,r,i,s,o,a){return new au(n,e,t,r,i,s,o,a)}function Ad(n){return new au(n)}function Vg(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function D2(n){return n.collectionGroup!==null}function Uc(n){const e=gt(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ee.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new En(Dn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(f=>{f.isInequality()&&(a=a.add(f.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new Tl(s,r))}),t.has(Dn.keyField().canonicalString())||e.Ee.push(new Tl(Dn.keyField(),r))}return e.Ee}function Pi(n){const e=gt(n);return e.de||(e.de=bA(e,Uc(n))),e.de}function bA(n,e){if(n.limitType==="F")return Mg(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Tl(i.field,s)});const t=n.endAt?new Il(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Il(n.startAt.position,n.startAt.inclusive):null;return Mg(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Lf(n,e){const t=n.filters.concat([e]);return new au(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Rf(n,e,t){return new au(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Xl(n,e){return bd(Pi(n),Pi(e))&&n.limitType===e.limitType}function F2(n){return`${wd(Pi(n))}|lt:${n.limitType}`}function Ra(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>x2(i)).join(", ")}]`),Ql(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Xa(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Xa(i)).join(",")),`Target(${r})`}(Pi(n))}; limitType=${n.limitType})`}function Zl(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ye.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Uc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const f=Dg(o,a,l);return o.inclusive?f<=0:f<0}(r.startAt,Uc(r),i)||r.endAt&&!function(o,a,l){const f=Dg(o,a,l);return o.inclusive?f>=0:f>0}(r.endAt,Uc(r),i))}(n,e)}function AA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function M2(n){return(e,t)=>{let r=!1;for(const i of Uc(n)){const s=EA(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function EA(n,e,t){const r=n.field.isKeyField()?Ye.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),f=a.data.field(s);return l!==null&&f!==null?Ya(l,f):ot(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ot(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){go(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return w2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=new Yt(Ye.comparator);function cs(){return IA}const V2=new Yt(Ye.comparator);function Oc(...n){let e=V2;for(const t of n)e=e.insert(t.key,t);return e}function U2(n){let e=V2;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Uo(){return jc()}function j2(){return jc()}function jc(){return new Zo(n=>n.toString(),(n,e)=>n.isEqual(e))}const TA=new Yt(Ye.comparator),SA=new En(Ye.comparator);function At(...n){let e=SA;for(const t of n)e=e.add(t);return e}const NA=new En(yt);function PA(){return NA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bl(e)?"-0":e}}function B2(n){return{integerValue:""+n}}function LA(n,e){return nA(e)?B2(e):Ed(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(){this._=void 0}}function RA(n,e,t){return n instanceof Sl?function(i,s){const o={fields:{[E2]:{stringValue:A2},[T2]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&yd(s)&&(s=Yl(s)),s&&(o.fields[I2]=s),{mapValue:o}}(t,e):n instanceof Zc?z2(n,e):n instanceof eu?$2(n,e):function(i,s){const o=q2(i,s),a=Ug(o)+Ug(i.Re);return Sf(o)&&Sf(i.Re)?B2(a):Ed(i.serializer,a)}(n,e)}function CA(n,e,t){return n instanceof Zc?z2(n,e):n instanceof eu?$2(n,e):t}function q2(n,e){return n instanceof Nl?function(r){return Sf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Sl extends eh{}class Zc extends eh{constructor(e){super(),this.elements=e}}function z2(n,e){const t=H2(e);for(const r of n.elements)t.some(i=>xi(i,r))||t.push(r);return{arrayValue:{values:t}}}class eu extends eh{constructor(e){super(),this.elements=e}}function $2(n,e){let t=H2(e);for(const r of n.elements)t=t.filter(i=>!xi(i,r));return{arrayValue:{values:t}}}class Nl extends eh{constructor(e,t){super(),this.serializer=e,this.Re=t}}function Ug(n){return cn(n.integerValue||n.doubleValue)}function H2(n){return _d(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function kA(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Zc&&i instanceof Zc||r instanceof eu&&i instanceof eu?Qa(r.elements,i.elements,xi):r instanceof Nl&&i instanceof Nl?xi(r.Re,i.Re):r instanceof Sl&&i instanceof Sl}(n.transform,e.transform)}class xA{constructor(e,t){this.version=e,this.transformResults=t}}class Li{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Li}static exists(e){return new Li(void 0,e)}static updateTime(e){return new Li(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function il(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class th{}function W2(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Id(n.key,Li.none()):new nh(n.key,n.data,Li.none());{const t=n.data,r=Ir.empty();let i=new En(Dn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ea(n.key,r,new ti(i.toArray()),Li.none())}}function OA(n,e,t){n instanceof nh?function(i,s,o){const a=i.value.clone(),l=Bg(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof ea?function(i,s,o){if(!il(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Bg(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(G2(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Bc(n,e,t,r){return n instanceof nh?function(s,o,a,l){if(!il(s.precondition,o))return a;const f=s.value.clone(),g=qg(s.fieldTransforms,l,o);return f.setAll(g),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof ea?function(s,o,a,l){if(!il(s.precondition,o))return a;const f=qg(s.fieldTransforms,l,o),g=o.data;return g.setAll(G2(s)),g.setAll(f),o.convertToFoundDocument(o.version,g).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(y=>y.field))}(n,e,t,r):function(s,o,a){return il(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function DA(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=q2(r.transform,i||null);s!=null&&(t===null&&(t=Ir.empty()),t.set(r.field,s))}return t||null}function jg(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Qa(r,i,(s,o)=>kA(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class nh extends th{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ea extends th{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function G2(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Bg(n,e,t){const r=new Map;xt(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,CA(o,a,t[i]))}return r}function qg(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,RA(s,o,e))}return r}class Id extends th{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class FA extends th{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&OA(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Bc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Bc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=j2();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=W2(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(lt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),At())}isEqual(e){return this.batchId===e.batchId&&Qa(this.mutations,e.mutations,(t,r)=>jg(t,r))&&Qa(this.baseMutations,e.baseMutations,(t,r)=>jg(t,r))}}class Td{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){xt(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return TA}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Td(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vn,Tt;function jA(n){switch(n){case Se.OK:return ot(64938);case Se.CANCELLED:case Se.UNKNOWN:case Se.DEADLINE_EXCEEDED:case Se.RESOURCE_EXHAUSTED:case Se.INTERNAL:case Se.UNAVAILABLE:case Se.UNAUTHENTICATED:return!1;case Se.INVALID_ARGUMENT:case Se.NOT_FOUND:case Se.ALREADY_EXISTS:case Se.PERMISSION_DENIED:case Se.FAILED_PRECONDITION:case Se.ABORTED:case Se.OUT_OF_RANGE:case Se.UNIMPLEMENTED:case Se.DATA_LOSS:return!0;default:return ot(15467,{code:n})}}function K2(n){if(n===void 0)return as("GRPC error has no .code"),Se.UNKNOWN;switch(n){case vn.OK:return Se.OK;case vn.CANCELLED:return Se.CANCELLED;case vn.UNKNOWN:return Se.UNKNOWN;case vn.DEADLINE_EXCEEDED:return Se.DEADLINE_EXCEEDED;case vn.RESOURCE_EXHAUSTED:return Se.RESOURCE_EXHAUSTED;case vn.INTERNAL:return Se.INTERNAL;case vn.UNAVAILABLE:return Se.UNAVAILABLE;case vn.UNAUTHENTICATED:return Se.UNAUTHENTICATED;case vn.INVALID_ARGUMENT:return Se.INVALID_ARGUMENT;case vn.NOT_FOUND:return Se.NOT_FOUND;case vn.ALREADY_EXISTS:return Se.ALREADY_EXISTS;case vn.PERMISSION_DENIED:return Se.PERMISSION_DENIED;case vn.FAILED_PRECONDITION:return Se.FAILED_PRECONDITION;case vn.ABORTED:return Se.ABORTED;case vn.OUT_OF_RANGE:return Se.OUT_OF_RANGE;case vn.UNIMPLEMENTED:return Se.UNIMPLEMENTED;case vn.DATA_LOSS:return Se.DATA_LOSS;default:return ot(39323,{code:n})}}(Tt=vn||(vn={}))[Tt.OK=0]="OK",Tt[Tt.CANCELLED=1]="CANCELLED",Tt[Tt.UNKNOWN=2]="UNKNOWN",Tt[Tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tt[Tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tt[Tt.NOT_FOUND=5]="NOT_FOUND",Tt[Tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tt[Tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tt[Tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tt[Tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tt[Tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tt[Tt.ABORTED=10]="ABORTED",Tt[Tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tt[Tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tt[Tt.INTERNAL=13]="INTERNAL",Tt[Tt.UNAVAILABLE=14]="UNAVAILABLE",Tt[Tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=new Zs([4294967295,4294967295],0);function zg(n){const e=v2().encode(n),t=new u2;return t.update(e),new Uint8Array(t.digest())}function $g(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Zs([t,r],0),new Zs([i,s],0)]}class Sd{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Dc(`Invalid padding: ${t}`);if(r<0)throw new Dc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Dc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Dc(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Zs.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(Zs.fromNumber(r)));return i.compare(BA)===1&&(i=new Zs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=zg(e),[r,i]=$g(t);for(let s=0;s<this.hashCount;s++){const o=this.we(r,i,s);if(!this.be(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Sd(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;const t=zg(e),[r,i]=$g(t);for(let s=0;s<this.hashCount;s++){const o=this.we(r,i,s);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Dc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,cu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new rh(lt.min(),i,new Yt(yt),cs(),At())}}class cu{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new cu(r,t,At(),At(),At())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}}class J2{constructor(e,t){this.targetId=e,this.Ce=t}}class Q2{constructor(e,t,r=Fn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Hg{constructor(){this.Fe=0,this.Me=Wg(),this.xe=Fn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=At(),t=At(),r=At();return this.Me.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ot(38017,{changeType:s})}}),new cu(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=Wg()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,xt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class qA{constructor(e){this.ze=e,this.je=new Map,this.He=cs(),this.Je=qu(),this.Ye=qu(),this.Ze=new Yt(yt)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:ot(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){const t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){const s=i.target;if(Pf(s))if(r===0){const o=new Ye(s.path);this.tt(t,o,Kn.newNoDocument(o,lt.min()))}else xt(r===1,20013,{expectedCount:r});else{const o=this.ut(t);if(o!==r){const a=this.ct(e),l=a?this.lt(a,e,o):1;if(l!==0){this.st(t);const f=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,f)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=ro(r).toUint8Array()}catch(l){if(l instanceof b2)return Ja("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Sd(o,i,s)}catch(l){return Ja(l instanceof Dc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.pe===0?null:a}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.tt(t,s,null),i++)}),i}It(e){const t=new Map;this.je.forEach((s,o)=>{const a=this._t(o);if(a){if(s.current&&Pf(a.target)){const l=new Ye(a.target.path);this.Et(l).has(o)||this.dt(o,l)||this.tt(o,l,Kn.newNoDocument(l,e))}s.Le&&(t.set(o,s.qe()),s.Qe())}});let r=At();this.Ye.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const f=this._t(l);return!f||f.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.He.forEach((s,o)=>o.setReadTime(e));const i=new rh(e,t,this.Ze,this.He,r);return this.He=cs(),this.Je=qu(),this.Ye=qu(),this.Ze=new Yt(yt),i}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Hg,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new En(yt),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new En(yt),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||$e("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Hg),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function qu(){return new Yt(Ye.comparator)}function Wg(){return new Yt(Ye.comparator)}const zA={asc:"ASCENDING",desc:"DESCENDING"},$A={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HA={and:"AND",or:"OR"};class WA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Cf(n,e){return n.useProto3Json||Ql(e)?e:{value:e}}function Pl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Y2(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function GA(n,e){return Pl(n,e.toTimestamp())}function Ri(n){return xt(!!n,49232),lt.fromTimestamp(function(t){const r=no(t);return new An(r.seconds,r.nanos)}(n))}function Nd(n,e){return kf(n,e).canonicalString()}function kf(n,e){const t=function(i){return new Jt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function X2(n){const e=Jt.fromString(n);return xt(r0(e),10190,{key:e.toString()}),e}function xf(n,e){return Nd(n.databaseId,e.path)}function Hh(n,e){const t=X2(e);if(t.get(1)!==n.databaseId.projectId)throw new We(Se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new We(Se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ye(e0(t))}function Z2(n,e){return Nd(n.databaseId,e)}function KA(n){const e=X2(n);return e.length===4?Jt.emptyPath():e0(e)}function Of(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function e0(n){return xt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Gg(n,e,t){return{name:xf(n,e),fields:t.value.mapValue.fields}}function JA(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ot(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(f,g){return f.useProto3Json?(xt(g===void 0||typeof g=="string",58123),Fn.fromBase64String(g||"")):(xt(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Fn.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(f){const g=f.code===void 0?Se.UNKNOWN:K2(f.code);return new We(g,f.message||"")}(o);t=new Q2(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Hh(n,r.document.name),s=Ri(r.document.updateTime),o=r.document.createTime?Ri(r.document.createTime):lt.min(),a=new Ir({mapValue:{fields:r.document.fields}}),l=Kn.newFoundDocument(i,s,o,a),f=r.targetIds||[],g=r.removedTargetIds||[];t=new sl(f,g,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Hh(n,r.document),s=r.readTime?Ri(r.readTime):lt.min(),o=Kn.newNoDocument(i,s),a=r.removedTargetIds||[];t=new sl([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Hh(n,r.document),s=r.removedTargetIds||[];t=new sl([],s,i,null)}else{if(!("filter"in e))return ot(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new UA(i,s),a=r.targetId;t=new J2(a,o)}}return t}function QA(n,e){let t;if(e instanceof nh)t={update:Gg(n,e.key,e.value)};else if(e instanceof Id)t={delete:xf(n,e.key)};else if(e instanceof ea)t={update:Gg(n,e.key,e.data),updateMask:sE(e.fieldMask)};else{if(!(e instanceof FA))return ot(16599,{ft:e.type});t={verify:xf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Sl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Zc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof eu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Nl)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw ot(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:GA(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ot(27497)}(n,e.precondition)),t}function YA(n,e){return n&&n.length>0?(xt(e!==void 0,14353),n.map(t=>function(i,s){let o=i.updateTime?Ri(i.updateTime):Ri(s);return o.isEqual(lt.min())&&(o=Ri(s)),new xA(o,i.transformResults||[])}(t,e))):[]}function XA(n,e){return{documents:[Z2(n,e.path)]}}function ZA(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Z2(n,i);const s=function(f){if(f.length!==0)return n0(si.create(f,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(f){if(f.length!==0)return f.map(g=>function(b){return{field:Ca(b.field),direction:nE(b.dir)}}(g))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=Cf(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{gt:t,parent:i}}function eE(n){let e=KA(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){xt(r===1,65062);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let s=[];t.where&&(s=function(y){const b=t0(y);return b instanceof si&&C2(b)?b.getFilters():[b]}(t.where));let o=[];t.orderBy&&(o=function(y){return y.map(b=>function(M){return new Tl(ka(M.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(b))}(t.orderBy));let a=null;t.limit&&(a=function(y){let b;return b=typeof y=="object"?y.value:y,Ql(b)?null:b}(t.limit));let l=null;t.startAt&&(l=function(y){const b=!!y.before,v=y.values||[];return new Il(v,b)}(t.startAt));let f=null;return t.endAt&&(f=function(y){const b=!y.before,v=y.values||[];return new Il(v,b)}(t.endAt)),wA(e,i,o,s,a,"F",l,f)}function tE(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ot(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function t0(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ka(t.unaryFilter.field);return yn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ka(t.unaryFilter.field);return yn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ka(t.unaryFilter.field);return yn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ka(t.unaryFilter.field);return yn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ot(61313);default:return ot(60726)}}(n):n.fieldFilter!==void 0?function(t){return yn.create(ka(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ot(58110);default:return ot(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return si.create(t.compositeFilter.filters.map(r=>t0(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ot(1026)}}(t.compositeFilter.op))}(n):ot(30097,{filter:n})}function nE(n){return zA[n]}function rE(n){return $A[n]}function iE(n){return HA[n]}function Ca(n){return{fieldPath:n.canonicalString()}}function ka(n){return Dn.fromServerFormat(n.fieldPath)}function n0(n){return n instanceof yn?function(t){if(t.op==="=="){if(Og(t.value))return{unaryFilter:{field:Ca(t.field),op:"IS_NAN"}};if(xg(t.value))return{unaryFilter:{field:Ca(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Og(t.value))return{unaryFilter:{field:Ca(t.field),op:"IS_NOT_NAN"}};if(xg(t.value))return{unaryFilter:{field:Ca(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ca(t.field),op:rE(t.op),value:t.value}}}(n):n instanceof si?function(t){const r=t.getFilters().map(i=>n0(i));return r.length===1?r[0]:{compositeFilter:{op:iE(t.op),filters:r}}}(n):ot(54877,{filter:n})}function sE(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function r0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,t,r,i,s=lt.min(),o=lt.min(),a=Fn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ks(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e){this.wt=e}}function aE(n){const e=eE({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Rf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(){this.yn=new uE}addToCollectionParentIndex(e,t){return this.yn.add(t),Te.resolve()}getCollectionParents(e,t){return Te.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return Te.resolve()}deleteFieldIndex(e,t){return Te.resolve()}deleteAllFieldIndexes(e){return Te.resolve()}createTargetIndexes(e,t){return Te.resolve()}getDocumentsMatchingTarget(e,t){return Te.resolve(null)}getIndexType(e,t){return Te.resolve(0)}getFieldIndexes(e,t){return Te.resolve([])}getNextCollectionGroupToUpdate(e){return Te.resolve(null)}getMinOffset(e,t){return Te.resolve(to.min())}getMinOffsetFromCollectionGroup(e,t){return Te.resolve(to.min())}updateCollectionGroup(e,t,r){return Te.resolve()}updateIndexEntries(e,t){return Te.resolve()}}class uE{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new En(Jt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new En(Jt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},i0=41943040;class hr{static withCacheSize(e){return new hr(e,hr.DEFAULT_COLLECTION_PERCENTILE,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hr.DEFAULT_COLLECTION_PERCENTILE=10,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hr.DEFAULT=new hr(i0,hr.DEFAULT_COLLECTION_PERCENTILE,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hr.DISABLED=new hr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Za(0)}static ir(){return new Za(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg="LruGarbageCollector",lE=1048576;function Qg([n,e],[t,r]){const i=yt(n,t);return i===0?yt(e,r):i}class hE{constructor(e){this.cr=e,this.buffer=new En(Qg),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Qg(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class fE{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){$e(Jg,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){oc(t)?$e(Jg,"Ignoring IndexedDB error during garbage collection: ",t):await sc(t)}await this.Ir(3e5)})}}class dE{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return Te.resolve(Jl.le);const r=new hE(t);return this.Er.forEachTarget(e,i=>r.Pr(i.sequenceNumber)).next(()=>this.Er.Ar(e,i=>r.Pr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Er.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?($e("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(Kg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kg):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let r,i,s,o,a,l,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,o=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,a=Date.now(),this.removeTargets(e,r,t))).next(y=>(s=y,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(f=Date.now(),La()<=_t.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-g}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${y} documents in `+(f-l)+`ms
Total Duration: ${f-g}ms`),Te.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:y})))}}function pE(n,e){return new dE(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(){this.changes=new Zo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Kn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Bc(r.mutation,i,ti.empty(),An.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,At()).next(()=>r))}getLocalViewOfDocuments(e,t,r=At()){const i=Uo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Oc();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Uo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,At()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=cs();const o=jc(),a=function(){return jc()}();return t.forEach((l,f)=>{const g=r.get(f.key);i.has(f.key)&&(g===void 0||g.mutation instanceof ea)?s=s.insert(f.key,f):g!==void 0?(o.set(f.key,g.mutation.getFieldMask()),Bc(g.mutation,f,g.mutation.getFieldMask(),An.now())):o.set(f.key,ti.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((f,g)=>o.set(f,g)),t.forEach((f,g)=>{var y;return a.set(f,new mE(g,(y=o.get(f))!==null&&y!==void 0?y:null))}),a))}recalculateAndSaveOverlays(e,t){const r=jc();let i=new Yt((o,a)=>o-a),s=At();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const f=t.get(l);if(f===null)return;let g=r.get(l)||ti.empty();g=a.applyToLocalView(f,g),r.set(l,g);const y=(i.get(a.batchId)||At()).add(l);i=i.insert(a.batchId,y)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),f=l.key,g=l.value,y=j2();g.forEach(b=>{if(!s.has(b)){const v=W2(t.get(b),r.get(b));v!==null&&y.set(b,v),s=s.add(b)}}),o.push(this.documentOverlayCache.saveOverlays(e,f,y))}return Te.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return Ye.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):D2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Te.resolve(Uo());let a=Jc,l=s;return o.next(f=>Te.forEach(f,(g,y)=>(a<y.largestBatchId&&(a=y.largestBatchId),s.get(g)?Te.resolve():this.remoteDocumentCache.getEntry(e,g).next(b=>{l=l.insert(g,b)}))).next(()=>this.populateOverlays(e,f,s)).next(()=>this.computeViews(e,l,f,At())).next(g=>({batchId:a,changes:U2(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ye(t)).next(r=>{let i=Oc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Oc();return this.indexManager.getCollectionParents(e,s).next(a=>Te.forEach(a,l=>{const f=function(y,b){return new au(b,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(g=>{g.forEach((y,b)=>{o=o.insert(y,b)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,f)=>{const g=f.getKey();o.get(g)===null&&(o=o.insert(g,Kn.newInvalidDocument(g)))});let a=Oc();return o.forEach((l,f)=>{const g=s.get(l);g!==void 0&&Bc(g.mutation,f,ti.empty(),An.now()),Zl(t,f)&&(a=a.insert(l,f))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return Te.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ri(i.createTime)}}(t)),Te.resolve()}getNamedQuery(e,t){return Te.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(i){return{name:i.name,query:aE(i.bundledQuery),readTime:Ri(i.readTime)}}(t)),Te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(){this.overlays=new Yt(Ye.comparator),this.Or=new Map}getOverlay(e,t){return Te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Uo();return Te.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),Te.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Or.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Or.delete(r)),Te.resolve()}getOverlaysForCollection(e,t,r){const i=Uo(),s=t.length+1,o=new Ye(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,f=l.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Te.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Yt((f,g)=>f-g);const o=this.overlays.getIterator();for(;o.hasNext();){const f=o.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let g=s.get(f.largestBatchId);g===null&&(g=Uo(),s=s.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const a=Uo(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((f,g)=>a.set(f,g)),!(a.size()>=i)););return Te.resolve(a)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Or.get(i.largestBatchId).delete(r.key);this.Or.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new VA(t,r));let s=this.Or.get(t);s===void 0&&(s=At(),this.Or.set(t,s)),this.Or.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(){this.sessionToken=Fn.EMPTY_BYTE_STRING}getSessionToken(e){return Te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(){this.Nr=new En(Nn.Br),this.Lr=new En(Nn.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const r=new Nn(e,t);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Qr(new Nn(e,t))}$r(e,t){e.forEach(r=>this.removeReference(r,t))}Ur(e){const t=new Ye(new Jt([])),r=new Nn(t,e),i=new Nn(t,e+1),s=[];return this.Lr.forEachInRange([r,i],o=>{this.Qr(o),s.push(o.key)}),s}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new Ye(new Jt([])),r=new Nn(t,e),i=new Nn(t,e+1);let s=At();return this.Lr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Nn(e,0),r=this.Nr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Nn{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return Ye.comparator(e.key,t.key)||yt(e.Gr,t.Gr)}static kr(e,t){return yt(e.Gr,t.Gr)||Ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new En(Nn.Br)}checkEmpty(e){return Te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new MA(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.zr=this.zr.add(new Nn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Te.resolve(o)}lookupMutationBatch(e,t){return Te.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Hr(r),s=i<0?0:i;return Te.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(this.mutationQueue.length===0?vd:this.Jn-1)}getAllMutationBatches(e){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Nn(t,0),i=new Nn(t,Number.POSITIVE_INFINITY),s=[];return this.zr.forEachInRange([r,i],o=>{const a=this.jr(o.Gr);s.push(a)}),Te.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(yt);return t.forEach(i=>{const s=new Nn(i,0),o=new Nn(i,Number.POSITIVE_INFINITY);this.zr.forEachInRange([s,o],a=>{r=r.add(a.Gr)})}),Te.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Ye.isDocumentKey(s)||(s=s.child(""));const o=new Nn(new Ye(s),0);let a=new En(yt);return this.zr.forEachWhile(l=>{const f=l.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(a=a.add(l.Gr)),!0)},o),Te.resolve(this.Jr(a))}Jr(e){const t=[];return e.forEach(r=>{const i=this.jr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){xt(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return Te.forEach(t.mutations,i=>{const s=new Nn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,t){const r=new Nn(t,0),i=this.zr.firstAfterOrEqual(r);return Te.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Te.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e){this.Zr=e,this.docs=function(){return new Yt(Ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Zr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Te.resolve(r?r.document.mutableCopy():Kn.newInvalidDocument(t))}getEntries(e,t){let r=cs();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Kn.newInvalidDocument(i))}),Te.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=cs();const o=t.path,a=new Ye(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:f,value:{document:g}}=l.getNext();if(!o.isPrefixOf(f.path))break;f.path.length>o.length+1||Xb(Yb(g),r)<=0||(i.has(g.key)||Zl(t,g))&&(s=s.insert(g.key,g.mutableCopy()))}return Te.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ot(9500)}Xr(e,t){return Te.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new EE(this)}getSize(e){return Te.resolve(this.size)}}class EE extends gE{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.vr.addEntry(e,i)):this.vr.removeEntry(r)}),Te.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e){this.persistence=e,this.ei=new Zo(t=>wd(t),bd),this.lastRemoteSnapshotVersion=lt.min(),this.highestTargetId=0,this.ti=0,this.ni=new Pd,this.targetCount=0,this.ri=Za.rr()}forEachTarget(e,t){return this.ei.forEach((r,i)=>t(i)),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ti&&(this.ti=t),Te.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new Za(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,Te.resolve()}updateTargetData(e,t){return this.ar(t),Te.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.ei.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ei.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Te.waitFor(s).next(()=>i)}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,t){const r=this.ei.get(t)||null;return Te.resolve(r)}addMatchingKeys(e,t,r){return this.ni.qr(t,r),Te.resolve()}removeMatchingKeys(e,t,r){this.ni.$r(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Te.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),Te.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ni.Wr(t);return Te.resolve(r)}containsKey(e,t){return Te.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e,t){this.ii={},this.overlays={},this.si=new Jl(0),this.oi=!1,this.oi=!0,this._i=new wE,this.referenceDelegate=e(this),this.ai=new IE(this),this.indexManager=new cE,this.remoteDocumentCache=function(i){return new AE(i)}(r=>this.referenceDelegate.ui(r)),this.serializer=new oE(t),this.ci=new yE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _E,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ii[e.toKey()];return r||(r=new bE(t,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,r){$e("MemoryPersistence","Starting transaction:",e);const i=new TE(this.si.next());return this.referenceDelegate.li(),r(i).next(s=>this.referenceDelegate.hi(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Pi(e,t){return Te.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,t)))}}class TE extends eA{constructor(e){super(),this.currentSequenceNumber=e}}class Ld{constructor(e){this.persistence=e,this.Ti=new Pd,this.Ii=null}static Ei(e){return new Ld(e)}get di(){if(this.Ii)return this.Ii;throw ot(60996)}addReference(e,t,r){return this.Ti.addReference(r,t),this.di.delete(r.toString()),Te.resolve()}removeReference(e,t,r){return this.Ti.removeReference(r,t),this.di.add(r.toString()),Te.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Te.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(i=>this.di.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.di.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.di,r=>{const i=Ye.fromPath(r);return this.Ai(e,i).next(s=>{s||t.removeEntry(i,lt.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return Te.or([()=>Te.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class Ll{constructor(e,t){this.persistence=e,this.Ri=new Zo(r=>rA(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=pE(this,t)}static Ei(e,t){return new Ll(e,t)}li(){}hi(e){return Te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}Ar(e,t){return Te.forEach(this.Ri,(r,i)=>this.gr(e,r,i).next(s=>s?Te.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Xr(e,o=>this.gr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,lt.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),Te.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),Te.resolve()}removeReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),Te.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),Te.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=nl(e.data.value)),t}gr(e,t,r){return Te.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.Ri.get(t);return Te.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ls=r,this.hs=i}static Ps(e,t){let r=At(),i=At();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Rd(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return uy()?8:tA(Qn())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Rs(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Vs(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new SE;return this.fs(e,t,o).next(a=>{if(s.result=a,this.Is)return this.gs(e,t,o,a.size)})}).next(()=>s.result)}gs(e,t,r,i){return r.documentReadCount<this.Es?(La()<=_t.DEBUG&&$e("QueryEngine","SDK will not create cache indexes for query:",Ra(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),Te.resolve()):(La()<=_t.DEBUG&&$e("QueryEngine","Query:",Ra(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(La()<=_t.DEBUG&&$e("QueryEngine","The SDK decides to create cache indexes for query:",Ra(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pi(t))):Te.resolve())}Rs(e,t){if(Vg(t))return Te.resolve(null);let r=Pi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Rf(t,null,"F"),r=Pi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=At(...s);return this.As.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const f=this.ps(t,a);return this.ys(t,f,o,l.readTime)?this.Rs(e,Rf(t,null,"F")):this.ws(e,f,t,l)}))})))}Vs(e,t,r,i){return Vg(t)||i.isEqual(lt.min())?Te.resolve(null):this.As.getDocuments(e,r).next(s=>{const o=this.ps(t,s);return this.ys(t,o,r,i)?Te.resolve(null):(La()<=_t.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ra(t)),this.ws(e,o,t,Qb(i,Jc)).next(a=>a))})}ps(e,t){let r=new En(M2(e));return t.forEach((i,s)=>{Zl(e,s)&&(r=r.add(s))}),r}ys(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}fs(e,t,r){return La()<=_t.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",Ra(t)),this.As.getDocumentsMatchingQuery(e,t,to.min(),r)}ws(e,t,r,i){return this.As.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd="LocalStore",PE=3e8;class LE{constructor(e,t,r,i){this.persistence=e,this.bs=t,this.serializer=i,this.Ss=new Yt(yt),this.Ds=new Zo(s=>wd(s),bd),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vE(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function RE(n,e,t,r){return new LE(n,e,t,r)}async function o0(n,e){const t=gt(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Fs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=At();for(const f of i){o.push(f.batchId);for(const g of f.mutations)l=l.add(g.key)}for(const f of s){a.push(f.batchId);for(const g of f.mutations)l=l.add(g.key)}return t.localDocuments.getDocuments(r,l).next(f=>({Ms:f,removedBatchIds:o,addedBatchIds:a}))})})}function CE(n,e){const t=gt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Cs.newChangeBuffer({trackRemovals:!0});return function(a,l,f,g){const y=f.batch,b=y.keys();let v=Te.resolve();return b.forEach(M=>{v=v.next(()=>g.getEntry(l,M)).next(x=>{const F=f.docVersions.get(M);xt(F!==null,48541),x.version.compareTo(F)<0&&(y.applyToRemoteDocument(x,f),x.isValidDocument()&&(x.setReadTime(f.commitVersion),g.addEntry(x)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(l,y))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=At();for(let f=0;f<a.mutationResults.length;++f)a.mutationResults[f].transformResults.length>0&&(l=l.add(a.batch.mutations[f].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function a0(n){const e=gt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function kE(n,e){const t=gt(n),r=e.snapshotVersion;let i=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Cs.newChangeBuffer({trackRemovals:!0});i=t.Ss;const a=[];e.targetChanges.forEach((g,y)=>{const b=i.get(y);if(!b)return;a.push(t.ai.removeMatchingKeys(s,g.removedDocuments,y).next(()=>t.ai.addMatchingKeys(s,g.addedDocuments,y)));let v=b.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(y)!==null?v=v.withResumeToken(Fn.EMPTY_BYTE_STRING,lt.min()).withLastLimboFreeSnapshotVersion(lt.min()):g.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(g.resumeToken,r)),i=i.insert(y,v),function(x,F,P){return x.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=PE?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(b,v,g)&&a.push(t.ai.updateTargetData(s,v))});let l=cs(),f=At();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,g))}),a.push(xE(s,o,e.documentUpdates).next(g=>{l=g.xs,f=g.Os})),!r.isEqual(lt.min())){const g=t.ai.getLastRemoteSnapshotVersion(s).next(y=>t.ai.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(g)}return Te.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,f)).next(()=>l)}).then(s=>(t.Ss=i,s))}function xE(n,e,t){let r=At(),i=At();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=cs();return t.forEach((a,l)=>{const f=s.get(a);l.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(lt.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!f.isValidDocument()||l.version.compareTo(f.version)>0||l.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):$e(Cd,"Ignoring outdated watch update for ",a,". Current version:",f.version," Watch version:",l.version)}),{xs:o,Os:i}})}function OE(n,e){const t=gt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=vd),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function DE(n,e){const t=gt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ai.getTargetData(r,e).next(s=>s?(i=s,Te.resolve(i)):t.ai.allocateTargetId(r).next(o=>(i=new Ks(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.ai.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ss.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(r.targetId,r),t.Ds.set(e,r.targetId)),r})}async function Df(n,e,t){const r=gt(n),i=r.Ss.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!oc(o))throw o;$e(Cd,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(i.target)}function Yg(n,e,t){const r=gt(n);let i=lt.min(),s=At();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,f,g){const y=gt(l),b=y.Ds.get(g);return b!==void 0?Te.resolve(y.Ss.get(b)):y.ai.getTargetData(f,g)}(r,o,Pi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.bs.getDocumentsMatchingQuery(o,e,t?i:lt.min(),t?s:At())).next(a=>(FE(r,AA(e),a),{documents:a,Ns:s})))}function FE(n,e,t){let r=n.vs.get(e)||lt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.vs.set(e,r)}class Xg{constructor(){this.activeTargetIds=PA()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ME{constructor(){this.So=new Xg,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,r){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new Xg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg="ConnectivityMonitor";class em{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){$e(Zg,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){$e(Zg,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zu=null;function Ff(){return zu===null?zu=function(){return 268435456+Math.round(2147483648*Math.random())}():zu++,"0x"+zu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh="RestConnection",UE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jE{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${r}/databases/${i}`,this.qo=this.databaseId.database===Al?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Qo(e,t,r,i,s){const o=Ff(),a=this.$o(e,t.toUriEncodedString());$e(Wh,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(l,i,s),this.Ko(e,a,l,r).then(f=>($e(Wh,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Ja(Wh,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Wo(e,t,r,i,s,o){return this.Qo(e,t,r,i,s)}Uo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ic}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}$o(e,t){const r=UE[e];return`${this.Lo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn="WebChannelConnection";class qE extends jE{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,r,i){const s=Ff();return new Promise((o,a)=>{const l=new l2;l.setWithCredentials(!0),l.listenOnce(h2.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case tl.NO_ERROR:const g=l.getResponseJson();$e(Bn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),o(g);break;case tl.TIMEOUT:$e(Bn,`RPC '${e}' ${s} timed out`),a(new We(Se.DEADLINE_EXCEEDED,"Request time out"));break;case tl.HTTP_ERROR:const y=l.getStatus();if($e(Bn,`RPC '${e}' ${s} failed with status:`,y,"response text:",l.getResponseText()),y>0){let b=l.getResponseJson();Array.isArray(b)&&(b=b[0]);const v=b==null?void 0:b.error;if(v&&v.status&&v.message){const M=function(F){const P=F.toLowerCase().replace(/_/g,"-");return Object.values(Se).indexOf(P)>=0?P:Se.UNKNOWN}(v.status);a(new We(M,v.message))}else a(new We(Se.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new We(Se.UNAVAILABLE,"Connection failed."));break;default:ot(9055,{s_:e,streamId:s,o_:l.getLastErrorCode(),__:l.getLastError()})}}finally{$e(Bn,`RPC '${e}' ${s} completed.`)}});const f=JSON.stringify(i);$e(Bn,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",f,r,15)})}a_(e,t,r){const i=Ff(),s=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=p2(),a=d2(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(l.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Uo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const g=s.join("");$e(Bn,`Creating RPC '${e}' stream ${i}: ${g}`,l);const y=o.createWebChannel(g,l);let b=!1,v=!1;const M=new BE({Go:F=>{v?$e(Bn,`Not sending because RPC '${e}' stream ${i} is closed:`,F):(b||($e(Bn,`Opening RPC '${e}' stream ${i} transport.`),y.open(),b=!0),$e(Bn,`RPC '${e}' stream ${i} sending:`,F),y.send(F))},zo:()=>y.close()}),x=(F,P,B)=>{F.listen(P,K=>{try{B(K)}catch(ie){setTimeout(()=>{throw ie},0)}})};return x(y,xc.EventType.OPEN,()=>{v||($e(Bn,`RPC '${e}' stream ${i} transport opened.`),M.t_())}),x(y,xc.EventType.CLOSE,()=>{v||(v=!0,$e(Bn,`RPC '${e}' stream ${i} transport closed`),M.r_())}),x(y,xc.EventType.ERROR,F=>{v||(v=!0,Ja(Bn,`RPC '${e}' stream ${i} transport errored. Name:`,F.name,"Message:",F.message),M.r_(new We(Se.UNAVAILABLE,"The operation could not be completed")))}),x(y,xc.EventType.MESSAGE,F=>{var P;if(!v){const B=F.data[0];xt(!!B,16349);const K=B,ie=(K==null?void 0:K.error)||((P=K[0])===null||P===void 0?void 0:P.error);if(ie){$e(Bn,`RPC '${e}' stream ${i} received error:`,ie);const le=ie.status;let we=function(k){const j=vn[k];if(j!==void 0)return K2(j)}(le),U=ie.message;we===void 0&&(we=Se.INTERNAL,U="Unknown error status: "+le+" with message "+ie.message),v=!0,M.r_(new We(we,U)),y.close()}else $e(Bn,`RPC '${e}' stream ${i} received:`,B),M.i_(B)}}),x(a,f2.STAT_EVENT,F=>{F.stat===Ef.PROXY?$e(Bn,`RPC '${e}' stream ${i} detected buffering proxy`):F.stat===Ef.NOPROXY&&$e(Bn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{M.n_()},0),M}}function Gh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(n){return new WA(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,t,r=1e3,i=1.5,s=6e4){this.bi=e,this.timerId=t,this.u_=r,this.c_=i,this.l_=s,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),i=Math.max(0,t-r);i>0&&$e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,i,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="PersistentStream";class u0{constructor(e,t,r,i,s,o,a,l){this.bi=e,this.R_=r,this.V_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new c0(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===Se.RESOURCE_EXHAUSTED?(as(t.toString()),as("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===Se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.m_===t&&this.B_(r,i)},r=>{e(()=>{const i=new We(Se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(i)})})}B_(e,t){const r=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(i=>{r(()=>this.L_(i))}),this.stream.onMessage(i=>{r(()=>++this.p_==1?this.q_(i):this.onNext(i))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return $e(tm,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():($e(tm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zE extends u0{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=JA(this.serializer,e),r=function(s){if(!("targetChange"in s))return lt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?lt.min():o.readTime?Ri(o.readTime):lt.min()}(e);return this.listener.Q_(t,r)}U_(e){const t={};t.database=Of(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=Pf(l)?{documents:XA(s,l)}:{query:ZA(s,l).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Y2(s,o.resumeToken);const f=Cf(s,o.expectedCount);f!==null&&(a.expectedCount=f)}else if(o.snapshotVersion.compareTo(lt.min())>0){a.readTime=Pl(s,o.snapshotVersion.toTimestamp());const f=Cf(s,o.expectedCount);f!==null&&(a.expectedCount=f)}return a}(this.serializer,e);const r=tE(this.serializer,e);r&&(t.labels=r),this.F_(t)}K_(e){const t={};t.database=Of(this.serializer),t.removeTarget=e,this.F_(t)}}class $E extends u0{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return xt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xt(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){xt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=YA(e.writeResults,e.commitTime),r=Ri(e.commitTime);return this.listener.j_(r,t)}H_(){const e={};e.database=Of(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>QA(this.serializer,r))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{}class WE extends HE{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.J_=!1}Y_(){if(this.J_)throw new We(Se.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,r,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Qo(e,kf(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new We(Se.UNKNOWN,s.toString())})}Wo(e,t,r,i,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,kf(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new We(Se.UNKNOWN,o.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class GE{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(as(t),this.ea=!1):$e("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo="RemoteStore";class KE{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=s,this.ca.vo(o=>{r.enqueueAndForget(async()=>{ta(this)&&($e(Wo,"Restarting streams for network reachability change."),await async function(l){const f=gt(l);f.aa.add(4),await uu(f),f.la.set("Unknown"),f.aa.delete(4),await sh(f)}(this))})}),this.la=new GE(r,i)}}async function sh(n){if(ta(n))for(const e of n.ua)await e(!0)}async function uu(n){for(const e of n.ua)await e(!1)}function l0(n,e){const t=gt(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),Dd(t)?Od(t):ac(t).b_()&&xd(t,e))}function kd(n,e){const t=gt(n),r=ac(t);t._a.delete(e),r.b_()&&h0(t,e),t._a.size===0&&(r.b_()?r.v_():ta(t)&&t.la.set("Unknown"))}function xd(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(lt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ac(n).U_(e)}function h0(n,e){n.ha.Ke(e),ac(n).K_(e)}function Od(n){n.ha=new qA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),ac(n).start(),n.la.ta()}function Dd(n){return ta(n)&&!ac(n).w_()&&n._a.size>0}function ta(n){return gt(n).aa.size===0}function f0(n){n.ha=void 0}async function JE(n){n.la.set("Online")}async function QE(n){n._a.forEach((e,t)=>{xd(n,e)})}async function YE(n,e){f0(n),Dd(n)?(n.la.ia(e),Od(n)):n.la.set("Unknown")}async function XE(n,e,t){if(n.la.set("Online"),e instanceof Q2&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i._a.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i._a.delete(a),i.ha.removeTarget(a))}(n,e)}catch(r){$e(Wo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Rl(n,r)}else if(e instanceof sl?n.ha.Xe(e):e instanceof J2?n.ha.ot(e):n.ha.nt(e),!t.isEqual(lt.min()))try{const r=await a0(n.localStore);t.compareTo(r)>=0&&await function(s,o){const a=s.ha.It(o);return a.targetChanges.forEach((l,f)=>{if(l.resumeToken.approximateByteSize()>0){const g=s._a.get(f);g&&s._a.set(f,g.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,f)=>{const g=s._a.get(l);if(!g)return;s._a.set(l,g.withResumeToken(Fn.EMPTY_BYTE_STRING,g.snapshotVersion)),h0(s,l);const y=new Ks(g.target,l,f,g.sequenceNumber);xd(s,y)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){$e(Wo,"Failed to raise snapshot:",r),await Rl(n,r)}}async function Rl(n,e,t){if(!oc(e))throw e;n.aa.add(1),await uu(n),n.la.set("Offline"),t||(t=()=>a0(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{$e(Wo,"Retrying IndexedDB access"),await t(),n.aa.delete(1),await sh(n)})}function d0(n,e){return e().catch(t=>Rl(n,t,e))}async function oh(n){const e=gt(n),t=so(e);let r=e.oa.length>0?e.oa[e.oa.length-1].batchId:vd;for(;ZE(e);)try{const i=await OE(e.localStore,r);if(i===null){e.oa.length===0&&t.v_();break}r=i.batchId,eI(e,i)}catch(i){await Rl(e,i)}p0(e)&&g0(e)}function ZE(n){return ta(n)&&n.oa.length<10}function eI(n,e){n.oa.push(e);const t=so(n);t.b_()&&t.W_&&t.G_(e.mutations)}function p0(n){return ta(n)&&!so(n).w_()&&n.oa.length>0}function g0(n){so(n).start()}async function tI(n){so(n).H_()}async function nI(n){const e=so(n);for(const t of n.oa)e.G_(t.mutations)}async function rI(n,e,t){const r=n.oa.shift(),i=Td.from(r,e,t);await d0(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await oh(n)}async function iI(n,e){e&&so(n).W_&&await async function(r,i){if(function(o){return jA(o)&&o!==Se.ABORTED}(i.code)){const s=r.oa.shift();so(r).D_(),await d0(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await oh(r)}}(n,e),p0(n)&&g0(n)}async function nm(n,e){const t=gt(n);t.asyncQueue.verifyOperationInProgress(),$e(Wo,"RemoteStore received new credentials");const r=ta(t);t.aa.add(3),await uu(t),r&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await sh(t)}async function sI(n,e){const t=gt(n);e?(t.aa.delete(2),await sh(t)):e||(t.aa.add(2),await uu(t),t.la.set("Unknown"))}function ac(n){return n.Pa||(n.Pa=function(t,r,i){const s=gt(t);return s.Y_(),new zE(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{jo:JE.bind(null,n),Jo:QE.bind(null,n),Zo:YE.bind(null,n),Q_:XE.bind(null,n)}),n.ua.push(async e=>{e?(n.Pa.D_(),Dd(n)?Od(n):n.la.set("Unknown")):(await n.Pa.stop(),f0(n))})),n.Pa}function so(n){return n.Ta||(n.Ta=function(t,r,i){const s=gt(t);return s.Y_(),new $E(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:tI.bind(null,n),Zo:iI.bind(null,n),z_:nI.bind(null,n),j_:rI.bind(null,n)}),n.ua.push(async e=>{e?(n.Ta.D_(),await oh(n)):(await n.Ta.stop(),n.oa.length>0&&($e(Wo,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))})),n.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new Fd(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new We(Se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Md(n,e){if(as("AsyncQueue",`${e}: ${n}`),oc(n))return new We(Se.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{static emptySet(e){return new Ba(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ye.comparator(t.key,r.key):(t,r)=>Ye.comparator(t.key,r.key),this.keyedMap=Oc(),this.sortedSet=new Yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ba)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ba;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(){this.Ia=new Yt(Ye.comparator)}track(e){const t=e.doc.key,r=this.Ia.get(t);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(t):e.type===1&&r.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):ot(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,r)=>{e.push(r)}),e}}class ec{constructor(e,t,r,i,s,o,a,l,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new ec(e,t,Ba.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class aI{constructor(){this.queries=im(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,r){const i=gt(t),s=i.queries;i.queries=im(),s.forEach((o,a)=>{for(const l of a.Ra)l.onError(r)})})(this,new We(Se.ABORTED,"Firestore shutting down"))}}function im(){return new Zo(n=>F2(n),Xl)}async function m0(n,e){const t=gt(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.Va()&&e.ma()&&(r=2):(s=new oI,r=e.ma()?0:1);try{switch(r){case 0:s.Aa=await t.onListen(i,!0);break;case 1:s.Aa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const a=Md(o,`Initialization of query '${Ra(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Ra.push(e),e.ga(t.onlineState),s.Aa&&e.pa(s.Aa)&&Vd(t)}async function v0(n,e){const t=gt(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.Ra.indexOf(e);o>=0&&(s.Ra.splice(o,1),s.Ra.length===0?i=e.ma()?0:1:!s.Va()&&e.ma()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function cI(n,e){const t=gt(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.Ra)a.pa(i)&&(r=!0);o.Aa=i}}r&&Vd(t)}function uI(n,e,t){const r=gt(n),i=r.queries.get(e);if(i)for(const s of i.Ra)s.onError(t);r.queries.delete(e)}function Vd(n){n.fa.forEach(e=>{e.next()})}var Mf,sm;(sm=Mf||(Mf={})).ya="default",sm.Cache="cache";class y0{constructor(e,t,r){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ec(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const r=t!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=ec.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==Mf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e){this.key=e}}class w0{constructor(e){this.key=e}}class lI{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=At(),this.mutatedKeys=At(),this.Ua=M2(e),this.Ka=new Ba(this.Ua)}get Wa(){return this.qa}Ga(e,t){const r=t?t.za:new rm,i=t?t.Ka:this.Ka;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,y)=>{const b=i.get(g),v=Zl(this.query,y)?y:null,M=!!b&&this.mutatedKeys.has(b.key),x=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let F=!1;b&&v?b.data.isEqual(v.data)?M!==x&&(r.track({type:3,doc:v}),F=!0):this.ja(b,v)||(r.track({type:2,doc:v}),F=!0,(l&&this.Ua(v,l)>0||f&&this.Ua(v,f)<0)&&(a=!0)):!b&&v?(r.track({type:0,doc:v}),F=!0):b&&!v&&(r.track({type:1,doc:b}),F=!0,(l||f)&&(a=!0)),F&&(v?(o=o.add(v),s=x?s.add(g):s.delete(g)):(o=o.delete(g),s=s.delete(g)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const g=this.query.limitType==="F"?o.last():o.first();o=o.delete(g.key),s=s.delete(g.key),r.track({type:1,doc:g})}return{Ka:o,za:r,ys:a,mutatedKeys:s}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const o=e.za.da();o.sort((g,y)=>function(v,M){const x=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ot(20277,{Vt:F})}};return x(v)-x(M)}(g.type,y.type)||this.Ua(g.doc,y.doc)),this.Ha(r),i=i!=null&&i;const a=t&&!i?this.Ja():[],l=this.$a.size===0&&this.current&&!i?1:0,f=l!==this.Qa;return this.Qa=l,o.length!==0||f?{snapshot:new ec(this.query,e.Ka,s,o,e.mutatedKeys,l===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:a}:{Ya:a}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new rm,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=At(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const t=[];return e.forEach(r=>{this.$a.has(r)||t.push(new w0(r))}),this.$a.forEach(r=>{e.has(r)||t.push(new _0(r))}),t}Xa(e){this.qa=e.Ns,this.$a=At();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return ec.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const Ud="SyncEngine";class hI{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class fI{constructor(e){this.key=e,this.tu=!1}}class dI{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.nu={},this.ru=new Zo(a=>F2(a),Xl),this.iu=new Map,this.su=new Set,this.ou=new Yt(Ye.comparator),this._u=new Map,this.au=new Pd,this.uu={},this.cu=new Map,this.lu=Za.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function pI(n,e,t=!0){const r=S0(n);let i;const s=r.ru.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.eu()):i=await b0(r,e,t,!0),i}async function gI(n,e){const t=S0(n);await b0(t,e,!0,!1)}async function b0(n,e,t,r){const i=await DE(n.localStore,Pi(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=await mI(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&l0(n.remoteStore,i),a}async function mI(n,e,t,r,i){n.Pu=(y,b,v)=>async function(x,F,P,B){let K=F.view.Ga(P);K.ys&&(K=await Yg(x.localStore,F.query,!1).then(({documents:U})=>F.view.Ga(U,K)));const ie=B&&B.targetChanges.get(F.targetId),le=B&&B.targetMismatches.get(F.targetId)!=null,we=F.view.applyChanges(K,x.isPrimaryClient,ie,le);return am(x,F.targetId,we.Ya),we.snapshot}(n,y,b,v);const s=await Yg(n.localStore,e,!0),o=new lI(e,s.Ns),a=o.Ga(s.documents),l=cu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=o.applyChanges(a,n.isPrimaryClient,l);am(n,t,f.Ya);const g=new hI(e,t,o);return n.ru.set(e,g),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),f.snapshot}async function vI(n,e,t){const r=gt(n),i=r.ru.get(e),s=r.iu.get(i.targetId);if(s.length>1)return r.iu.set(i.targetId,s.filter(o=>!Xl(o,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Df(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&kd(r.remoteStore,i.targetId),Vf(r,i.targetId)}).catch(sc)):(Vf(r,i.targetId),await Df(r.localStore,i.targetId,!0))}async function yI(n,e){const t=gt(n),r=t.ru.get(e),i=t.iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),kd(t.remoteStore,r.targetId))}async function _I(n,e,t){const r=SI(n);try{const i=await function(o,a){const l=gt(o),f=An.now(),g=a.reduce((v,M)=>v.add(M.key),At());let y,b;return l.persistence.runTransaction("Locally write mutations","readwrite",v=>{let M=cs(),x=At();return l.Cs.getEntries(v,g).next(F=>{M=F,M.forEach((P,B)=>{B.isValidDocument()||(x=x.add(P))})}).next(()=>l.localDocuments.getOverlayedDocuments(v,M)).next(F=>{y=F;const P=[];for(const B of a){const K=DA(B,y.get(B.key).overlayedDocument);K!=null&&P.push(new ea(B.key,K,P2(K.value.mapValue),Li.exists(!0)))}return l.mutationQueue.addMutationBatch(v,f,P,a)}).next(F=>{b=F;const P=F.applyToLocalDocumentSet(y,x);return l.documentOverlayCache.saveOverlays(v,F.batchId,P)})}).then(()=>({batchId:b.batchId,changes:U2(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let f=o.uu[o.currentUser.toKey()];f||(f=new Yt(yt)),f=f.insert(a,l),o.uu[o.currentUser.toKey()]=f}(r,i.batchId,t),await lu(r,i.changes),await oh(r.remoteStore)}catch(i){const s=Md(i,"Failed to persist write");t.reject(s)}}async function A0(n,e){const t=gt(n);try{const r=await kE(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t._u.get(s);o&&(xt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.tu=!0:i.modifiedDocuments.size>0?xt(o.tu,14607):i.removedDocuments.size>0&&(xt(o.tu,42227),o.tu=!1))}),await lu(t,r,e)}catch(r){await sc(r)}}function om(n,e,t){const r=gt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.ru.forEach((s,o)=>{const a=o.view.ga(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=gt(o);l.onlineState=a;let f=!1;l.queries.forEach((g,y)=>{for(const b of y.Ra)b.ga(a)&&(f=!0)}),f&&Vd(l)}(r.eventManager,e),i.length&&r.nu.Q_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function wI(n,e,t){const r=gt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r._u.get(e),s=i&&i.key;if(s){let o=new Yt(Ye.comparator);o=o.insert(s,Kn.newNoDocument(s,lt.min()));const a=At().add(s),l=new rh(lt.min(),new Map,new Yt(yt),o,a);await A0(r,l),r.ou=r.ou.remove(s),r._u.delete(e),jd(r)}else await Df(r.localStore,e,!1).then(()=>Vf(r,e,t)).catch(sc)}async function bI(n,e){const t=gt(n),r=e.batch.batchId;try{const i=await CE(t.localStore,e);I0(t,r,null),E0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await lu(t,i)}catch(i){await sc(i)}}async function AI(n,e,t){const r=gt(n);try{const i=await function(o,a){const l=gt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return l.mutationQueue.lookupMutationBatch(f,a).next(y=>(xt(y!==null,37113),g=y.keys(),l.mutationQueue.removeMutationBatch(f,y))).next(()=>l.mutationQueue.performConsistencyCheck(f)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(f,g,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>l.localDocuments.getDocuments(f,g))})}(r.localStore,e);I0(r,e,t),E0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await lu(r,i)}catch(i){await sc(i)}}function E0(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function I0(n,e,t){const r=gt(n);let i=r.uu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.uu[r.currentUser.toKey()]=i}}function Vf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.iu.get(e))n.ru.delete(r),t&&n.nu.Tu(r,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(r=>{n.au.containsKey(r)||T0(n,r)})}function T0(n,e){n.su.delete(e.path.canonicalString());const t=n.ou.get(e);t!==null&&(kd(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),jd(n))}function am(n,e,t){for(const r of t)r instanceof _0?(n.au.addReference(r.key,e),EI(n,r)):r instanceof w0?($e(Ud,"Document no longer in limbo: "+r.key),n.au.removeReference(r.key,e),n.au.containsKey(r.key)||T0(n,r.key)):ot(19791,{Iu:r})}function EI(n,e){const t=e.key,r=t.path.canonicalString();n.ou.get(t)||n.su.has(r)||($e(Ud,"New document in limbo: "+t),n.su.add(r),jd(n))}function jd(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){const e=n.su.values().next().value;n.su.delete(e);const t=new Ye(Jt.fromString(e)),r=n.lu.next();n._u.set(r,new fI(t)),n.ou=n.ou.insert(t,r),l0(n.remoteStore,new Ks(Pi(Ad(t.path)),r,"TargetPurposeLimboResolution",Jl.le))}}async function lu(n,e,t){const r=gt(n),i=[],s=[],o=[];r.ru.isEmpty()||(r.ru.forEach((a,l)=>{o.push(r.Pu(l,e,t).then(f=>{var g;if((f||t)&&r.isPrimaryClient){const y=f?!f.fromCache:(g=t==null?void 0:t.targetChanges.get(l.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(l.targetId,y?"current":"not-current")}if(f){i.push(f);const y=Rd.Ps(l.targetId,f);s.push(y)}}))}),await Promise.all(o),r.nu.Q_(i),await async function(l,f){const g=gt(l);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>Te.forEach(f,b=>Te.forEach(b.ls,v=>g.persistence.referenceDelegate.addReference(y,b.targetId,v)).next(()=>Te.forEach(b.hs,v=>g.persistence.referenceDelegate.removeReference(y,b.targetId,v)))))}catch(y){if(!oc(y))throw y;$e(Cd,"Failed to update sequence numbers: "+y)}for(const y of f){const b=y.targetId;if(!y.fromCache){const v=g.Ss.get(b),M=v.snapshotVersion,x=v.withLastLimboFreeSnapshotVersion(M);g.Ss=g.Ss.insert(b,x)}}}(r.localStore,s))}async function II(n,e){const t=gt(n);if(!t.currentUser.isEqual(e)){$e(Ud,"User change. New user:",e.toKey());const r=await o0(t.localStore,e);t.currentUser=e,function(s,o){s.cu.forEach(a=>{a.forEach(l=>{l.reject(new We(Se.CANCELLED,o))})}),s.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await lu(t,r.Ms)}}function TI(n,e){const t=gt(n),r=t._u.get(e);if(r&&r.tu)return At().add(r.key);{let i=At();const s=t.iu.get(e);if(!s)return i;for(const o of s){const a=t.ru.get(o);i=i.unionWith(a.view.Wa)}return i}}function S0(n){const e=gt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=A0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wI.bind(null,e),e.nu.Q_=cI.bind(null,e.eventManager),e.nu.Tu=uI.bind(null,e.eventManager),e}function SI(n){const e=gt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AI.bind(null,e),e}class Cl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ih(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return RE(this.persistence,new NE,e.initialUser,this.serializer)}Ru(e){return new s0(Ld.Ei,this.serializer)}Au(e){return new ME}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cl.provider={build:()=>new Cl};class NI extends Cl{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){xt(this.persistence.referenceDelegate instanceof Ll,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new fE(r,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?hr.withCacheSize(this.cacheSizeBytes):hr.DEFAULT;return new s0(r=>Ll.Ei(r,t),this.serializer)}}class Uf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>om(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=II.bind(null,this.syncEngine),await sI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new aI}()}createDatastore(e){const t=ih(e.databaseInfo.databaseId),r=function(s){return new qE(s)}(e.databaseInfo);return function(s,o,a,l){return new WE(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new KE(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>om(this.syncEngine,t,0),function(){return em.C()?new em:new VE}())}createSyncEngine(e,t){return function(i,s,o,a,l,f,g){const y=new dI(i,s,o,a,l,f);return g&&(y.hu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=gt(i);$e(Wo,"RemoteStore shutting down."),s.aa.add(5),await uu(s),s.ca.shutdown(),s.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Uf.provider={build:()=>new Uf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):as("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo="FirestoreClient";class PI{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Wn.UNAUTHENTICATED,this.clientId=y2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{$e(oo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>($e(oo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Md(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Kh(n,e){n.asyncQueue.verifyOperationInProgress(),$e(oo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await o0(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function cm(n,e){n.asyncQueue.verifyOperationInProgress();const t=await LI(n);$e(oo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>nm(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>nm(e.remoteStore,i)),n._onlineComponents=e}async function LI(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){$e(oo,"Using user provided OfflineComponentProvider");try{await Kh(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===Se.FAILED_PRECONDITION||i.code===Se.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Ja("Error using user provided cache. Falling back to memory cache: "+t),await Kh(n,new Cl)}}else $e(oo,"Using default OfflineComponentProvider"),await Kh(n,new NI(void 0));return n._offlineComponents}async function P0(n){return n._onlineComponents||(n._uninitializedComponentsProvider?($e(oo,"Using user provided OnlineComponentProvider"),await cm(n,n._uninitializedComponentsProvider._online)):($e(oo,"Using default OnlineComponentProvider"),await cm(n,new Uf))),n._onlineComponents}function RI(n){return P0(n).then(e=>e.syncEngine)}async function L0(n){const e=await P0(n),t=e.eventManager;return t.onListen=pI.bind(null,e.syncEngine),t.onUnlisten=vI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=gI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=yI.bind(null,e.syncEngine),t}function CI(n,e,t={}){const r=new is;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,f){const g=new N0({next:b=>{g.yu(),o.enqueueAndForget(()=>v0(s,y));const v=b.docs.has(a);!v&&b.fromCache?f.reject(new We(Se.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&b.fromCache&&l&&l.source==="server"?f.reject(new We(Se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(b)},error:b=>f.reject(b)}),y=new y0(Ad(a.path),g,{includeMetadataChanges:!0,Fa:!0});return m0(s,y)}(await L0(n),n.asyncQueue,e,t,r)),r.promise}function kI(n,e,t={}){const r=new is;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,f){const g=new N0({next:b=>{g.yu(),o.enqueueAndForget(()=>v0(s,y)),b.fromCache&&l.source==="server"?f.reject(new We(Se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(b)},error:b=>f.reject(b)}),y=new y0(a,g,{includeMetadataChanges:!0,Fa:!0});return m0(s,y)}(await L0(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(n,e,t){if(!t)throw new We(Se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function xI(n,e,t,r){if(e===!0&&r===!0)throw new We(Se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function lm(n){if(!Ye.isDocumentKey(n))throw new We(Se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function hm(n){if(Ye.isDocumentKey(n))throw new We(Se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ah(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ot(12329,{type:typeof n})}function ao(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new We(Se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ah(n);throw new We(Se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0="firestore.googleapis.com",fm=!0;class dm{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new We(Se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=k0,this.ssl=fm}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:fm;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=i0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lE)throw new We(Se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=R0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new We(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new We(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new We(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ch{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new We(Se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new We(Se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Bb;switch(r.type){case"firstParty":return new Hb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new We(Se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=um.get(t);r&&($e("ComponentProvider","Removing Datastore"),um.delete(t),r.terminate())}(this),Promise.resolve()}}function OI(n,e,t,r={}){var i;const s=(n=ao(n,ch))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;s.host!==k0&&s.host!==a&&Ja("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},s),{host:a,ssl:!1,emulatorOptions:r});if(!zo(l,o)&&(n._setSettings(l),r.mockUserToken)){let f,g;if(typeof r.mockUserToken=="string")f=r.mockUserToken,g=Wn.MOCK_USER;else{f=b1(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new We(Se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Wn(y)}n._authCredentials=new qb(new m2(f,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new cc(this.firestore,e,this._query)}}class dr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new eo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dr(this.firestore,e,this._key)}}class eo extends cc{constructor(e,t,r){super(e,t,Ad(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dr(this.firestore,null,new Ye(e))}withConverter(e){return new eo(this.firestore,e,this._path)}}function Bd(n,e,...t){if(n=_n(n),C0("collection","path",e),n instanceof ch){const r=Jt.fromString(e,...t);return hm(r),new eo(n,null,r)}{if(!(n instanceof dr||n instanceof eo))throw new We(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return hm(r),new eo(n.firestore,null,r)}}function uc(n,e,...t){if(n=_n(n),arguments.length===1&&(e=y2.newId()),C0("doc","path",e),n instanceof ch){const r=Jt.fromString(e,...t);return lm(r),new dr(n,null,new Ye(r))}{if(!(n instanceof dr||n instanceof eo))throw new We(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return lm(r),new dr(n.firestore,n instanceof eo?n.converter:null,new Ye(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="AsyncQueue";class gm{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new c0(this,"async_queue_retry"),this.ju=()=>{const r=Gh();r&&$e(pm,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const t=Gh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=Gh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new is;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!oc(e))throw e;$e(pm,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,as("INTERNAL UNHANDLED ERROR: ",mm(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=t,t}enqueueAfterDelay(e,t,r){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const i=Fd.createAndSchedule(this,e,t,r,s=>this.Xu(s));return this.Uu.push(i),i}Ju(){this.Ku&&ot(47125,{ec:mm(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function mm(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class hu extends ch{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new gm,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gm(e),this._firestoreClient=void 0,await e}}}function DI(n,e){const t=typeof n=="object"?n:$l(),r=typeof n=="string"?n:Al,i=Qo(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=y1("firestore");s&&OI(i,...s)}return i}function qd(n){if(n._terminated)throw new We(Se.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||FI(n),n._firestoreClient}function FI(n){var e,t,r;const i=n._freezeSettings(),s=function(a,l,f,g){return new oA(a,l,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,R0(g.experimentalLongPollingOptions),g.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new PI(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tc(Fn.fromBase64String(e))}catch(t){throw new We(Se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new tc(Fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new We(Se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new We(Se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new We(Se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return yt(this._lat,e._lat)||yt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=/^__.*__$/;class x0{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ea(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function O0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ot(40011,{oc:n})}}class Wd{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this._c(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new Wd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i.lc(e),i}hc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i._c(),i}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return kl(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(O0(this.oc)&&MI.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class VI{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ih(e)}dc(e,t,r,i=!1){return new Wd({oc:e,methodName:t,Ec:r,path:Dn.emptyPath(),cc:!1,Ic:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function D0(n){const e=n._freezeSettings(),t=ih(n._databaseId);return new VI(n._databaseId,!!e.ignoreUndefinedProperties,t)}class lh extends zd{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lh}}function UI(n,e,t,r){const i=n.dc(1,e,t);M0("Data must be an object, but it was:",i,r);const s=[],o=Ir.empty();go(r,(l,f)=>{const g=Gd(e,l,t);f=_n(f);const y=i.hc(g);if(f instanceof lh)s.push(g);else{const b=fu(f,y);b!=null&&(s.push(g),o.set(g,b))}});const a=new ti(s);return new x0(o,a,i.fieldTransforms)}function jI(n,e,t,r,i,s){const o=n.dc(1,e,t),a=[vm(e,r,t)],l=[i];if(s.length%2!=0)throw new We(Se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<s.length;b+=2)a.push(vm(e,s[b])),l.push(s[b+1]);const f=[],g=Ir.empty();for(let b=a.length-1;b>=0;--b)if(!$I(f,a[b])){const v=a[b];let M=l[b];M=_n(M);const x=o.hc(v);if(M instanceof lh)f.push(v);else{const F=fu(M,x);F!=null&&(f.push(v),g.set(v,F))}}const y=new ti(f);return new x0(g,y,o.fieldTransforms)}function BI(n,e,t,r=!1){return fu(t,n.dc(r?4:3,e))}function fu(n,e){if(F0(n=_n(n)))return M0("Unsupported field value:",e,n),qI(n,e);if(n instanceof zd)return function(r,i){if(!O0(i.oc))throw i.Tc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Tc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=fu(a,i.Pc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=_n(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return LA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=An.fromDate(r);return{timestampValue:Pl(i.serializer,s)}}if(r instanceof An){const s=new An(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Pl(i.serializer,s)}}if(r instanceof $d)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof tc)return{bytesValue:Y2(i.serializer,r._byteString)};if(r instanceof dr){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Tc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Nd(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Hd)return function(o,a){return{mapValue:{fields:{[S2]:{stringValue:N2},[El]:{arrayValue:{values:o.toArray().map(f=>{if(typeof f!="number")throw a.Tc("VectorValues must only contain numeric values.");return Ed(a.serializer,f)})}}}}}}(r,i);throw i.Tc(`Unsupported field value: ${ah(r)}`)}(n,e)}function qI(n,e){const t={};return w2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):go(n,(r,i)=>{const s=fu(i,e.uc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function F0(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof An||n instanceof $d||n instanceof tc||n instanceof dr||n instanceof zd||n instanceof Hd)}function M0(n,e,t){if(!F0(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=ah(t);throw r==="an object"?e.Tc(n+" a custom object"):e.Tc(n+" "+r)}}function vm(n,e,t){if((e=_n(e))instanceof uh)return e._internalPath;if(typeof e=="string")return Gd(n,e);throw kl("Field path arguments must be of type string or ",n,!1,void 0,t)}const zI=new RegExp("[~\\*/\\[\\]]");function Gd(n,e,t){if(e.search(zI)>=0)throw kl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new uh(...e.split("."))._internalPath}catch{throw kl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function kl(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new We(Se.INVALID_ARGUMENT,a+n+l)}function $I(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new dr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Kd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class HI extends V0{data(){return super.data()}}function Kd(n,e){return typeof e=="string"?Gd(n,e):e instanceof uh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new We(Se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jd{}class GI extends Jd{}function jf(n,e,...t){let r=[];e instanceof Jd&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof Qd).length,a=s.filter(l=>l instanceof hh).length;if(o>1||o>0&&a>0)throw new We(Se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class hh extends GI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new hh(e,t,r)}_apply(e){const t=this._parse(e);return j0(e._query,t),new cc(e.firestore,e.converter,Lf(e._query,t))}_parse(e){const t=D0(e.firestore);return function(s,o,a,l,f,g,y){let b;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new We(Se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){_m(y,g);const M=[];for(const x of y)M.push(ym(l,s,x));b={arrayValue:{values:M}}}else b=ym(l,s,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||_m(y,g),b=BI(a,o,y,g==="in"||g==="not-in");return yn.create(f,g,b)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function U0(n,e,t){const r=e,i=Kd("where",n);return hh._create(i,r,t)}class Qd extends Jd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Qd(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:si.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)j0(o,l),o=Lf(o,l)}(e._query,t),new cc(e.firestore,e.converter,Lf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function ym(n,e,t){if(typeof(t=_n(t))=="string"){if(t==="")throw new We(Se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!D2(e)&&t.indexOf("/")!==-1)throw new We(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Jt.fromString(t));if(!Ye.isDocumentKey(r))throw new We(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kg(n,new Ye(r))}if(t instanceof dr)return kg(n,t._key);throw new We(Se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ah(t)}.`)}function _m(n,e){if(!Array.isArray(n)||n.length===0)throw new We(Se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function j0(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new We(Se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new We(Se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class KI{convertValue(e,t="none"){switch(io(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ro(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ot(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return go(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[El].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>cn(o.doubleValue));return new Hd(s)}convertGeoPoint(e){return new $d(cn(e.latitude),cn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Yl(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Qc(e));default:return null}}convertTimestamp(e){const t=no(e);return new An(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Jt.fromString(e);xt(r0(r),9688,{name:e});const i=new Yc(r.get(1),r.get(3)),s=new Ye(r.popFirst(5));return i.isEqual(t)||as(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class B0 extends V0{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ol(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Kd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class ol extends B0{data(e={}){return super.data(e)}}class JI{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Fc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ol(this._firestore,this._userDataWriter,r.key,r,new Fc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new We(Se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new ol(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new ol(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,g=-1;return a.type!==0&&(f=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),g=o.indexOf(a.doc.key)),{type:QI(a.type),doc:l,oldIndex:f,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function QI(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ot(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(n){n=ao(n,dr);const e=ao(n.firestore,hu);return CI(qd(e),n._key).then(t=>YI(e,n,t))}class z0 extends KI{constructor(e){super(),this.firestore=e}convertBytes(e){return new tc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dr(this.firestore,null,t)}}function Yd(n){n=ao(n,cc);const e=ao(n.firestore,hu),t=qd(e),r=new z0(e);return WI(n._query),kI(t,n._query).then(i=>new JI(e,r,n,i))}function $0(n,e,t,...r){n=ao(n,dr);const i=ao(n.firestore,hu),s=D0(i);let o;return o=typeof(e=_n(e))=="string"||e instanceof uh?jI(s,"updateDoc",n._key,e,t,r):UI(s,"updateDoc",n._key,e),W0(i,[o.toMutation(n._key,Li.exists(!0))])}function H0(n){return W0(ao(n.firestore,hu),[new Id(n._key,Li.none())])}function W0(n,e){return function(r,i){const s=new is;return r.asyncQueue.enqueueAndForget(async()=>_I(await RI(r),i,s)),s.promise}(qd(n),e)}function YI(n,e,t){const r=t.docs.get(e._key),i=new z0(n);return new B0(n,i,e._key,r,new Fc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){ic=i})(Yo),ki(new ri("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new hu(new zb(r.getProvider("auth-internal")),new Wb(o,r.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new We(Se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yc(f.options.projectId,g)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),fr(wg,bg,e),fr(wg,bg,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0="firebasestorage.googleapis.com",XI="storageBucket",ZI=2*60*1e3,e4=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends oi{constructor(e,t,r=0){super(Jh(e),`Firebase Storage: ${t} (${Jh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Di.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Jh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Oi;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Oi||(Oi={}));function Jh(n){return"storage/"+n}function t4(){const n="An unknown error occurred, please check the error payload for server response.";return new Di(Oi.UNKNOWN,n)}function n4(){return new Di(Oi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function r4(){return new Di(Oi.CANCELED,"User canceled the upload/download.")}function i4(n){return new Di(Oi.INVALID_URL,"Invalid URL '"+n+"'.")}function s4(n){return new Di(Oi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function wm(n){return new Di(Oi.INVALID_ARGUMENT,n)}function K0(){return new Di(Oi.APP_DELETED,"The Firebase app was deleted.")}function o4(n){return new Di(Oi.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ni.makeFromUrl(e,t)}catch{return new ni(e,"")}if(r.path==="")return r;throw s4(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(ie){ie.path.charAt(ie.path.length-1)==="/"&&(ie.path_=ie.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function f(ie){ie.path_=decodeURIComponent(ie.path)}const g="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",v=new RegExp(`^https?://${y}/${g}/b/${i}/o${b}`,"i"),M={bucket:1,path:3},x=t===G0?"(?:storage.googleapis.com|storage.cloud.google.com)":t,F="([^?#]*)",P=new RegExp(`^https?://${x}/${i}/${F}`,"i"),K=[{regex:a,indices:l,postModify:s},{regex:v,indices:M,postModify:f},{regex:P,indices:{bucket:1,path:2},postModify:f}];for(let ie=0;ie<K.length;ie++){const le=K[ie],we=le.regex.exec(e);if(we){const U=we[le.indices.bucket];let I=we[le.indices.path];I||(I=""),r=new ni(U,I),le.postModify(r);break}}if(r==null)throw i4(e);return r}}class a4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c4(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let f=!1;function g(...F){f||(f=!0,e.apply(null,F))}function y(F){i=setTimeout(()=>{i=null,n(v,l())},F)}function b(){s&&clearTimeout(s)}function v(F,...P){if(f){b();return}if(F){b(),g.call(null,F,...P);return}if(l()||o){b(),g.call(null,F,...P);return}r<64&&(r*=2);let K;a===1?(a=2,K=0):K=(r+Math.random())*1e3,y(K)}let M=!1;function x(F){M||(M=!0,b(),!f&&(i!==null?(F||(a=2),clearTimeout(i),y(0)):F||(a=1)))}return y(0),s=setTimeout(()=>{o=!0,x(!0)},t),x}function u4(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l4(n){return n!==void 0}function bm(n,e,t,r){if(r<e)throw wm(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw wm(`Invalid value for '${n}'. Expected ${t} or less.`)}function h4(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var xl;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(xl||(xl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e,t,r,i,s,o,a,l,f,g,y,b=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=y,this.retry=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,M)=>{this.resolve_=v,this.reject_=M,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new $u(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,f=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,f)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===xl.NO_ERROR,l=s.getStatus();if(!a||f4(l,this.additionalRetryCodes_)&&this.retry){const g=s.getErrorCode()===xl.ABORT;r(!1,new $u(!1,null,g));return}const f=this.successCodes_.indexOf(l)!==-1;r(!0,new $u(f,s))})},t=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());l4(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=t4();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?K0():r4();o(l)}else{const l=n4();o(l)}};this.canceled_?t(!1,new $u(!1,null,!0)):this.backoffId_=c4(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&u4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class $u{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function p4(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function g4(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function m4(n,e){e&&(n["X-Firebase-GMPID"]=e)}function v4(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function y4(n,e,t,r,i,s,o=!0){const a=h4(n.urlParams),l=n.url+a,f=Object.assign({},n.headers);return m4(f,e),p4(f,t),g4(f,s),v4(f,r),new d4(l,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _4(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function w4(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,t){this._service=e,t instanceof ni?this._location=t:this._location=ni.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ol(e,t)}get root(){const e=new ni(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return w4(this._location.path)}get storage(){return this._service}get parent(){const e=_4(this._location.path);if(e===null)return null;const t=new ni(this._location.bucket,e);return new Ol(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw o4(e)}}function Am(n,e){const t=e==null?void 0:e[XI];return t==null?null:ni.makeFromBucketSpec(t,n)}function b4(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:b1(i,n.app.options.projectId))}class A4{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=G0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ZI,this._maxUploadRetryTime=e4,this._requests=new Set,i!=null?this._bucket=ni.makeFromBucketSpec(i,this._host):this._bucket=Am(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ni.makeFromBucketSpec(this._url,e):this._bucket=Am(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){bm("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){bm("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Mr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ol(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new a4(K0());{const o=y4(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const Em="@firebase/storage",Im="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="storage";function E4(n=$l(),e){n=_n(n);const r=Qo(n,J0).getImmediate({identifier:e}),i=y1("storage");return i&&I4(r,...i),r}function I4(n,e,t,r={}){b4(n,e,t,r)}function T4(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new A4(t,r,i,e,Yo)}function S4(){ki(new ri(J0,T4,"PUBLIC").setMultipleInstances(!0)),fr(Em,Im,""),fr(Em,Im,"esm2017")}S4();var Bf,Tm,fh=function(){var n=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(n&&n.responseStart>0&&n.responseStart<performance.now())return n},Q0=function(n){if(document.readyState==="loading")return"loading";var e=fh();if(e){if(n<e.domInteractive)return"loading";if(e.domContentLoadedEventStart===0||n<e.domContentLoadedEventStart)return"dom-interactive";if(e.domComplete===0||n<e.domComplete)return"dom-content-loaded"}return"complete"},N4=function(n){var e=n.nodeName;return n.nodeType===1?e.toLowerCase():e.toUpperCase().replace(/^#/,"")},Xd=function(n,e){var t="";try{for(;n&&n.nodeType!==9;){var r=n,i=r.id?"#"+r.id:N4(r)+(r.classList&&r.classList.value&&r.classList.value.trim()&&r.classList.value.trim().length?"."+r.classList.value.trim().replace(/\s+/g,"."):"");if(t.length+i.length>(e||100)-1)return t||i;if(t=t?i+">"+t:i,r.id)break;n=r.parentNode}}catch{}return t},Y0=-1,P4=function(){return Y0},du=function(n){addEventListener("pageshow",function(e){e.persisted&&(Y0=e.timeStamp,n(e))},!0)},Zd=function(){var n=fh();return n&&n.activationStart||0},co=function(n,e){var t=fh(),r="navigate";return P4()>=0?r="back-forward-cache":t&&(document.prerendering||Zd()>0?r="prerender":document.wasDiscarded?r="restore":t.type&&(r=t.type.replace(/_/g,"-"))),{name:n,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},lc=function(n,e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(n)){var r=new PerformanceObserver(function(i){Promise.resolve().then(function(){e(i.getEntries())})});return r.observe(Object.assign({type:n,buffered:!0},t||{})),r}}catch{}},uo=function(n,e,t,r){var i,s;return function(o){e.value>=0&&(o||r)&&((s=e.value-(i||0))||i===void 0)&&(i=e.value,e.delta=s,e.rating=function(a,l){return a>l[1]?"poor":a>l[0]?"needs-improvement":"good"}(e.value,t),n(e))}},ep=function(n){requestAnimationFrame(function(){return requestAnimationFrame(function(){return n()})})},dh=function(n){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&n()})},tp=function(n){var e=!1;return function(){e||(n(),e=!0)}},Fa=-1,Sm=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},Dl=function(n){document.visibilityState==="hidden"&&Fa>-1&&(Fa=n.type==="visibilitychange"?n.timeStamp:0,L4())},Nm=function(){addEventListener("visibilitychange",Dl,!0),addEventListener("prerenderingchange",Dl,!0)},L4=function(){removeEventListener("visibilitychange",Dl,!0),removeEventListener("prerenderingchange",Dl,!0)},X0=function(){return Fa<0&&(Fa=Sm(),Nm(),du(function(){setTimeout(function(){Fa=Sm(),Nm()},0)})),{get firstHiddenTime(){return Fa}}},np=function(n){document.prerendering?addEventListener("prerenderingchange",function(){return n()},!0):n()},Pm=[1800,3e3],R4=function(n,e){e=e||{},np(function(){var t,r=X0(),i=co("FCP"),s=lc("paint",function(o){o.forEach(function(a){a.name==="first-contentful-paint"&&(s.disconnect(),a.startTime<r.firstHiddenTime&&(i.value=Math.max(a.startTime-Zd(),0),i.entries.push(a),t(!0)))})});s&&(t=uo(n,i,Pm,e.reportAllChanges),du(function(o){i=co("FCP"),t=uo(n,i,Pm,e.reportAllChanges),ep(function(){i.value=performance.now()-o.timeStamp,t(!0)})}))})},Lm=[.1,.25],C4=function(n,e){(function(t,r){r=r||{},R4(tp(function(){var i,s=co("CLS",0),o=0,a=[],l=function(g){g.forEach(function(y){if(!y.hadRecentInput){var b=a[0],v=a[a.length-1];o&&y.startTime-v.startTime<1e3&&y.startTime-b.startTime<5e3?(o+=y.value,a.push(y)):(o=y.value,a=[y])}}),o>s.value&&(s.value=o,s.entries=a,i())},f=lc("layout-shift",l);f&&(i=uo(t,s,Lm,r.reportAllChanges),dh(function(){l(f.takeRecords()),i(!0)}),du(function(){o=0,s=co("CLS",0),i=uo(t,s,Lm,r.reportAllChanges),ep(function(){return i()})}),setTimeout(i,0))}))})(function(t){var r=function(i){var s,o={};if(i.entries.length){var a=i.entries.reduce(function(f,g){return f&&f.value>g.value?f:g});if(a&&a.sources&&a.sources.length){var l=(s=a.sources).find(function(f){return f.node&&f.node.nodeType===1})||s[0];l&&(o={largestShiftTarget:Xd(l.node),largestShiftTime:a.startTime,largestShiftValue:a.value,largestShiftSource:l,largestShiftEntry:a,loadState:Q0(a.startTime)})}}return Object.assign(i,{attribution:o})}(t);n(r)},e)},Z0=0,Qh=1/0,Hu=0,k4=function(n){n.forEach(function(e){e.interactionId&&(Qh=Math.min(Qh,e.interactionId),Hu=Math.max(Hu,e.interactionId),Z0=Hu?(Hu-Qh)/7+1:0)})},e5=function(){return Bf?Z0:performance.interactionCount||0},x4=function(){"interactionCount"in performance||Bf||(Bf=lc("event",k4,{type:"event",buffered:!0,durationThreshold:0}))},Zr=[],qc=new Map,t5=0,O4=function(){var n=Math.min(Zr.length-1,Math.floor((e5()-t5)/50));return Zr[n]},n5=[],D4=function(n){if(n5.forEach(function(i){return i(n)}),n.interactionId||n.entryType==="first-input"){var e=Zr[Zr.length-1],t=qc.get(n.interactionId);if(t||Zr.length<10||n.duration>e.latency){if(t)n.duration>t.latency?(t.entries=[n],t.latency=n.duration):n.duration===t.latency&&n.startTime===t.entries[0].startTime&&t.entries.push(n);else{var r={id:n.interactionId,latency:n.duration,entries:[n]};qc.set(r.id,r),Zr.push(r)}Zr.sort(function(i,s){return s.latency-i.latency}),Zr.length>10&&Zr.splice(10).forEach(function(i){return qc.delete(i.id)})}}},rp=function(n){var e=self.requestIdleCallback||self.setTimeout,t=-1;return n=tp(n),document.visibilityState==="hidden"?n():(t=e(n),dh(n)),t},Rm=[200,500],F4=function(n,e){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(e=e||{},np(function(){var t;x4();var r,i=co("INP"),s=function(a){rp(function(){a.forEach(D4);var l=O4();l&&l.latency!==i.value&&(i.value=l.latency,i.entries=l.entries,r())})},o=lc("event",s,{durationThreshold:(t=e.durationThreshold)!==null&&t!==void 0?t:40});r=uo(n,i,Rm,e.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),dh(function(){s(o.takeRecords()),r(!0)}),du(function(){t5=e5(),Zr.length=0,qc.clear(),i=co("INP"),r=uo(n,i,Rm,e.reportAllChanges)}))}))},qa=[],Gs=[],qf=0,ip=new WeakMap,za=new Map,zf=-1,M4=function(n){qa=qa.concat(n),r5()},r5=function(){zf<0&&(zf=rp(V4))},V4=function(){za.size>10&&za.forEach(function(o,a){qc.has(a)||za.delete(a)});var n=Zr.map(function(o){return ip.get(o.entries[0])}),e=Gs.length-50;Gs=Gs.filter(function(o,a){return a>=e||n.includes(o)});for(var t=new Set,r=0;r<Gs.length;r++){var i=Gs[r];i5(i.startTime,i.processingEnd).forEach(function(o){t.add(o)})}var s=qa.length-1-50;qa=qa.filter(function(o,a){return o.startTime>qf&&a>s||t.has(o)}),zf=-1};n5.push(function(n){n.interactionId&&n.target&&!za.has(n.interactionId)&&za.set(n.interactionId,n.target)},function(n){var e,t=n.startTime+n.duration;qf=Math.max(qf,n.processingEnd);for(var r=Gs.length-1;r>=0;r--){var i=Gs[r];if(Math.abs(t-i.renderTime)<=8){(e=i).startTime=Math.min(n.startTime,e.startTime),e.processingStart=Math.min(n.processingStart,e.processingStart),e.processingEnd=Math.max(n.processingEnd,e.processingEnd),e.entries.push(n);break}}e||(e={startTime:n.startTime,processingStart:n.processingStart,processingEnd:n.processingEnd,renderTime:t,entries:[n]},Gs.push(e)),(n.interactionId||n.entryType==="first-input")&&ip.set(n,e),r5()});var i5=function(n,e){for(var t,r=[],i=0;t=qa[i];i++)if(!(t.startTime+t.duration<n)){if(t.startTime>e)break;r.push(t)}return r},U4=function(n,e){Tm||(Tm=lc("long-animation-frame",M4)),F4(function(t){var r=function(i){var s=i.entries[0],o=ip.get(s),a=s.processingStart,l=o.processingEnd,f=o.entries.sort(function(F,P){return F.processingStart-P.processingStart}),g=i5(s.startTime,l),y=i.entries.find(function(F){return F.target}),b=y&&y.target||za.get(s.interactionId),v=[s.startTime+s.duration,l].concat(g.map(function(F){return F.startTime+F.duration})),M=Math.max.apply(Math,v),x={interactionTarget:Xd(b),interactionTargetElement:b,interactionType:s.name.startsWith("key")?"keyboard":"pointer",interactionTime:s.startTime,nextPaintTime:M,processedEventEntries:f,longAnimationFrameEntries:g,inputDelay:a-s.startTime,processingDuration:l-a,presentationDelay:Math.max(M-l,0),loadState:Q0(s.startTime)};return Object.assign(i,{attribution:x})}(t);n(r)},e)},Cm=[2500,4e3],Yh={},j4=function(n,e){(function(t,r){r=r||{},np(function(){var i,s=X0(),o=co("LCP"),a=function(g){r.reportAllChanges||(g=g.slice(-1)),g.forEach(function(y){y.startTime<s.firstHiddenTime&&(o.value=Math.max(y.startTime-Zd(),0),o.entries=[y],i())})},l=lc("largest-contentful-paint",a);if(l){i=uo(t,o,Cm,r.reportAllChanges);var f=tp(function(){Yh[o.id]||(a(l.takeRecords()),l.disconnect(),Yh[o.id]=!0,i(!0))});["keydown","click"].forEach(function(g){addEventListener(g,function(){return rp(f)},{once:!0,capture:!0})}),dh(f),du(function(g){o=co("LCP"),i=uo(t,o,Cm,r.reportAllChanges),ep(function(){o.value=performance.now()-g.timeStamp,Yh[o.id]=!0,i(!0)})})}})})(function(t){var r=function(i){var s={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:i.value};if(i.entries.length){var o=fh();if(o){var a=o.activationStart||0,l=i.entries[i.entries.length-1],f=l.url&&performance.getEntriesByType("resource").filter(function(M){return M.name===l.url})[0],g=Math.max(0,o.responseStart-a),y=Math.max(g,f?(f.requestStart||f.startTime)-a:0),b=Math.max(y,f?f.responseEnd-a:0),v=Math.max(b,l.startTime-a);s={element:Xd(l.element),timeToFirstByte:g,resourceLoadDelay:y-g,resourceLoadDuration:b-y,elementRenderDelay:v-b,navigationEntry:o,lcpEntry:l},l.url&&(s.url=l.url),f&&(s.lcpResourceEntry=f)}}return Object.assign(i,{attribution:s})}(t);n(r)},e)};const s5="@firebase/installations",sp="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5=1e4,a5=`w:${sp}`,c5="FIS_v2",B4="https://firebaseinstallations.googleapis.com/v1",q4=60*60*1e3,z4="installations",$4="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Go=new Jo(z4,$4,H4);function u5(n){return n instanceof oi&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5({projectId:n}){return`${B4}/projects/${n}/installations`}function h5(n){return{token:n.token,requestStatus:2,expiresIn:G4(n.expiresIn),creationTime:Date.now()}}async function f5(n,e){const r=(await e.json()).error;return Go.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function d5({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function W4(n,{refreshToken:e}){const t=d5(n);return t.append("Authorization",K4(e)),t}async function p5(n){const e=await n();return e.status>=500&&e.status<600?n():e}function G4(n){return Number(n.replace("s","000"))}function K4(n){return`${c5} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J4({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=l5(n),i=d5(n),s=e.getImmediate({optional:!0});if(s){const f=await s.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const o={fid:t,authVersion:c5,appId:n.appId,sdkVersion:a5},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await p5(()=>fetch(r,a));if(l.ok){const f=await l.json();return{fid:f.fid||t,registrationStatus:2,refreshToken:f.refreshToken,authToken:h5(f.authToken)}}else throw await f5("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g5(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q4(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4=/^[cdef][\w-]{21}$/,$f="";function X4(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=Z4(n);return Y4.test(t)?t:$f}catch{return $f}}function Z4(n){return Q4(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5=new Map;function v5(n,e){const t=ph(n);y5(t,e),eT(t,e)}function y5(n,e){const t=m5.get(n);if(t)for(const r of t)r(e)}function eT(n,e){const t=tT();t&&t.postMessage({key:n,fid:e}),nT()}let jo=null;function tT(){return!jo&&"BroadcastChannel"in self&&(jo=new BroadcastChannel("[Firebase] FID Change"),jo.onmessage=n=>{y5(n.data.key,n.data.fid)}),jo}function nT(){m5.size===0&&jo&&(jo.close(),jo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="firebase-installations-database",iT=1,Ko="firebase-installations-store";let Xh=null;function op(){return Xh||(Xh=S1(rT,iT,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Ko)}}})),Xh}async function Fl(n,e){const t=ph(n),i=(await op()).transaction(Ko,"readwrite"),s=i.objectStore(Ko),o=await s.get(t);return await s.put(e,t),await i.done,(!o||o.fid!==e.fid)&&v5(n,e.fid),e}async function _5(n){const e=ph(n),r=(await op()).transaction(Ko,"readwrite");await r.objectStore(Ko).delete(e),await r.done}async function gh(n,e){const t=ph(n),i=(await op()).transaction(Ko,"readwrite"),s=i.objectStore(Ko),o=await s.get(t),a=e(o);return a===void 0?await s.delete(t):await s.put(a,t),await i.done,a&&(!o||o.fid!==a.fid)&&v5(n,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ap(n){let e;const t=await gh(n.appConfig,r=>{const i=sT(r),s=oT(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===$f?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function sT(n){const e=n||{fid:X4(),registrationStatus:0};return w5(e)}function oT(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Go.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=aT(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:cT(n)}:{installationEntry:e}}async function aT(n,e){try{const t=await J4(n,e);return Fl(n.appConfig,t)}catch(t){throw u5(t)&&t.customData.serverCode===409?await _5(n.appConfig):await Fl(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function cT(n){let e=await km(n.appConfig);for(;e.registrationStatus===1;)await g5(100),e=await km(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await ap(n);return r||t}return e}function km(n){return gh(n,e=>{if(!e)throw Go.create("installation-not-found");return w5(e)})}function w5(n){return uT(n)?{fid:n.fid,registrationStatus:0}:n}function uT(n){return n.registrationStatus===1&&n.registrationTime+o5<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lT({appConfig:n,heartbeatServiceProvider:e},t){const r=hT(n,t),i=W4(n,t),s=e.getImmediate({optional:!0});if(s){const f=await s.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const o={installation:{sdkVersion:a5,appId:n.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await p5(()=>fetch(r,a));if(l.ok){const f=await l.json();return h5(f)}else throw await f5("Generate Auth Token",l)}function hT(n,{fid:e}){return`${l5(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cp(n,e=!1){let t;const r=await gh(n.appConfig,s=>{if(!b5(s))throw Go.create("not-registered");const o=s.authToken;if(!e&&pT(o))return s;if(o.requestStatus===1)return t=fT(n,e),s;{if(!navigator.onLine)throw Go.create("app-offline");const a=mT(s);return t=dT(n,a),a}});return t?await t:r.authToken}async function fT(n,e){let t=await xm(n.appConfig);for(;t.authToken.requestStatus===1;)await g5(100),t=await xm(n.appConfig);const r=t.authToken;return r.requestStatus===0?cp(n,e):r}function xm(n){return gh(n,e=>{if(!b5(e))throw Go.create("not-registered");const t=e.authToken;return vT(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function dT(n,e){try{const t=await lT(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await Fl(n.appConfig,r),t}catch(t){if(u5(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await _5(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Fl(n.appConfig,r)}throw t}}function b5(n){return n!==void 0&&n.registrationStatus===2}function pT(n){return n.requestStatus===2&&!gT(n)}function gT(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+q4}function mT(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function vT(n){return n.requestStatus===1&&n.requestTime+o5<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yT(n){const e=n,{installationEntry:t,registrationPromise:r}=await ap(e);return r?r.catch(console.error):cp(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _T(n,e=!1){const t=n;return await wT(t),(await cp(t,e)).token}async function wT(n){const{registrationPromise:e}=await ap(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(n){if(!n||!n.options)throw Zh("App Configuration");if(!n.name)throw Zh("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Zh(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Zh(n){return Go.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5="installations",AT="installations-internal",ET=n=>{const e=n.getProvider("app").getImmediate(),t=bT(e),r=Qo(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},IT=n=>{const e=n.getProvider("app").getImmediate(),t=Qo(e,A5).getImmediate();return{getId:()=>yT(t),getToken:i=>_T(t,i)}};function TT(){ki(new ri(A5,ET,"PUBLIC")),ki(new ri(AT,IT,"PRIVATE"))}TT();fr(s5,sp);fr(s5,sp,"esm2017");const Om="@firebase/performance",Hf="0.7.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5=Hf,ST="FB-PERF-TRACE-START",NT="FB-PERF-TRACE-STOP",Wf="FB-PERF-TRACE-MEASURE",I5="_wt_",T5="_fp",S5="_fcp",N5="_fid",P5="_lcp",PT="lcp_element",L5="_inp",LT="inp_interactionTarget",R5="_cls",RT="cls_largestShiftTarget",C5="@firebase/performance/config",k5="@firebase/performance/configexpire",CT="performance",x5="Performance";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT={"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},Gn=new Jo(CT,x5,kT);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo=new zl(x5);lo.logLevel=_t.INFO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ef,O5;class In{constructor(e){if(this.window=e,!e)throw Gn.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay),this.onLCP=j4,this.onINP=U4,this.onCLS=C4}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,t,r){!this.performance||!this.performance.measure||this.performance.measure(e,t,r)}getEntriesByType(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)}getEntriesByName(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!ly()?(lo.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):A1()?!0:(lo.info("IndexedDB is not supported by current browser"),!1)}setupObserver(e,t){if(!this.PerformanceObserver)return;new this.PerformanceObserver(i=>{for(const s of i.getEntries())t(s)}).observe({entryTypes:[e]})}static getInstance(){return ef===void 0&&(ef=new In(O5)),ef}}function xT(n){O5=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let D5;function OT(n){const e=n.getId();return e.then(t=>{D5=t}),e}function up(){return D5}function DT(n){const e=n.getToken();return e.then(t=>{}),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(n,e){const t=n.length-e.length;if(t<0||t>1)throw Gn.create("invalid String merger input");const r=[];for(let i=0;i<n.length;i++)r.push(n.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tf;class Tr{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Dm("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Dm("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return tf===void 0&&(tf=new Tr),tf}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zc;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.VISIBLE=1]="VISIBLE",n[n.HIDDEN=2]="HIDDEN"})(zc||(zc={}));const FT=["firebase_","google_","ga_"],MT=new RegExp("^[a-zA-Z]\\w*$"),VT=40,UT=100;function jT(){const n=In.getInstance().navigator;return n!=null&&n.serviceWorker?n.serviceWorker.controller?2:3:1}function BT(){switch(In.getInstance().document.visibilityState){case"visible":return zc.VISIBLE;case"hidden":return zc.HIDDEN;default:return zc.UNKNOWN}}function qT(){const e=In.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function zT(n){return n.length===0||n.length>VT?!1:!FT.some(t=>n.startsWith(t))&&!!n.match(MT)}function $T(n){return n.length!==0&&n.length<=UT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F5(n){var e;const t=(e=n.options)===null||e===void 0?void 0:e.appId;if(!t)throw Gn.create("no app id");return t}function HT(n){var e;const t=(e=n.options)===null||e===void 0?void 0:e.projectId;if(!t)throw Gn.create("no project id");return t}function WT(n){var e;const t=(e=n.options)===null||e===void 0?void 0:e.apiKey;if(!t)throw Gn.create("no api key");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="0.0.1",Jr={loggingEnabled:!0},KT="FIREBASE_INSTALLATIONS_AUTH";function JT(n,e){const t=QT();return t?(Fm(t),Promise.resolve()):ZT(n,e).then(Fm).then(r=>YT(r),()=>{})}function QT(){const n=In.getInstance().localStorage;if(!n)return;const e=n.getItem(k5);if(!e||!e3(e))return;const t=n.getItem(C5);if(t)try{return JSON.parse(t)}catch{return}}function YT(n){const e=In.getInstance().localStorage;!n||!e||(e.setItem(C5,JSON.stringify(n)),e.setItem(k5,String(Date.now()+Tr.getInstance().configTimeToLive*60*60*1e3)))}const XT="Could not fetch config, will use default configs";function ZT(n,e){return DT(n.installations).then(t=>{const r=HT(n.app),i=WT(n.app),s=`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${i}`,o=new Request(s,{method:"POST",headers:{Authorization:`${KT} ${t}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:F5(n.app),app_version:E5,sdk_version:GT})});return fetch(o).then(a=>{if(a.ok)return a.json();throw Gn.create("RC response not ok")})}).catch(()=>{lo.info(XT)})}function Fm(n){if(!n)return n;const e=Tr.getInstance(),t=n.entries||{};return t.fpr_enabled!==void 0?e.loggingEnabled=String(t.fpr_enabled)==="true":e.loggingEnabled=Jr.loggingEnabled,t.fpr_log_source?e.logSource=Number(t.fpr_log_source):Jr.logSource&&(e.logSource=Jr.logSource),t.fpr_log_endpoint_url?e.logEndPointUrl=t.fpr_log_endpoint_url:Jr.logEndPointUrl&&(e.logEndPointUrl=Jr.logEndPointUrl),t.fpr_log_transport_key?e.transportKey=t.fpr_log_transport_key:Jr.transportKey&&(e.transportKey=Jr.transportKey),t.fpr_vc_network_request_sampling_rate!==void 0?e.networkRequestsSamplingRate=Number(t.fpr_vc_network_request_sampling_rate):Jr.networkRequestsSamplingRate!==void 0&&(e.networkRequestsSamplingRate=Jr.networkRequestsSamplingRate),t.fpr_vc_trace_sampling_rate!==void 0?e.tracesSamplingRate=Number(t.fpr_vc_trace_sampling_rate):Jr.tracesSamplingRate!==void 0&&(e.tracesSamplingRate=Jr.tracesSamplingRate),e.logTraceAfterSampling=Mm(e.tracesSamplingRate),e.logNetworkAfterSampling=Mm(e.networkRequestsSamplingRate),n}function e3(n){return Number(n)>Date.now()}function Mm(n){return Math.random()<=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lp=1,nf;function M5(n){return lp=2,nf=nf||n3(n),nf}function t3(){return lp===3}function n3(n){return r3().then(()=>OT(n.installations)).then(e=>JT(n,e)).then(()=>Vm(),()=>Vm())}function r3(){const n=In.getInstance().document;return new Promise(e=>{if(n&&n.readyState!=="complete"){const t=()=>{n.readyState==="complete"&&(n.removeEventListener("readystatechange",t),e())};n.addEventListener("readystatechange",t)}else e()})}function Vm(){lp=3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5=10*1e3,i3=5.5*1e3,s3=1e3,U5=3;let al=U5,Bo=[],Um=!1;function o3(){Um||(hp(i3),Um=!0)}function hp(n){setTimeout(()=>{al<=0||(Bo.length>0&&j5(),hp(V5))},n)}function j5(){const n=Bo.splice(0,s3),e=n.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)})),t={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Tr.getInstance().logSource,log_event:e};a3(t).then(()=>{al=U5}).catch(()=>{Bo=[...n,...Bo],al--,lo.info(`Tries left: ${al}.`),hp(V5)})}function a3(n){const e=Tr.getInstance().getFlTransportFullUrl(),t=JSON.stringify(n);return navigator.sendBeacon&&navigator.sendBeacon(e,t)?Promise.resolve():fetch(e,{method:"POST",body:t,keepalive:!0}).then()}function c3(n){if(!n.eventTime||!n.message)throw Gn.create("invalid cc log");Bo=[...Bo,n]}function u3(n){return(...e)=>{const t=n(...e);c3({message:t,eventTime:Date.now()})}}function l3(){for(;Bo.length>0;)j5()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $c;function B5(n,e){$c||($c={send:u3(d3),flush:l3}),$c.send(n,e)}function Wu(n){const e=Tr.getInstance();!e.instrumentationEnabled&&n.isAuto||!e.dataCollectionEnabled&&!n.isAuto||In.getInstance().requiredApisAvailable()&&(t3()?rf(n):M5(n.performanceController).then(()=>rf(n),()=>rf(n)))}function h3(){$c&&$c.flush()}function rf(n){if(!up())return;const e=Tr.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||B5(n,1)}function f3(n){const e=Tr.getInstance();if(!e.instrumentationEnabled)return;const t=n.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];t===r||t===i||!e.loggingEnabled||!e.logNetworkAfterSampling||B5(n,0)}function d3(n,e){return e===0?p3(n):g3(n)}function p3(n){const e={url:n.url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},t={application_info:q5(n.performanceController.app),network_request_metric:e};return JSON.stringify(t)}function g3(n){const e={name:n.name,is_auto:n.isAuto,client_start_time_us:n.startTimeUs,duration_us:n.durationUs};Object.keys(n.counters).length!==0&&(e.counters=n.counters);const t=n.getAttributes();Object.keys(t).length!==0&&(e.custom_attributes=t);const r={application_info:q5(n.performanceController.app),trace_metric:e};return JSON.stringify(r)}function q5(n){return{google_app_id:F5(n),app_instance_id:up(),web_app_info:{sdk_version:E5,page_url:In.getInstance().getUrl(),service_worker_status:jT(),visibility_state:BT(),effective_connection_type:qT()},application_process_state:0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(n,e){const t=e;if(!t||t.responseStart===void 0)return;const r=In.getInstance().getTimeOrigin(),i=Math.floor((t.startTime+r)*1e3),s=t.responseStart?Math.floor((t.responseStart-t.startTime)*1e3):void 0,o=Math.floor((t.responseEnd-t.startTime)*1e3),a=t.name&&t.name.split("?")[0],l={performanceController:n,url:a,responsePayloadBytes:t.transferSize,startTimeUs:i,timeToResponseInitiatedUs:s,timeToResponseCompletedUs:o};f3(l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3=100,v3="_",y3=[T5,S5,N5,P5,R5,L5];function _3(n,e){return n.length===0||n.length>m3?!1:e&&e.startsWith(I5)&&y3.indexOf(n)>-1||!n.startsWith(v3)}function w3(n){const e=Math.floor(n);return e<n&&lo.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,t,r=!1,i){this.performanceController=e,this.name=t,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=In.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${ST}-${this.randomId}-${this.name}`,this.traceStopMark=`${NT}-${this.randomId}-${this.name}`,this.traceMeasure=i||`${Wf}-${this.randomId}-${this.name}`,i&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw Gn.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw Gn.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Wu(this)}record(e,t,r){if(e<=0)throw Gn.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw Gn.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(t*1e3),this.startTimeUs=Math.floor(e*1e3),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(const i of Object.keys(r.metrics))isNaN(Number(r.metrics[i]))||(this.counters[i]=Math.floor(Number(r.metrics[i])));Wu(this)}incrementMetric(e,t=1){this.counters[e]===void 0?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)}putMetric(e,t){if(_3(e,this.name))this.counters[e]=w3(t??0);else throw Gn.create("invalid custom metric name",{customMetricName:e})}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const r=zT(e),i=$T(t);if(r&&i){this.customAttributes[e]=t;return}if(!r)throw Gn.create("invalid attribute name",{attributeName:e});if(!i)throw Gn.create("invalid attribute value",{attributeValue:t})}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(t.duration*1e3),this.startTimeUs=Math.floor((t.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(e,t,r,i,s){const o=In.getInstance().getUrl();if(!o)return;const a=new tu(e,I5+o,!0),l=Math.floor(In.getInstance().getTimeOrigin()*1e3);a.setStartTime(l),t&&t[0]&&(a.setDuration(Math.floor(t[0].duration*1e3)),a.putMetric("domInteractive",Math.floor(t[0].domInteractive*1e3)),a.putMetric("domContentLoadedEventEnd",Math.floor(t[0].domContentLoadedEventEnd*1e3)),a.putMetric("loadEventEnd",Math.floor(t[0].loadEventEnd*1e3)));const f="first-paint",g="first-contentful-paint";if(r){const y=r.find(v=>v.name===f);y&&y.startTime&&a.putMetric(T5,Math.floor(y.startTime*1e3));const b=r.find(v=>v.name===g);b&&b.startTime&&a.putMetric(S5,Math.floor(b.startTime*1e3)),s&&a.putMetric(N5,Math.floor(s*1e3))}this.addWebVitalMetric(a,P5,PT,i.lcp),this.addWebVitalMetric(a,R5,RT,i.cls),this.addWebVitalMetric(a,L5,LT,i.inp),Wu(a),h3()}static addWebVitalMetric(e,t,r,i){i&&(e.putMetric(t,Math.floor(i.value*1e3)),i.elementAttribution&&e.putAttribute(r,i.elementAttribution))}static createUserTimingTrace(e,t){const r=new tu(e,t,!1,t);Wu(r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cl={},Bm=!1,z5;function qm(n){up()&&(setTimeout(()=>A3(n),0),setTimeout(()=>b3(n),0),setTimeout(()=>E3(n),0))}function b3(n){const e=In.getInstance(),t=e.getEntriesByType("resource");for(const r of t)jm(n,r);e.setupObserver("resource",r=>jm(n,r))}function A3(n){const e=In.getInstance();"onpagehide"in window?e.document.addEventListener("pagehide",()=>sf(n)):e.document.addEventListener("unload",()=>sf(n)),e.document.addEventListener("visibilitychange",()=>{e.document.visibilityState==="hidden"&&sf(n)}),e.onFirstInputDelay&&e.onFirstInputDelay(t=>{z5=t}),e.onLCP(t=>{var r;cl.lcp={value:t.value,elementAttribution:(r=t.attribution)===null||r===void 0?void 0:r.element}}),e.onCLS(t=>{var r;cl.cls={value:t.value,elementAttribution:(r=t.attribution)===null||r===void 0?void 0:r.largestShiftTarget}}),e.onINP(t=>{var r;cl.inp={value:t.value,elementAttribution:(r=t.attribution)===null||r===void 0?void 0:r.interactionTarget}})}function E3(n){const e=In.getInstance(),t=e.getEntriesByType("measure");for(const r of t)zm(n,r);e.setupObserver("measure",r=>zm(n,r))}function zm(n,e){const t=e.name;t.substring(0,Wf.length)!==Wf&&tu.createUserTimingTrace(n,t)}function sf(n){if(!Bm){Bm=!0;const e=In.getInstance(),t=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");setTimeout(()=>{tu.createOobTrace(n,t,r,cl,z5)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||((e==null?void 0:e.dataCollectionEnabled)!==void 0&&(this.dataCollectionEnabled=e.dataCollectionEnabled),(e==null?void 0:e.instrumentationEnabled)!==void 0&&(this.instrumentationEnabled=e.instrumentationEnabled),In.getInstance().requiredApisAvailable()?E1().then(t=>{t&&(o3(),M5(this).then(()=>qm(this),()=>qm(this)),this.initialized=!0)}).catch(t=>{lo.info(`Environment doesn't support IndexedDB: ${t}`)}):lo.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){Tr.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return Tr.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){Tr.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return Tr.getInstance().dataCollectionEnabled}}const T3="[DEFAULT]";function S3(n=$l()){return n=_n(n),Qo(n,"performance").getImmediate()}const N3=(n,{options:e})=>{const t=n.getProvider("app").getImmediate(),r=n.getProvider("installations-internal").getImmediate();if(t.name!==T3)throw Gn.create("FB not default");if(typeof window>"u")throw Gn.create("no window");xT(window);const i=new I3(t,r);return i._init(e),i};function P3(){ki(new ri("performance",N3,"PUBLIC")),fr(Om,Hf),fr(Om,Hf,"esm2017")}P3();const L3={firebase:{apiKey:"AIzaSyA_i_snqrJHccBp2qpMLhFfhyRVwBoJ7z0",authDomain:"kony-25092.firebaseapp.com",projectId:"kony-25092",storageBucket:"kony-25092.firebasestorage.app",messagingSenderId:"373594331946",appId:"1:373594331946:web:20c17dfa80cdba1bcd9c53",measurementId:"G-QE6LX3NEDT"}};console.log("Initializing Firebase...");const mh=N1(L3.firebase),us=DI(mh),Ml=Mb(mh);E4(mh);S3(mh);console.log("Firebase initialized");async function R3(n,e){try{console.log(`Attempting to sign in with email: ${n}`);const t=await Aw(Ml,n,e);return console.log("Sign-in successful"),t.user}catch(t){throw console.error("Error signing in:",t),t}}async function C3(){try{return console.log("Logging out..."),await Sw(Ml),console.log("Logged out successfully"),!0}catch(n){throw console.error("Error signing out:",n),n}}async function k3(n){try{console.log(`Getting role for user ID: ${n}`);const e=await q0(uc(us,"users",n));if(e.exists())return console.log("User document found with direct lookup"),e.data().role;console.log("User document not found with direct lookup, trying authUid field...");const t=jf(Bd(us,"users"),U0("authUid","==",n)),r=await Yd(t);return r.empty?(console.log("No user document found"),null):(console.log("User document found with authUid query"),r.docs[0].data().role)}catch(e){return console.error("Error getting user role:",e),null}}function Gf(n=null){console.log("Showing login form");const e=document.getElementById("app");e.innerHTML=`
    <div class="login-container">
      <div class="login-logo">
        <h1>Kony Admin</h1>
      </div>
      <div class="card login-card">
        <div class="login-header">
          <h4 class="mb-0">Admin Login</h4>
        </div>
        <div class="card-body p-4">
          <form id="loginForm">
            <div class="mb-3">
              <label for="email" class="form-label">Email</label>
              <input type="email" class="form-control" id="email" required>
            </div>
            <div class="mb-3">
              <label for="password" class="form-label">Password</label>
              <input type="password" class="form-control" id="password" required>
            </div>
            ${n?`<div class="alert alert-danger">${n}</div>`:""}
            <div class="d-grid">
              <button type="submit" class="btn btn-primary" id="loginButton">Login</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  `,document.getElementById("loginForm").addEventListener("submit",async t=>{t.preventDefault();const r=document.getElementById("email").value,i=document.getElementById("password").value,s=document.getElementById("loginButton");try{s.disabled=!0,s.innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Logging in...',await R3(r,i)}catch(o){s.disabled=!1,s.innerHTML="Login",Gf(o.message||"Login failed. Please check your credentials.")}})}async function x3(n){try{console.log(`Getting reports with status: ${n}`);const e=Bd(us,"technical_visit_reports");let t;n==="all"?t=jf(e):t=jf(e,U0("status","==",n));const r=await Yd(t);return console.log(`Found ${r.docs.length} reports`),r.docs.map(i=>({id:i.id,...i.data()}))}catch(e){throw console.error("Error getting reports:",e),e}}async function O3(n){try{console.log(`Getting report with ID: ${n}`);const e=uc(us,"technical_visit_reports",n),t=await q0(e);if(t.exists())return console.log("Report found"),{id:t.id,...t.data()};throw console.log("Report not found"),new Error("Report not found")}catch(e){throw console.error("Error getting report:",e),e}}async function D3(n,e){try{return console.log(`Updating report ${n} to status: ${e}`),await $0(uc(us,"technical_visit_reports",n),{status:e,lastModified:new Date().toISOString()}),console.log("Report status updated successfully"),!0}catch(t){throw console.error("Error updating report status:",t),t}}async function F3(n){try{return console.log(`Deleting report with ID: ${n}`),await H0(uc(us,"technical_visit_reports",n)),console.log("Report deleted successfully"),!0}catch(e){throw console.error("Error deleting report:",e),e}}async function M3(){try{console.log("Getting all users");const n=Bd(us,"users"),e=await Yd(n);return console.log(`Found ${e.docs.length} users`),e.docs.map(t=>({id:t.id,...t.data()}))}catch(n){throw console.error("Error getting users:",n),n}}async function V3(n,e){try{return console.log(`Updating user with authUid: ${n}`),await $0(uc(us,"users",n),{name:e.name,email:e.email,role:e.role,updatedAt:new Date().toISOString()}),console.log("User updated successfully"),!0}catch(t){throw console.error("Error updating user:",t),t}}async function U3(n){try{return console.log(`Deleting user with authUid: ${n}`),await H0(uc(us,"users",n)),console.log("User deleted successfully"),!0}catch(e){throw console.error("Error deleting user:",e),e}}const j3="modulepreload",B3=function(n){return"/"+n},$m={},Kf=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let o=function(f){return Promise.all(f.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=o(t.map(f=>{if(f=B3(f),f in $m)return;$m[f]=!0;const g=f.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const b=document.createElement("link");if(b.rel=g?"stylesheet":j3,g||(b.as="script"),b.crossOrigin="",b.href=f,l&&b.setAttribute("nonce",l),document.head.appendChild(b),g)return new Promise((v,M)=>{b.addEventListener("load",v),b.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function Mt(n){"@babel/helpers - typeof";return Mt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mt(n)}var Jn=Uint8Array,Sr=Uint16Array,fp=Int32Array,vh=new Jn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),yh=new Jn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Jf=new Jn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$5=function(n,e){for(var t=new Sr(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new fp(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},H5=$5(vh,2),W5=H5.b,Qf=H5.r;W5[28]=258,Qf[258]=28;var G5=$5(yh,0),q3=G5.b,Hm=G5.r,Yf=new Sr(32768);for(var Qt=0;Qt<32768;++Qt){var js=(Qt&43690)>>1|(Qt&21845)<<1;js=(js&52428)>>2|(js&13107)<<2,js=(js&61680)>>4|(js&3855)<<4,Yf[Qt]=((js&65280)>>8|(js&255)<<8)>>1}var Ci=function(n,e,t){for(var r=n.length,i=0,s=new Sr(e);i<r;++i)n[i]&&++s[n[i]-1];var o=new Sr(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new Sr(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var f=i<<4|n[i],g=e-n[i],y=o[n[i]-1]++<<g,b=y|(1<<g)-1;y<=b;++y)a[Yf[y]>>l]=f}else for(a=new Sr(r),i=0;i<r;++i)n[i]&&(a[i]=Yf[o[n[i]-1]++]>>15-n[i]);return a},ho=new Jn(288);for(var Qt=0;Qt<144;++Qt)ho[Qt]=8;for(var Qt=144;Qt<256;++Qt)ho[Qt]=9;for(var Qt=256;Qt<280;++Qt)ho[Qt]=7;for(var Qt=280;Qt<288;++Qt)ho[Qt]=8;var nu=new Jn(32);for(var Qt=0;Qt<32;++Qt)nu[Qt]=5;var z3=Ci(ho,9,0),$3=Ci(ho,9,1),H3=Ci(nu,5,0),W3=Ci(nu,5,1),of=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Qr=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},af=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},dp=function(n){return(n+7)/8|0},K5=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Jn(n.subarray(e,t))},G3=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Xr=function(n,e,t){var r=new Error(e||G3[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,Xr),!t)throw r;return r},K3=function(n,e,t,r){var i=n.length,s=0;if(!i||e.f&&!e.l)return t||new Jn(0);var o=!t,a=o||e.i!=2,l=e.i;o&&(t=new Jn(i*3));var f=function(Re){var Fe=t.length;if(Re>Fe){var Oe=new Jn(Math.max(Fe*2,Re));Oe.set(t),t=Oe}},g=e.f||0,y=e.p||0,b=e.b||0,v=e.l,M=e.d,x=e.m,F=e.n,P=i*8;do{if(!v){g=Qr(n,y,1);var B=Qr(n,y+1,3);if(y+=3,B)if(B==1)v=$3,M=W3,x=9,F=5;else if(B==2){var we=Qr(n,y,31)+257,U=Qr(n,y+10,15)+4,I=we+Qr(n,y+5,31)+1;y+=14;for(var k=new Jn(I),j=new Jn(19),A=0;A<U;++A)j[Jf[A]]=Qr(n,y+A*3,7);y+=U*3;for(var E=of(j),N=(1<<E)-1,G=Ci(j,E,1),A=0;A<I;){var pe=G[Qr(n,y,N)];y+=pe&15;var K=pe>>4;if(K<16)k[A++]=K;else{var fe=0,ge=0;for(K==16?(ge=3+Qr(n,y,3),y+=2,fe=k[A-1]):K==17?(ge=3+Qr(n,y,7),y+=3):K==18&&(ge=11+Qr(n,y,127),y+=7);ge--;)k[A++]=fe}}var se=k.subarray(0,we),me=k.subarray(we);x=of(se),F=of(me),v=Ci(se,x,1),M=Ci(me,F,1)}else Xr(1);else{var K=dp(y)+4,ie=n[K-4]|n[K-3]<<8,le=K+ie;if(le>i){l&&Xr(0);break}a&&f(b+ie),t.set(n.subarray(K,le),b),e.b=b+=ie,e.p=y=le*8,e.f=g;continue}if(y>P){l&&Xr(0);break}}a&&f(b+131072);for(var be=(1<<x)-1,qe=(1<<F)-1,C=y;;C=y){var fe=v[af(n,y)&be],z=fe>>4;if(y+=fe&15,y>P){l&&Xr(0);break}if(fe||Xr(2),z<256)t[b++]=z;else if(z==256){C=y,v=null;break}else{var W=z-254;if(z>264){var A=z-257,Q=vh[A];W=Qr(n,y,(1<<Q)-1)+W5[A],y+=Q}var ne=M[af(n,y)&qe],ue=ne>>4;ne||Xr(3),y+=ne&15;var me=q3[ue];if(ue>3){var Q=yh[ue];me+=af(n,y)&(1<<Q)-1,y+=Q}if(y>P){l&&Xr(0);break}a&&f(b+131072);var he=b+W;if(b<me){var de=s-me,ke=Math.min(me,he);for(de+b<0&&Xr(3);b<ke;++b)t[b]=r[de+b]}for(;b<he;++b)t[b]=t[b-me]}}e.l=v,e.p=C,e.b=b,e.f=g,v&&(g=1,e.m=x,e.d=M,e.n=F)}while(!g);return b!=t.length&&o?K5(t,0,b):t.subarray(0,b)},ts=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},Lc=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},cf=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return{t:Q5,l:0};if(i==1){var o=new Jn(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(le,we){return le.f-we.f}),t.push({s:-1,f:25001});var a=t[0],l=t[1],f=0,g=1,y=2;for(t[0]={s:-1,f:a.f+l.f,l:a,r:l};g!=i-1;)a=t[t[f].f<t[y].f?f++:y++],l=t[f!=g&&t[f].f<t[y].f?f++:y++],t[g++]={s:-1,f:a.f+l.f,l:a,r:l};for(var b=s[0].s,r=1;r<i;++r)s[r].s>b&&(b=s[r].s);var v=new Sr(b+1),M=Xf(t[g-1],v,0);if(M>e){var r=0,x=0,F=M-e,P=1<<F;for(s.sort(function(we,U){return v[U.s]-v[we.s]||we.f-U.f});r<i;++r){var B=s[r].s;if(v[B]>e)x+=P-(1<<M-v[B]),v[B]=e;else break}for(x>>=F;x>0;){var K=s[r].s;v[K]<e?x-=1<<e-v[K]++-1:++r}for(;r>=0&&x;--r){var ie=s[r].s;v[ie]==e&&(--v[ie],++x)}M=e}return{t:new Jn(v),l:M}},Xf=function(n,e,t){return n.s==-1?Math.max(Xf(n.l,e,t+1),Xf(n.r,e,t+1)):e[n.s]=t},Wm=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Sr(++e),r=0,i=n[0],s=1,o=function(l){t[r++]=l},a=1;a<=e;++a)if(n[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=n[a]}return{c:t.subarray(0,r),n:e}},Rc=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},J5=function(n,e,t){var r=t.length,i=dp(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var s=0;s<r;++s)n[i+s+4]=t[s];return(i+4+r)*8},Gm=function(n,e,t,r,i,s,o,a,l,f,g){ts(e,g++,t),++i[256];for(var y=cf(i,15),b=y.t,v=y.l,M=cf(s,15),x=M.t,F=M.l,P=Wm(b),B=P.c,K=P.n,ie=Wm(x),le=ie.c,we=ie.n,U=new Sr(19),I=0;I<B.length;++I)++U[B[I]&31];for(var I=0;I<le.length;++I)++U[le[I]&31];for(var k=cf(U,7),j=k.t,A=k.l,E=19;E>4&&!j[Jf[E-1]];--E);var N=f+5<<3,G=Rc(i,ho)+Rc(s,nu)+o,pe=Rc(i,b)+Rc(s,x)+o+14+3*E+Rc(U,j)+2*U[16]+3*U[17]+7*U[18];if(l>=0&&N<=G&&N<=pe)return J5(e,g,n.subarray(l,l+f));var fe,ge,se,me;if(ts(e,g,1+(pe<G)),g+=2,pe<G){fe=Ci(b,v,0),ge=b,se=Ci(x,F,0),me=x;var be=Ci(j,A,0);ts(e,g,K-257),ts(e,g+5,we-1),ts(e,g+10,E-4),g+=14;for(var I=0;I<E;++I)ts(e,g+3*I,j[Jf[I]]);g+=3*E;for(var qe=[B,le],C=0;C<2;++C)for(var z=qe[C],I=0;I<z.length;++I){var W=z[I]&31;ts(e,g,be[W]),g+=j[W],W>15&&(ts(e,g,z[I]>>5&127),g+=z[I]>>12)}}else fe=z3,ge=ho,se=H3,me=nu;for(var I=0;I<a;++I){var Q=r[I];if(Q>255){var W=Q>>18&31;Lc(e,g,fe[W+257]),g+=ge[W+257],W>7&&(ts(e,g,Q>>23&31),g+=vh[W]);var ne=Q&31;Lc(e,g,se[ne]),g+=me[ne],ne>3&&(Lc(e,g,Q>>5&8191),g+=yh[ne])}else Lc(e,g,fe[Q]),g+=ge[Q]}return Lc(e,g,fe[256]),g+ge[256]},J3=new fp([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Q5=new Jn(0),Q3=function(n,e,t,r,i,s){var o=s.z||n.length,a=new Jn(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),f=s.l,g=(s.r||0)&7;if(e){g&&(l[0]=s.r>>3);for(var y=J3[e-1],b=y>>13,v=y&8191,M=(1<<t)-1,x=s.p||new Sr(32768),F=s.h||new Sr(M+1),P=Math.ceil(t/3),B=2*P,K=function(Xe){return(n[Xe]^n[Xe+1]<<P^n[Xe+2]<<B)&M},ie=new fp(25e3),le=new Sr(288),we=new Sr(32),U=0,I=0,k=s.i||0,j=0,A=s.w||0,E=0;k+2<o;++k){var N=K(k),G=k&32767,pe=F[N];if(x[G]=pe,F[N]=G,A<=k){var fe=o-k;if((U>7e3||j>24576)&&(fe>423||!f)){g=Gm(n,l,0,ie,le,we,I,j,E,k-E,g),j=U=I=0,E=k;for(var ge=0;ge<286;++ge)le[ge]=0;for(var ge=0;ge<30;++ge)we[ge]=0}var se=2,me=0,be=v,qe=G-pe&32767;if(fe>2&&N==K(k-qe))for(var C=Math.min(b,fe)-1,z=Math.min(32767,k),W=Math.min(258,fe);qe<=z&&--be&&G!=pe;){if(n[k+se]==n[k+se-qe]){for(var Q=0;Q<W&&n[k+Q]==n[k+Q-qe];++Q);if(Q>se){if(se=Q,me=qe,Q>C)break;for(var ne=Math.min(qe,Q-2),ue=0,ge=0;ge<ne;++ge){var he=k-qe+ge&32767,de=x[he],ke=he-de&32767;ke>ue&&(ue=ke,pe=he)}}}G=pe,pe=x[G],qe+=G-pe&32767}if(me){ie[j++]=268435456|Qf[se]<<18|Hm[me];var Re=Qf[se]&31,Fe=Hm[me]&31;I+=vh[Re]+yh[Fe],++le[257+Re],++we[Fe],A=k+se,++U}else ie[j++]=n[k],++le[n[k]]}}for(k=Math.max(k,A);k<o;++k)ie[j++]=n[k],++le[n[k]];g=Gm(n,l,f,ie,le,we,I,j,E,k-E,g),f||(s.r=g&7|l[g/8|0]<<3,g-=7,s.h=F,s.p=x,s.i=k,s.w=A)}else{for(var k=s.w||0;k<o+f;k+=65535){var Oe=k+65535;Oe>=o&&(l[g/8|0]=f,Oe=o),g=J5(l,g+1,n.subarray(k,Oe))}s.i=o}return K5(a,0,r+dp(g)+i)},Y5=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,s=t.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=t[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},Y3=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new Jn(s.length+n.length);o.set(s),o.set(n,s.length),n=o,i.w=s.length}return Q3(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},X5=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},X3=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=Y5();i.p(e.dictionary),X5(n,2,i.d())}},Z3=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Xr(6,"invalid zlib data"),(n[1]>>5&1)==1&&Xr(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function Zf(n,e){e||(e={});var t=Y5();t.p(n);var r=Y3(n,e,e.dictionary?6:2,4);return X3(r,e),X5(r,r.length-4,t.d()),r}function eS(n,e){return K3(n.subarray(Z3(n),-4),{i:2},e,e)}var tS=typeof TextDecoder<"u"&&new TextDecoder,nS=0;try{tS.decode(Q5,{stream:!0}),nS=1}catch{}var it=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function uf(){it.console&&typeof it.console.log=="function"&&it.console.log.apply(it.console,arguments)}var Bt={log:uf,warn:function(n){it.console&&(typeof it.console.warn=="function"?it.console.warn.apply(it.console,arguments):uf.call(null,arguments))},error:function(n){it.console&&(typeof it.console.error=="function"?it.console.error.apply(it.console,arguments):uf(n))}};function lf(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Mo(r.response,e,t)},r.onerror=function(){Bt.error("could not download file")},r.send()}function Km(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Gu(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Hc,ed,Mo=it.saveAs||((typeof window>"u"?"undefined":Mt(window))!=="object"||window!==it?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=it.URL||it.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?Km(i.href)?lf(n,e,t):Gu(i,i.target="_blank"):Gu(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Gu(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(Km(n))lf(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Gu(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Mt(s)!=="object"&&(Bt.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return lf(n,e,t);var i=n.type==="application/octet-stream",s=/constructor/i.test(it.HTMLElement)||it.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Mt(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var g=a.result;g=o?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=g:location=g,r=null},a.readAsDataURL(n)}else{var l=it.URL||it.webkitURL,f=l.createObjectURL(n);r?r.location=f:location.href=f,r=null,setTimeout(function(){l.revokeObjectURL(f)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Z5(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,s=t[r].process,o=i.exec(n);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),f=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),f.length==1&&(f="0"+f),"#"+a+l+f}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function hf(n,e){var t=n[0],r=n[1],i=n[2],s=n[3];t=qn(t,r,i,s,e[0],7,-680876936),s=qn(s,t,r,i,e[1],12,-389564586),i=qn(i,s,t,r,e[2],17,606105819),r=qn(r,i,s,t,e[3],22,-1044525330),t=qn(t,r,i,s,e[4],7,-176418897),s=qn(s,t,r,i,e[5],12,1200080426),i=qn(i,s,t,r,e[6],17,-1473231341),r=qn(r,i,s,t,e[7],22,-45705983),t=qn(t,r,i,s,e[8],7,1770035416),s=qn(s,t,r,i,e[9],12,-1958414417),i=qn(i,s,t,r,e[10],17,-42063),r=qn(r,i,s,t,e[11],22,-1990404162),t=qn(t,r,i,s,e[12],7,1804603682),s=qn(s,t,r,i,e[13],12,-40341101),i=qn(i,s,t,r,e[14],17,-1502002290),t=zn(t,r=qn(r,i,s,t,e[15],22,1236535329),i,s,e[1],5,-165796510),s=zn(s,t,r,i,e[6],9,-1069501632),i=zn(i,s,t,r,e[11],14,643717713),r=zn(r,i,s,t,e[0],20,-373897302),t=zn(t,r,i,s,e[5],5,-701558691),s=zn(s,t,r,i,e[10],9,38016083),i=zn(i,s,t,r,e[15],14,-660478335),r=zn(r,i,s,t,e[4],20,-405537848),t=zn(t,r,i,s,e[9],5,568446438),s=zn(s,t,r,i,e[14],9,-1019803690),i=zn(i,s,t,r,e[3],14,-187363961),r=zn(r,i,s,t,e[8],20,1163531501),t=zn(t,r,i,s,e[13],5,-1444681467),s=zn(s,t,r,i,e[2],9,-51403784),i=zn(i,s,t,r,e[7],14,1735328473),t=$n(t,r=zn(r,i,s,t,e[12],20,-1926607734),i,s,e[5],4,-378558),s=$n(s,t,r,i,e[8],11,-2022574463),i=$n(i,s,t,r,e[11],16,1839030562),r=$n(r,i,s,t,e[14],23,-35309556),t=$n(t,r,i,s,e[1],4,-1530992060),s=$n(s,t,r,i,e[4],11,1272893353),i=$n(i,s,t,r,e[7],16,-155497632),r=$n(r,i,s,t,e[10],23,-1094730640),t=$n(t,r,i,s,e[13],4,681279174),s=$n(s,t,r,i,e[0],11,-358537222),i=$n(i,s,t,r,e[3],16,-722521979),r=$n(r,i,s,t,e[6],23,76029189),t=$n(t,r,i,s,e[9],4,-640364487),s=$n(s,t,r,i,e[12],11,-421815835),i=$n(i,s,t,r,e[15],16,530742520),t=Hn(t,r=$n(r,i,s,t,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Hn(s,t,r,i,e[7],10,1126891415),i=Hn(i,s,t,r,e[14],15,-1416354905),r=Hn(r,i,s,t,e[5],21,-57434055),t=Hn(t,r,i,s,e[12],6,1700485571),s=Hn(s,t,r,i,e[3],10,-1894986606),i=Hn(i,s,t,r,e[10],15,-1051523),r=Hn(r,i,s,t,e[1],21,-2054922799),t=Hn(t,r,i,s,e[8],6,1873313359),s=Hn(s,t,r,i,e[15],10,-30611744),i=Hn(i,s,t,r,e[6],15,-1560198380),r=Hn(r,i,s,t,e[13],21,1309151649),t=Hn(t,r,i,s,e[4],6,-145523070),s=Hn(s,t,r,i,e[11],10,-1120210379),i=Hn(i,s,t,r,e[2],15,718787259),r=Hn(r,i,s,t,e[9],21,-343485551),n[0]=Js(t,n[0]),n[1]=Js(r,n[1]),n[2]=Js(i,n[2]),n[3]=Js(s,n[3])}function _h(n,e,t,r,i,s){return e=Js(Js(e,n),Js(r,s)),Js(e<<i|e>>>32-i,t)}function qn(n,e,t,r,i,s,o){return _h(e&t|~e&r,n,e,i,s,o)}function zn(n,e,t,r,i,s,o){return _h(e&r|t&~r,n,e,i,s,o)}function $n(n,e,t,r,i,s,o){return _h(e^t^r,n,e,i,s,o)}function Hn(n,e,t,r,i,s,o){return _h(t^(e|~r),n,e,i,s,o)}function ev(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)hf(r,rS(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(hf(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,hf(r,i),r}function rS(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}Hc=it.atob.bind(it),ed=it.btoa.bind(it);var Jm="0123456789abcdef".split("");function iS(n){for(var e="",t=0;t<4;t++)e+=Jm[n>>8*t+4&15]+Jm[n>>8*t&15];return e}function sS(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function td(n){return ev(n).map(sS).join("")}var oS=function(n){for(var e=0;e<n.length;e++)n[e]=iS(n[e]);return n.join("")}(ev("hello"))!="5d41402abc4b2a76b9719d911017c592";function Js(n,e){if(oS){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function nd(n,e){var t,r,i,s;if(n!==t){for(var o=(i=n,s=1+(256/n.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var f=0;for(l=0;l<256;l++){var g=a[l];f=(f+g+o.charCodeAt(l))%256,a[l]=a[f],a[f]=g}t=n,r=a}else a=r;var y=e.length,b=0,v=0,M="";for(l=0;l<y;l++)v=(v+(g=a[b=(b+1)%256]))%256,a[b]=a[v],a[v]=g,o=a[(a[b]+a[v])%256],M+=String.fromCharCode(e.charCodeAt(l)^o);return M}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Qm={print:4,modify:8,copy:16,"annot-forms":32};function xa(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(a){if(Qm.perm!==void 0)throw new Error("Invalid permission: "+a);i+=Qm[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=td(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=nd(this.encryptionKey,this.padding)}function Oa(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=n[r]}return e}function Ym(n){if(Mt(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[r,!!i],s},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[t]){var o=e[t][s];try{o[0].apply(n,r)}catch(a){it.console&&Bt.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Vl(n){if(!(this instanceof Vl))return new Vl(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function tv(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Vo(n,e,t,r,i){if(!(this instanceof Vo))return new Vo(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,tv.call(this,r,i)}function Ma(n,e,t,r,i){if(!(this instanceof Ma))return new Ma(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,tv.call(this,r,i)}function nt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,f="S",g=null;Mt(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,s=n.compress||n.compressPdf||s,(g=n.encryption||null)!==null&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),f=n.defaultPathOperation||"S"),o=n.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",t=(""+(t||"P")).toLowerCase();var y=n.putOnlyUsedFonts||!1,b={},v={internal:{},__private__:{}};v.__private__.PubSub=Ym;var M="1.3",x=v.__private__.getPdfVersion=function(){return M};v.__private__.setPdfVersion=function(d){M=d};var F={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};v.__private__.getPageFormats=function(){return F};var P=v.__private__.getPageFormat=function(d){return F[d]};i=i||"a4";var B={COMPAT:"compat",ADVANCED:"advanced"},K=B.COMPAT;function ie(){this.saveGraphicsState(),H(new He(Be,0,0,-Be,0,jn()*Be).toString()+" cm"),this.setFontSize(this.getFontSize()/Be),f="n",K=B.ADVANCED}function le(){this.restoreGraphicsState(),f="S",K=B.COMPAT}var we=v.__private__.combineFontStyleAndFontWeight=function(d,T){if(d=="bold"&&T=="normal"||d=="bold"&&T==400||d=="normal"&&T=="italic"||d=="bold"&&T=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return T&&(d=T==400||T==="normal"?d==="italic"?"italic":"normal":T!=700&&T!=="bold"||d!=="normal"?(T==700?"bold":T)+""+d:"bold"),d};v.advancedAPI=function(d){var T=K===B.COMPAT;return T&&ie.call(this),typeof d!="function"||(d(this),T&&le.call(this)),this},v.compatAPI=function(d){var T=K===B.ADVANCED;return T&&le.call(this),typeof d!="function"||(d(this),T&&ie.call(this)),this},v.isAdvancedAPI=function(){return K===B.ADVANCED};var U,I=function(d){if(K!==B.ADVANCED)throw new Error(d+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},k=v.roundToPrecision=v.__private__.roundToPrecision=function(d,T){var $=e||T;if(isNaN(d)||isNaN($))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return d.toFixed($).replace(/0+$/,"")};U=v.hpf=v.__private__.hpf=typeof l=="number"?function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.hpf");return k(d,l)}:l==="smart"?function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.hpf");return k(d,d>-1&&d<1?16:5)}:function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.hpf");return k(d,16)};var j=v.f2=v.__private__.f2=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.f2");return k(d,2)},A=v.__private__.f3=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.f3");return k(d,3)},E=v.scale=v.__private__.scale=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.scale");return K===B.COMPAT?d*Be:K===B.ADVANCED?d:void 0},N=function(d){return K===B.COMPAT?jn()-d:K===B.ADVANCED?d:void 0},G=function(d){return E(N(d))};v.__private__.setPrecision=v.setPrecision=function(d){typeof parseInt(d,10)=="number"&&(e=parseInt(d,10))};var pe,fe="00000000000000000000000000000000",ge=v.__private__.getFileId=function(){return fe},se=v.__private__.setFileId=function(d){return fe=d!==void 0&&/^[a-fA-F0-9]{32}$/.test(d)?d.toUpperCase():fe.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),g!==null&&(Kt=new xa(g.userPermissions,g.userPassword,g.ownerPassword,fe)),fe};v.setFileId=function(d){return se(d),this},v.getFileId=function(){return ge()};var me=v.__private__.convertDateToPDFDate=function(d){var T=d.getTimezoneOffset(),$=T<0?"+":"-",J=Math.floor(Math.abs(T/60)),te=Math.abs(T%60),ye=[$,W(J),"'",W(te),"'"].join("");return["D:",d.getFullYear(),W(d.getMonth()+1),W(d.getDate()),W(d.getHours()),W(d.getMinutes()),W(d.getSeconds()),ye].join("")},be=v.__private__.convertPDFDateToDate=function(d){var T=parseInt(d.substr(2,4),10),$=parseInt(d.substr(6,2),10)-1,J=parseInt(d.substr(8,2),10),te=parseInt(d.substr(10,2),10),ye=parseInt(d.substr(12,2),10),Pe=parseInt(d.substr(14,2),10);return new Date(T,$,J,te,ye,Pe,0)},qe=v.__private__.setCreationDate=function(d){var T;if(d===void 0&&(d=new Date),d instanceof Date)T=me(d);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(d))throw new Error("Invalid argument passed to jsPDF.setCreationDate");T=d}return pe=T},C=v.__private__.getCreationDate=function(d){var T=pe;return d==="jsDate"&&(T=be(pe)),T};v.setCreationDate=function(d){return qe(d),this},v.getCreationDate=function(d){return C(d)};var z,W=v.__private__.padd2=function(d){return("0"+parseInt(d)).slice(-2)},Q=v.__private__.padd2Hex=function(d){return("00"+(d=d.toString())).substr(d.length)},ne=0,ue=[],he=[],de=0,ke=[],Re=[],Fe=!1,Oe=he,Xe=function(){ne=0,de=0,he=[],ue=[],ke=[],Vr=Zt(),Un=Zt()};v.__private__.setCustomOutputDestination=function(d){Fe=!0,Oe=d};var _e=function(d){Fe||(Oe=d)};v.__private__.resetCustomOutputDestination=function(){Fe=!1,Oe=he};var H=v.__private__.out=function(d){return d=d.toString(),de+=d.length+1,Oe.push(d),Oe},ut=v.__private__.write=function(d){return H(arguments.length===1?d.toString():Array.prototype.join.call(arguments," "))},Ke=v.__private__.getArrayBuffer=function(d){for(var T=d.length,$=new ArrayBuffer(T),J=new Uint8Array($);T--;)J[T]=d.charCodeAt(T);return $},Ce=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];v.__private__.getStandardFonts=function(){return Ce};var xe=n.fontSize||16;v.__private__.setFontSize=v.setFontSize=function(d){return xe=K===B.ADVANCED?d/Be:d,this};var je,Ve=v.__private__.getFontSize=v.getFontSize=function(){return K===B.COMPAT?xe:xe*Be},Je=n.R2L||!1;v.__private__.setR2L=v.setR2L=function(d){return Je=d,this},v.__private__.getR2L=v.getR2L=function(){return Je};var at,ht=v.__private__.setZoomMode=function(d){var T=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(d))je=d;else if(isNaN(d)){if(T.indexOf(d)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+d+'" is not recognized.');je=d}else je=parseInt(d,10)};v.__private__.getZoomMode=function(){return je};var Qe,rt=v.__private__.setPageMode=function(d){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(d)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+d+'" is not recognized.');at=d};v.__private__.getPageMode=function(){return at};var St=v.__private__.setLayoutMode=function(d){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(d)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+d+'" is not recognized.');Qe=d};v.__private__.getLayoutMode=function(){return Qe},v.__private__.setDisplayMode=v.setDisplayMode=function(d,T,$){return ht(d),St(T),rt($),this};var tt={title:"",subject:"",author:"",keywords:"",creator:""};v.__private__.getDocumentProperty=function(d){if(Object.keys(tt).indexOf(d)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return tt[d]},v.__private__.getDocumentProperties=function(){return tt},v.__private__.setDocumentProperties=v.setProperties=v.setDocumentProperties=function(d){for(var T in tt)tt.hasOwnProperty(T)&&d[T]&&(tt[T]=d[T]);return this},v.__private__.setDocumentProperty=function(d,T){if(Object.keys(tt).indexOf(d)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return tt[d]=T};var vt,Be,Xt,Et,rr,Lt={},qt={},Nr=[],It={},ui={},Wt={},Ln={},gr=null,zt=0,Ze=[],Nt=new Ym(v),Pr=n.hotfixes||[],fn={},Mn={},mr=[],He=function d(T,$,J,te,ye,Pe){if(!(this instanceof d))return new d(T,$,J,te,ye,Pe);isNaN(T)&&(T=1),isNaN($)&&($=0),isNaN(J)&&(J=0),isNaN(te)&&(te=1),isNaN(ye)&&(ye=0),isNaN(Pe)&&(Pe=0),this._matrix=[T,$,J,te,ye,Pe]};Object.defineProperty(He.prototype,"sx",{get:function(){return this._matrix[0]},set:function(d){this._matrix[0]=d}}),Object.defineProperty(He.prototype,"shy",{get:function(){return this._matrix[1]},set:function(d){this._matrix[1]=d}}),Object.defineProperty(He.prototype,"shx",{get:function(){return this._matrix[2]},set:function(d){this._matrix[2]=d}}),Object.defineProperty(He.prototype,"sy",{get:function(){return this._matrix[3]},set:function(d){this._matrix[3]=d}}),Object.defineProperty(He.prototype,"tx",{get:function(){return this._matrix[4]},set:function(d){this._matrix[4]=d}}),Object.defineProperty(He.prototype,"ty",{get:function(){return this._matrix[5]},set:function(d){this._matrix[5]=d}}),Object.defineProperty(He.prototype,"a",{get:function(){return this._matrix[0]},set:function(d){this._matrix[0]=d}}),Object.defineProperty(He.prototype,"b",{get:function(){return this._matrix[1]},set:function(d){this._matrix[1]=d}}),Object.defineProperty(He.prototype,"c",{get:function(){return this._matrix[2]},set:function(d){this._matrix[2]=d}}),Object.defineProperty(He.prototype,"d",{get:function(){return this._matrix[3]},set:function(d){this._matrix[3]=d}}),Object.defineProperty(He.prototype,"e",{get:function(){return this._matrix[4]},set:function(d){this._matrix[4]=d}}),Object.defineProperty(He.prototype,"f",{get:function(){return this._matrix[5]},set:function(d){this._matrix[5]=d}}),Object.defineProperty(He.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(He.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(He.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(He.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),He.prototype.join=function(d){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(U).join(d)},He.prototype.multiply=function(d){var T=d.sx*this.sx+d.shy*this.shx,$=d.sx*this.shy+d.shy*this.sy,J=d.shx*this.sx+d.sy*this.shx,te=d.shx*this.shy+d.sy*this.sy,ye=d.tx*this.sx+d.ty*this.shx+this.tx,Pe=d.tx*this.shy+d.ty*this.sy+this.ty;return new He(T,$,J,te,ye,Pe)},He.prototype.decompose=function(){var d=this.sx,T=this.shy,$=this.shx,J=this.sy,te=this.tx,ye=this.ty,Pe=Math.sqrt(d*d+T*T),Me=(d/=Pe)*$+(T/=Pe)*J;$-=d*Me,J-=T*Me;var u=Math.sqrt($*$+J*J);return Me/=u,d*(J/=u)<T*($/=u)&&(d=-d,T=-T,Me=-Me,Pe=-Pe),{scale:new He(Pe,0,0,u,0,0),translate:new He(1,0,0,1,te,ye),rotate:new He(d,T,-T,d,0,0),skew:new He(1,0,Me,1,0,0)}},He.prototype.toString=function(d){return this.join(" ")},He.prototype.inversed=function(){var d=this.sx,T=this.shy,$=this.shx,J=this.sy,te=this.tx,ye=this.ty,Pe=1/(d*J-T*$),Me=J*Pe,u=-T*Pe,m=-$*Pe,w=d*Pe;return new He(Me,u,m,w,-Me*te-m*ye,-u*te-w*ye)},He.prototype.applyToPoint=function(d){var T=d.x*this.sx+d.y*this.shx+this.tx,$=d.x*this.shy+d.y*this.sy+this.ty;return new Wi(T,$)},He.prototype.applyToRectangle=function(d){var T=this.applyToPoint(d),$=this.applyToPoint(new Wi(d.x+d.w,d.y+d.h));return new Is(T.x,T.y,$.x-T.x,$.y-T.y)},He.prototype.clone=function(){var d=this.sx,T=this.shy,$=this.shx,J=this.sy,te=this.tx,ye=this.ty;return new He(d,T,$,J,te,ye)},v.Matrix=He;var ir=v.matrixMult=function(d,T){return T.multiply(d)},Vn=new He(1,0,0,1,0,0);v.unitMatrix=v.identityMatrix=Vn;var dn=function(d,T){if(!ui[d]){var $=(T instanceof Vo?"Sh":"P")+(Object.keys(It).length+1).toString(10);T.id=$,ui[d]=$,It[$]=T,Nt.publish("addPattern",T)}};v.ShadingPattern=Vo,v.TilingPattern=Ma,v.addShadingPattern=function(d,T){return I("addShadingPattern()"),dn(d,T),this},v.beginTilingPattern=function(d){I("beginTilingPattern()"),Ts(d.boundingBox[0],d.boundingBox[1],d.boundingBox[2]-d.boundingBox[0],d.boundingBox[3]-d.boundingBox[1],d.matrix)},v.endTilingPattern=function(d,T){I("endTilingPattern()"),T.stream=Re[z].join(`
`),dn(d,T),Nt.publish("endTilingPattern",T),mr.pop().restore()};var rn=v.__private__.newObject=function(){var d=Zt();return pn(d,!0),d},Zt=v.__private__.newObjectDeferred=function(){return ne++,ue[ne]=function(){return de},ne},pn=function(d,T){return T=typeof T=="boolean"&&T,ue[d]=de,T&&H(d+" 0 obj"),d},ls=v.__private__.newAdditionalObject=function(){var d={objId:Zt(),content:""};return ke.push(d),d},Vr=Zt(),Un=Zt(),sr=v.__private__.decodeColorString=function(d){var T=d.split(" ");if(T.length!==2||T[1]!=="g"&&T[1]!=="G")T.length===5&&(T[4]==="k"||T[4]==="K")&&(T=[(1-T[0])*(1-T[3]),(1-T[1])*(1-T[3]),(1-T[2])*(1-T[3]),"r"]);else{var $=parseFloat(T[0]);T=[$,$,$,"r"]}for(var J="#",te=0;te<3;te++)J+=("0"+Math.floor(255*parseFloat(T[te])).toString(16)).slice(-2);return J},Yn=v.__private__.encodeColorString=function(d){var T;typeof d=="string"&&(d={ch1:d});var $=d.ch1,J=d.ch2,te=d.ch3,ye=d.ch4,Pe=d.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof $=="string"&&$.charAt(0)!=="#"){var Me=new Z5($);if(Me.ok)$=Me.toHex();else if(!/^\d*\.?\d*$/.test($))throw new Error('Invalid color "'+$+'" passed to jsPDF.encodeColorString.')}if(typeof $=="string"&&/^#[0-9A-Fa-f]{3}$/.test($)&&($="#"+$[1]+$[1]+$[2]+$[2]+$[3]+$[3]),typeof $=="string"&&/^#[0-9A-Fa-f]{6}$/.test($)){var u=parseInt($.substr(1),16);$=u>>16&255,J=u>>8&255,te=255&u}if(J===void 0||ye===void 0&&$===J&&J===te)if(typeof $=="string")T=$+" "+Pe[0];else switch(d.precision){case 2:T=j($/255)+" "+Pe[0];break;case 3:default:T=A($/255)+" "+Pe[0]}else if(ye===void 0||Mt(ye)==="object"){if(ye&&!isNaN(ye.a)&&ye.a===0)return T=["1.","1.","1.",Pe[1]].join(" ");if(typeof $=="string")T=[$,J,te,Pe[1]].join(" ");else switch(d.precision){case 2:T=[j($/255),j(J/255),j(te/255),Pe[1]].join(" ");break;default:case 3:T=[A($/255),A(J/255),A(te/255),Pe[1]].join(" ")}}else if(typeof $=="string")T=[$,J,te,ye,Pe[2]].join(" ");else switch(d.precision){case 2:T=[j($),j(J),j(te),j(ye),Pe[2]].join(" ");break;case 3:default:T=[A($),A(J),A(te),A(ye),Pe[2]].join(" ")}return T},Xn=v.__private__.getFilters=function(){return o},sn=v.__private__.putStream=function(d){var T=(d=d||{}).data||"",$=d.filters||Xn(),J=d.alreadyAppliedFilters||[],te=d.addLength1||!1,ye=T.length,Pe=d.objectId,Me=function(ft){return ft};if(g!==null&&Pe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");g!==null&&(Me=Kt.encryptor(Pe,0));var u={};$===!0&&($=["FlateEncode"]);var m=d.additionalKeyValues||[],w=(u=nt.API.processDataByFilters!==void 0?nt.API.processDataByFilters(T,$):{data:T,reverseChain:[]}).reverseChain+(Array.isArray(J)?J.join(" "):J.toString());if(u.data.length!==0&&(m.push({key:"Length",value:u.data.length}),te===!0&&m.push({key:"Length1",value:ye})),w.length!=0)if(w.split("/").length-1==1)m.push({key:"Filter",value:w});else{m.push({key:"Filter",value:"["+w+"]"});for(var O=0;O<m.length;O+=1)if(m[O].key==="DecodeParms"){for(var ee=[],ce=0;ce<u.reverseChain.split("/").length-1;ce+=1)ee.push("null");ee.push(m[O].value),m[O].value="["+ee.join(" ")+"]"}}H("<<");for(var Le=0;Le<m.length;Le++)H("/"+m[Le].key+" "+m[Le].value);H(">>"),u.data.length!==0&&(H("stream"),H(Me(u.data)),H("endstream"))},vr=v.__private__.putPage=function(d){var T=d.number,$=d.data,J=d.objId,te=d.contentsObjId;pn(J,!0),H("<</Type /Page"),H("/Parent "+d.rootDictionaryObjId+" 0 R"),H("/Resources "+d.resourceDictionaryObjId+" 0 R"),H("/MediaBox ["+parseFloat(U(d.mediaBox.bottomLeftX))+" "+parseFloat(U(d.mediaBox.bottomLeftY))+" "+U(d.mediaBox.topRightX)+" "+U(d.mediaBox.topRightY)+"]"),d.cropBox!==null&&H("/CropBox ["+U(d.cropBox.bottomLeftX)+" "+U(d.cropBox.bottomLeftY)+" "+U(d.cropBox.topRightX)+" "+U(d.cropBox.topRightY)+"]"),d.bleedBox!==null&&H("/BleedBox ["+U(d.bleedBox.bottomLeftX)+" "+U(d.bleedBox.bottomLeftY)+" "+U(d.bleedBox.topRightX)+" "+U(d.bleedBox.topRightY)+"]"),d.trimBox!==null&&H("/TrimBox ["+U(d.trimBox.bottomLeftX)+" "+U(d.trimBox.bottomLeftY)+" "+U(d.trimBox.topRightX)+" "+U(d.trimBox.topRightY)+"]"),d.artBox!==null&&H("/ArtBox ["+U(d.artBox.bottomLeftX)+" "+U(d.artBox.bottomLeftY)+" "+U(d.artBox.topRightX)+" "+U(d.artBox.topRightY)+"]"),typeof d.userUnit=="number"&&d.userUnit!==1&&H("/UserUnit "+d.userUnit),Nt.publish("putPage",{objId:J,pageContext:Ze[T],pageNumber:T,page:$}),H("/Contents "+te+" 0 R"),H(">>"),H("endobj");var ye=$.join(`
`);return K===B.ADVANCED&&(ye+=`
Q`),pn(te,!0),sn({data:ye,filters:Xn(),objectId:te}),H("endobj"),J},li=v.__private__.putPages=function(){var d,T,$=[];for(d=1;d<=zt;d++)Ze[d].objId=Zt(),Ze[d].contentsObjId=Zt();for(d=1;d<=zt;d++)$.push(vr({number:d,data:Re[d],objId:Ze[d].objId,contentsObjId:Ze[d].contentsObjId,mediaBox:Ze[d].mediaBox,cropBox:Ze[d].cropBox,bleedBox:Ze[d].bleedBox,trimBox:Ze[d].trimBox,artBox:Ze[d].artBox,userUnit:Ze[d].userUnit,rootDictionaryObjId:Vr,resourceDictionaryObjId:Un}));pn(Vr,!0),H("<</Type /Pages");var J="/Kids [";for(T=0;T<zt;T++)J+=$[T]+" 0 R ";H(J+"]"),H("/Count "+zt),H(">>"),H("endobj"),Nt.publish("postPutPages")},hi=function(d){Nt.publish("putFont",{font:d,out:H,newObject:rn,putStream:sn}),d.isAlreadyPutted!==!0&&(d.objectNumber=rn(),H("<<"),H("/Type /Font"),H("/BaseFont /"+Oa(d.postScriptName)),H("/Subtype /Type1"),typeof d.encoding=="string"&&H("/Encoding /"+d.encoding),H("/FirstChar 32"),H("/LastChar 255"),H(">>"),H("endobj"))},fi=function(){for(var d in Lt)Lt.hasOwnProperty(d)&&(y===!1||y===!0&&b.hasOwnProperty(d))&&hi(Lt[d])},Mi=function(d){d.objectNumber=rn();var T=[];T.push({key:"Type",value:"/XObject"}),T.push({key:"Subtype",value:"/Form"}),T.push({key:"BBox",value:"["+[U(d.x),U(d.y),U(d.x+d.width),U(d.y+d.height)].join(" ")+"]"}),T.push({key:"Matrix",value:"["+d.matrix.toString()+"]"});var $=d.pages[1].join(`
`);sn({data:$,additionalKeyValues:T,objectId:d.objectNumber}),H("endobj")},Vi=function(){for(var d in fn)fn.hasOwnProperty(d)&&Mi(fn[d])},ra=function(d,T){var $,J=[],te=1/(T-1);for($=0;$<1;$+=te)J.push($);if(J.push(1),d[0].offset!=0){var ye={offset:0,color:d[0].color};d.unshift(ye)}if(d[d.length-1].offset!=1){var Pe={offset:1,color:d[d.length-1].color};d.push(Pe)}for(var Me="",u=0,m=0;m<J.length;m++){for($=J[m];$>d[u+1].offset;)u++;var w=d[u].offset,O=($-w)/(d[u+1].offset-w),ee=d[u].color,ce=d[u+1].color;Me+=Q(Math.round((1-O)*ee[0]+O*ce[0]).toString(16))+Q(Math.round((1-O)*ee[1]+O*ce[1]).toString(16))+Q(Math.round((1-O)*ee[2]+O*ce[2]).toString(16))}return Me.trim()},hs=function(d,T){T||(T=21);var $=rn(),J=ra(d.colors,T),te=[];te.push({key:"FunctionType",value:"0"}),te.push({key:"Domain",value:"[0.0 1.0]"}),te.push({key:"Size",value:"["+T+"]"}),te.push({key:"BitsPerSample",value:"8"}),te.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),te.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),sn({data:J,additionalKeyValues:te,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:$}),H("endobj"),d.objectNumber=rn(),H("<< /ShadingType "+d.type),H("/ColorSpace /DeviceRGB");var ye="/Coords ["+U(parseFloat(d.coords[0]))+" "+U(parseFloat(d.coords[1]))+" ";d.type===2?ye+=U(parseFloat(d.coords[2]))+" "+U(parseFloat(d.coords[3])):ye+=U(parseFloat(d.coords[2]))+" "+U(parseFloat(d.coords[3]))+" "+U(parseFloat(d.coords[4]))+" "+U(parseFloat(d.coords[5])),H(ye+="]"),d.matrix&&H("/Matrix ["+d.matrix.toString()+"]"),H("/Function "+$+" 0 R"),H("/Extend [true true]"),H(">>"),H("endobj")},ia=function(d,T){var $=Zt(),J=rn();T.push({resourcesOid:$,objectOid:J}),d.objectNumber=J;var te=[];te.push({key:"Type",value:"/Pattern"}),te.push({key:"PatternType",value:"1"}),te.push({key:"PaintType",value:"1"}),te.push({key:"TilingType",value:"1"}),te.push({key:"BBox",value:"["+d.boundingBox.map(U).join(" ")+"]"}),te.push({key:"XStep",value:U(d.xStep)}),te.push({key:"YStep",value:U(d.yStep)}),te.push({key:"Resources",value:$+" 0 R"}),d.matrix&&te.push({key:"Matrix",value:"["+d.matrix.toString()+"]"}),sn({data:d.stream,additionalKeyValues:te,objectId:d.objectNumber}),H("endobj")},di=function(d){var T;for(T in It)It.hasOwnProperty(T)&&(It[T]instanceof Vo?hs(It[T]):It[T]instanceof Ma&&ia(It[T],d))},pi=function(d){for(var T in d.objectNumber=rn(),H("<<"),d)switch(T){case"opacity":H("/ca "+j(d[T]));break;case"stroke-opacity":H("/CA "+j(d[T]))}H(">>"),H("endobj")},Ur=function(){var d;for(d in Wt)Wt.hasOwnProperty(d)&&pi(Wt[d])},Ui=function(){for(var d in H("/XObject <<"),fn)fn.hasOwnProperty(d)&&fn[d].objectNumber>=0&&H("/"+d+" "+fn[d].objectNumber+" 0 R");Nt.publish("putXobjectDict"),H(">>")},hc=function(){Kt.oid=rn(),H("<<"),H("/Filter /Standard"),H("/V "+Kt.v),H("/R "+Kt.r),H("/U <"+Kt.toHexString(Kt.U)+">"),H("/O <"+Kt.toHexString(Kt.O)+">"),H("/P "+Kt.P),H(">>"),H("endobj")},mo=function(){for(var d in H("/Font <<"),Lt)Lt.hasOwnProperty(d)&&(y===!1||y===!0&&b.hasOwnProperty(d))&&H("/"+d+" "+Lt[d].objectNumber+" 0 R");H(">>")},sa=function(){if(Object.keys(It).length>0){for(var d in H("/Shading <<"),It)It.hasOwnProperty(d)&&It[d]instanceof Vo&&It[d].objectNumber>=0&&H("/"+d+" "+It[d].objectNumber+" 0 R");Nt.publish("putShadingPatternDict"),H(">>")}},ji=function(d){if(Object.keys(It).length>0){for(var T in H("/Pattern <<"),It)It.hasOwnProperty(T)&&It[T]instanceof v.TilingPattern&&It[T].objectNumber>=0&&It[T].objectNumber<d&&H("/"+T+" "+It[T].objectNumber+" 0 R");Nt.publish("putTilingPatternDict"),H(">>")}},vo=function(){if(Object.keys(Wt).length>0){var d;for(d in H("/ExtGState <<"),Wt)Wt.hasOwnProperty(d)&&Wt[d].objectNumber>=0&&H("/"+d+" "+Wt[d].objectNumber+" 0 R");Nt.publish("putGStateDict"),H(">>")}},Gt=function(d){pn(d.resourcesOid,!0),H("<<"),H("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),mo(),sa(),ji(d.objectOid),vo(),Ui(),H(">>"),H("endobj")},yo=function(){var d=[];fi(),Ur(),Vi(),di(d),Nt.publish("putResources"),d.forEach(Gt),Gt({resourcesOid:Un,objectOid:Number.MAX_SAFE_INTEGER}),Nt.publish("postPutResources")},_o=function(){Nt.publish("putAdditionalObjects");for(var d=0;d<ke.length;d++){var T=ke[d];pn(T.objId,!0),H(T.content),H("endobj")}Nt.publish("postPutAdditionalObjects")},oa=function(d){qt[d.fontName]=qt[d.fontName]||{},qt[d.fontName][d.fontStyle]=d.id},wo=function(d,T,$,J,te){var ye={id:"F"+(Object.keys(Lt).length+1).toString(10),postScriptName:d,fontName:T,fontStyle:$,encoding:J,isStandardFont:te||!1,metadata:{}};return Nt.publish("addFont",{font:ye,instance:this}),Lt[ye.id]=ye,oa(ye),ye.id},aa=function(d){for(var T=0,$=Ce.length;T<$;T++){var J=wo.call(this,d[T][0],d[T][1],d[T][2],Ce[T][3],!0);y===!1&&(b[J]=!0);var te=d[T][0].split("-");oa({id:J,fontName:te[0],fontStyle:te[1]||""})}Nt.publish("addFonts",{fonts:Lt,dictionary:qt})},or=function(d){return d.foo=function(){try{return d.apply(this,arguments)}catch(J){var T=J.stack||"";~T.indexOf(" at ")&&(T=T.split(" at ")[1]);var $="Error in function "+T.split(`
`)[0].split("<")[0]+": "+J.message;if(!it.console)throw new Error($);it.console.error($,J),it.alert&&alert($)}},d.foo.bar=d,d.foo},fs=function(d,T){var $,J,te,ye,Pe,Me,u,m,w;if(te=(T=T||{}).sourceEncoding||"Unicode",Pe=T.outputEncoding,(T.autoencode||Pe)&&Lt[vt].metadata&&Lt[vt].metadata[te]&&Lt[vt].metadata[te].encoding&&(ye=Lt[vt].metadata[te].encoding,!Pe&&Lt[vt].encoding&&(Pe=Lt[vt].encoding),!Pe&&ye.codePages&&(Pe=ye.codePages[0]),typeof Pe=="string"&&(Pe=ye[Pe]),Pe)){for(u=!1,Me=[],$=0,J=d.length;$<J;$++)(m=Pe[d.charCodeAt($)])?Me.push(String.fromCharCode(m)):Me.push(d[$]),Me[$].charCodeAt(0)>>8&&(u=!0);d=Me.join("")}for($=d.length;u===void 0&&$!==0;)d.charCodeAt($-1)>>8&&(u=!0),$--;if(!u)return d;for(Me=T.noBOM?[]:[254,255],$=0,J=d.length;$<J;$++){if((w=(m=d.charCodeAt($))>>8)>>8)throw new Error("Character at position "+$+" of string '"+d+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Me.push(w),Me.push(m-(w<<8))}return String.fromCharCode.apply(void 0,Me)},en=v.__private__.pdfEscape=v.pdfEscape=function(d,T){return fs(d,T).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Zn=v.__private__.beginPage=function(d){Re[++zt]=[],Ze[zt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(d[0]),topRightY:Number(d[1])}},bo(zt),_e(Re[z])},Bi=function(d,T){var $,J,te;switch(t=T||t,typeof d=="string"&&($=P(d.toLowerCase()),Array.isArray($)&&(J=$[0],te=$[1])),Array.isArray(d)&&(J=d[0]*Be,te=d[1]*Be),isNaN(J)&&(J=i[0],te=i[1]),(J>14400||te>14400)&&(Bt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),J=Math.min(14400,J),te=Math.min(14400,te)),i=[J,te],t.substr(0,1)){case"l":te>J&&(i=[te,J]);break;case"p":J>te&&(i=[te,J])}Zn(i),So(To),H(Rn),Lo!==0&&H(Lo+" J"),Es!==0&&H(Es+" j"),Nt.publish("addPage",{pageNumber:zt})},ds=function(d){d>0&&d<=zt&&(Re.splice(d,1),Ze.splice(d,1),zt--,z>zt&&(z=zt),this.setPage(z))},bo=function(d){d>0&&d<=zt&&(z=d)},Ot=v.__private__.getNumberOfPages=v.getNumberOfPages=function(){return Re.length-1},qi=function(d,T,$){var J,te=void 0;return $=$||{},d=d!==void 0?d:Lt[vt].fontName,T=T!==void 0?T:Lt[vt].fontStyle,J=d.toLowerCase(),qt[J]!==void 0&&qt[J][T]!==void 0?te=qt[J][T]:qt[d]!==void 0&&qt[d][T]!==void 0?te=qt[d][T]:$.disableWarning===!1&&Bt.warn("Unable to look up font label for font '"+d+"', '"+T+"'. Refer to getFontList() for available fonts."),te||$.noFallback||(te=qt.times[T])==null&&(te=qt.times.normal),te},zi=v.__private__.putInfo=function(){var d=rn(),T=function(J){return J};for(var $ in g!==null&&(T=Kt.encryptor(d,0)),H("<<"),H("/Producer ("+en(T("jsPDF "+nt.version))+")"),tt)tt.hasOwnProperty($)&&tt[$]&&H("/"+$.substr(0,1).toUpperCase()+$.substr(1)+" ("+en(T(tt[$]))+")");H("/CreationDate ("+en(T(pe))+")"),H(">>"),H("endobj")},jr=v.__private__.putCatalog=function(d){var T=(d=d||{}).rootDictionaryObjId||Vr;switch(rn(),H("<<"),H("/Type /Catalog"),H("/Pages "+T+" 0 R"),je||(je="fullwidth"),je){case"fullwidth":H("/OpenAction [3 0 R /FitH null]");break;case"fullheight":H("/OpenAction [3 0 R /FitV null]");break;case"fullpage":H("/OpenAction [3 0 R /Fit]");break;case"original":H("/OpenAction [3 0 R /XYZ null null 1]");break;default:var $=""+je;$.substr($.length-1)==="%"&&(je=parseInt(je)/100),typeof je=="number"&&H("/OpenAction [3 0 R /XYZ null null "+j(je)+"]")}switch(Qe||(Qe="continuous"),Qe){case"continuous":H("/PageLayout /OneColumn");break;case"single":H("/PageLayout /SinglePage");break;case"two":case"twoleft":H("/PageLayout /TwoColumnLeft");break;case"tworight":H("/PageLayout /TwoColumnRight")}at&&H("/PageMode /"+at),Nt.publish("putCatalog"),H(">>"),H("endobj")},fc=v.__private__.putTrailer=function(){H("trailer"),H("<<"),H("/Size "+(ne+1)),H("/Root "+ne+" 0 R"),H("/Info "+(ne-1)+" 0 R"),g!==null&&H("/Encrypt "+Kt.oid+" 0 R"),H("/ID [ <"+fe+"> <"+fe+"> ]"),H(">>")},ca=v.__private__.putHeader=function(){H("%PDF-"+M),H("%")},dc=v.__private__.putXRef=function(){var d="0000000000";H("xref"),H("0 "+(ne+1)),H("0000000000 65535 f ");for(var T=1;T<=ne;T++)typeof ue[T]=="function"?H((d+ue[T]()).slice(-10)+" 00000 n "):ue[T]!==void 0?H((d+ue[T]).slice(-10)+" 00000 n "):H("0000000000 00000 n ")},Br=v.__private__.buildDocument=function(){Xe(),_e(he),Nt.publish("buildDocument"),ca(),li(),_o(),yo(),g!==null&&hc(),zi(),jr();var d=de;return dc(),fc(),H("startxref"),H(""+d),H("%%EOF"),_e(Re[z]),he.join(`
`)},ps=v.__private__.getBlob=function(d){return new Blob([Ke(d)],{type:"application/pdf"})},gs=v.output=v.__private__.output=or(function(d,T){switch(typeof(T=T||{})=="string"?T={filename:T}:T.filename=T.filename||"generated.pdf",d){case void 0:return Br();case"save":v.save(T.filename);break;case"arraybuffer":return Ke(Br());case"blob":return ps(Br());case"bloburi":case"bloburl":if(it.URL!==void 0&&typeof it.URL.createObjectURL=="function")return it.URL&&it.URL.createObjectURL(ps(Br()))||void 0;Bt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var $="",J=Br();try{$=ed(J)}catch{$=ed(unescape(encodeURIComponent(J)))}return"data:application/pdf;filename="+T.filename+";base64,"+$;case"pdfobjectnewwindow":if(Object.prototype.toString.call(it)==="[object Window]"){var te="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ye=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';T.pdfObjectUrl&&(te=T.pdfObjectUrl,ye="");var Pe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+te+'"'+ye+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(T)+");<\/script></body></html>",Me=it.open();return Me!==null&&Me.document.write(Pe),Me}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(it)==="[object Window]"){var u='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(T.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+T.filename+'" width="500px" height="400px" /></body></html>',m=it.open();if(m!==null){m.document.write(u);var w=this;m.document.documentElement.querySelector("#pdfViewer").onload=function(){m.document.title=T.filename,m.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(w.output("bloburl"))}}return m}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(it)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var O='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",T)+'"></iframe></body></html>',ee=it.open();if(ee!==null&&(ee.document.write(O),ee.document.title=T.filename),ee||typeof safari>"u")return ee;break;case"datauri":case"dataurl":return it.document.location.href=this.output("datauristring",T);default:return null}}),gi=function(d){return Array.isArray(Pr)===!0&&Pr.indexOf(d)>-1};switch(r){case"pt":Be=1;break;case"mm":Be=72/25.4;break;case"cm":Be=72/2.54;break;case"in":Be=72;break;case"px":Be=gi("px_scaling")==1?.75:96/72;break;case"pc":case"em":Be=12;break;case"ex":Be=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Be=r}var Kt=null;qe(),se();var ua=function(d){return g!==null?Kt.encryptor(d,0):function(T){return T}},Ao=v.__private__.getPageInfo=v.getPageInfo=function(d){if(isNaN(d)||d%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ze[d].objId,pageNumber:d,pageContext:Ze[d]}},ct=v.__private__.getPageInfoByObjId=function(d){if(isNaN(d)||d%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var T in Ze)if(Ze[T].objId===d)break;return Ao(T)},mi=v.__private__.getCurrentPageInfo=v.getCurrentPageInfo=function(){return{objId:Ze[z].objId,pageNumber:z,pageContext:Ze[z]}};v.addPage=function(){return Bi.apply(this,arguments),this},v.setPage=function(){return bo.apply(this,arguments),_e.call(this,Re[z]),this},v.insertPage=function(d){return this.addPage(),this.movePage(z,d),this},v.movePage=function(d,T){var $,J;if(d>T){$=Re[d],J=Ze[d];for(var te=d;te>T;te--)Re[te]=Re[te-1],Ze[te]=Ze[te-1];Re[T]=$,Ze[T]=J,this.setPage(T)}else if(d<T){$=Re[d],J=Ze[d];for(var ye=d;ye<T;ye++)Re[ye]=Re[ye+1],Ze[ye]=Ze[ye+1];Re[T]=$,Ze[T]=J,this.setPage(T)}return this},v.deletePage=function(){return ds.apply(this,arguments),this},v.__private__.text=v.text=function(d,T,$,J,te){var ye,Pe,Me,u,m,w,O,ee,ce,Le=(J=J||{}).scope||this;if(typeof d=="number"&&typeof T=="number"&&(typeof $=="string"||Array.isArray($))){var ft=$;$=T,T=d,d=ft}if(arguments[3]instanceof He?(I("The transform parameter of text() with a Matrix value"),ce=te):(Me=arguments[4],u=arguments[5],Mt(O=arguments[3])==="object"&&O!==null||(typeof Me=="string"&&(u=Me,Me=null),typeof O=="string"&&(u=O,O=null),typeof O=="number"&&(Me=O,O=null),J={flags:O,angle:Me,align:u})),isNaN(T)||isNaN($)||d==null)throw new Error("Invalid arguments passed to jsPDF.text");if(d.length===0)return Le;var wt="",dt=!1,kt=typeof J.lineHeightFactor=="number"?J.lineHeightFactor:Ct,Ut=Le.internal.scaleFactor;function Wr($t){return $t=$t.split("	").join(Array(J.TabLen||9).join(" ")),en($t,O)}function Cn($t){for(var Ht,an=$t.concat(),bn=[],Yi=an.length;Yi--;)typeof(Ht=an.shift())=="string"?bn.push(Ht):Array.isArray($t)&&(Ht.length===1||Ht[1]===void 0&&Ht[2]===void 0)?bn.push(Ht[0]):bn.push([Ht[0],Ht[1],Ht[2]]);return bn}function wi($t,Ht){var an;if(typeof $t=="string")an=Ht($t)[0];else if(Array.isArray($t)){for(var bn,Yi,Ac=$t.concat(),Aa=[],yu=Ac.length;yu--;)typeof(bn=Ac.shift())=="string"?Aa.push(Ht(bn)[0]):Array.isArray(bn)&&typeof bn[0]=="string"&&(Yi=Ht(bn[0],bn[1],bn[2]),Aa.push([Yi[0],Yi[1],Yi[2]]));an=Aa}return an}var bi=!1,gc=!0;if(typeof d=="string")bi=!0;else if(Array.isArray(d)){var mc=d.concat();Pe=[];for(var pa,kn=mc.length;kn--;)(typeof(pa=mc.shift())!="string"||Array.isArray(pa)&&typeof pa[0]!="string")&&(gc=!1);bi=gc}if(bi===!1)throw new Error('Type of text must be string or Array. "'+d+'" is not recognized.');typeof d=="string"&&(d=d.match(/[\r?\n]/)?d.split(/\r\n|\r|\n/g):[d]);var ga=xe/Le.internal.scaleFactor,ma=ga*(kt-1);switch(J.baseline){case"bottom":$-=ma;break;case"top":$+=ga-ma;break;case"hanging":$+=ga-2*ma;break;case"middle":$+=ga/2-ma}if((w=J.maxWidth||0)>0&&(typeof d=="string"?d=Le.splitTextToSize(d,w):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function($t,Ht){return $t.concat(Le.splitTextToSize(Ht,w))},[]))),ye={text:d,x:T,y:$,options:J,mutex:{pdfEscape:en,activeFontKey:vt,fonts:Lt,activeFontSize:xe}},Nt.publish("preProcessText",ye),d=ye.text,Me=(J=ye.options).angle,!(ce instanceof He)&&Me&&typeof Me=="number"){Me*=Math.PI/180,J.rotationDirection===0&&(Me=-Me),K===B.ADVANCED&&(Me=-Me);var va=Math.cos(Me),vc=Math.sin(Me);ce=new He(va,vc,-vc,va,0,0)}else Me&&Me instanceof He&&(ce=Me);K!==B.ADVANCED||ce||(ce=Vn),(m=J.charSpace||Hi)!==void 0&&(wt+=U(E(m))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ee=J.horizontalScale)!==void 0&&(wt+=U(100*ee)+` Tz
`),J.lang;var ar=-1,wh=J.renderingMode!==void 0?J.renderingMode:J.stroke,yc=Le.internal.getCurrentPageInfo().pageContext;switch(wh){case 0:case!1:case"fill":ar=0;break;case 1:case!0:case"stroke":ar=1;break;case 2:case"fillThenStroke":ar=2;break;case 3:case"invisible":ar=3;break;case 4:case"fillAndAddForClipping":ar=4;break;case 5:case"strokeAndAddPathForClipping":ar=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ar=6;break;case 7:case"addToPathForClipping":ar=7}var pu=yc.usedRenderingMode!==void 0?yc.usedRenderingMode:-1;ar!==-1?wt+=ar+` Tr
`:pu!==-1&&(wt+=`0 Tr
`),ar!==-1&&(yc.usedRenderingMode=ar),u=J.align||"left";var Rr,ya=xe*kt,gu=Le.internal.pageSize.getWidth(),mu=Lt[vt];m=J.charSpace||Hi,w=J.maxWidth||0,O=Object.assign({autoencode:!0,noBOM:!0},J.flags);var Ps=[],Ro=function($t){return Le.getStringUnitWidth($t,{font:mu,charSpace:m,fontSize:xe,doKerning:!1})*xe/Ut};if(Object.prototype.toString.call(d)==="[object Array]"){var cr;Pe=Cn(d),u!=="left"&&(Rr=Pe.map(Ro));var er,Ls=0;if(u==="right"){T-=Rr[0],d=[],kn=Pe.length;for(var Ki=0;Ki<kn;Ki++)Ki===0?(er=wr(T),cr=wn($)):(er=E(Ls-Rr[Ki]),cr=-ya),d.push([Pe[Ki],er,cr]),Ls=Rr[Ki]}else if(u==="center"){T-=Rr[0]/2,d=[],kn=Pe.length;for(var Ji=0;Ji<kn;Ji++)Ji===0?(er=wr(T),cr=wn($)):(er=E((Ls-Rr[Ji])/2),cr=-ya),d.push([Pe[Ji],er,cr]),Ls=Rr[Ji]}else if(u==="left"){d=[],kn=Pe.length;for(var _a=0;_a<kn;_a++)d.push(Pe[_a])}else if(u==="justify"&&mu.encoding==="Identity-H"){d=[],kn=Pe.length,w=w!==0?w:gu;for(var Qi=0,on=0;on<kn;on++)if(cr=on===0?wn($):-ya,er=on===0?wr(T):Qi,on<kn-1){var _c=E((w-Rr[on])/(Pe[on].split(" ").length-1)),tr=Pe[on].split(" ");d.push([tr[0]+" ",er,cr]),Qi=0;for(var Cr=1;Cr<tr.length;Cr++){var wa=(Ro(tr[Cr-1]+" "+tr[Cr])-Ro(tr[Cr]))*Ut+_c;Cr==tr.length-1?d.push([tr[Cr],wa,0]):d.push([tr[Cr]+" ",wa,0]),Qi-=wa}}else d.push([Pe[on],er,cr]);d.push(["",Qi,0])}else{if(u!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(d=[],kn=Pe.length,w=w!==0?w:gu,on=0;on<kn;on++)cr=on===0?wn($):-ya,er=on===0?wr(T):0,on<kn-1?Ps.push(U(E((w-Rr[on])/(Pe[on].split(" ").length-1)))):Ps.push(0),d.push([Pe[on],er,cr])}}var vu=typeof J.R2L=="boolean"?J.R2L:Je;vu===!0&&(d=wi(d,function($t,Ht,an){return[$t.split("").reverse().join(""),Ht,an]})),ye={text:d,x:T,y:$,options:J,mutex:{pdfEscape:en,activeFontKey:vt,fonts:Lt,activeFontSize:xe}},Nt.publish("postProcessText",ye),d=ye.text,dt=ye.mutex.isHex||!1;var wc=Lt[vt].encoding;wc!=="WinAnsiEncoding"&&wc!=="StandardEncoding"||(d=wi(d,function($t,Ht,an){return[Wr($t),Ht,an]})),Pe=Cn(d),d=[];for(var Co,ko,Rs,xo=0,ba=1,Oo=Array.isArray(Pe[0])?ba:xo,Cs="",bc=function($t,Ht,an){var bn="";return an instanceof He?(an=typeof J.angle=="number"?ir(an,new He(1,0,0,1,$t,Ht)):ir(new He(1,0,0,1,$t,Ht),an),K===B.ADVANCED&&(an=ir(new He(1,0,0,-1,0,0),an)),bn=an.join(" ")+` Tm
`):bn=U($t)+" "+U(Ht)+` Td
`,bn},kr=0;kr<Pe.length;kr++){switch(Cs="",Oo){case ba:Rs=(dt?"<":"(")+Pe[kr][0]+(dt?">":")"),Co=parseFloat(Pe[kr][1]),ko=parseFloat(Pe[kr][2]);break;case xo:Rs=(dt?"<":"(")+Pe[kr]+(dt?">":")"),Co=wr(T),ko=wn($)}Ps!==void 0&&Ps[kr]!==void 0&&(Cs=Ps[kr]+` Tw
`),kr===0?d.push(Cs+bc(Co,ko,ce)+Rs):Oo===xo?d.push(Cs+Rs):Oo===ba&&d.push(Cs+bc(Co,ko,ce)+Rs)}d=Oo===xo?d.join(` Tj
T* `):d.join(` Tj
`),d+=` Tj
`;var xr=`BT
/`;return xr+=vt+" "+xe+` Tf
`,xr+=U(xe*kt)+` TL
`,xr+=$r+`
`,xr+=wt,xr+=d,H(xr+="ET"),b[vt]=!0,Le};var pc=v.__private__.clip=v.clip=function(d){return H(d==="evenodd"?"W*":"W"),this};v.clipEvenOdd=function(){return pc("evenodd")},v.__private__.discardPath=v.discardPath=function(){return H("n"),this};var Lr=v.__private__.isValidStyle=function(d){var T=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(d)!==-1&&(T=!0),T};v.__private__.setDefaultPathOperation=v.setDefaultPathOperation=function(d){return Lr(d)&&(f=d),this};var la=v.__private__.getStyle=v.getStyle=function(d){var T=f;switch(d){case"D":case"S":T="S";break;case"F":T="f";break;case"FD":case"DF":T="B";break;case"f":case"f*":case"B":case"B*":T=d}return T},yr=v.close=function(){return H("h"),this};v.stroke=function(){return H("S"),this},v.fill=function(d){return ms("f",d),this},v.fillEvenOdd=function(d){return ms("f*",d),this},v.fillStroke=function(d){return ms("B",d),this},v.fillStrokeEvenOdd=function(d){return ms("B*",d),this};var ms=function(d,T){Mt(T)==="object"?ys(T,d):H(d)},Eo=function(d){d===null||K===B.ADVANCED&&d===void 0||(d=la(d),H(d))};function vs(d,T,$,J,te){var ye=new Ma(T||this.boundingBox,$||this.xStep,J||this.yStep,this.gState,te||this.matrix);ye.stream=this.stream;var Pe=d+"$$"+this.cloneIndex+++"$$";return dn(Pe,ye),ye}var ys=function(d,T){var $=ui[d.key],J=It[$];if(J instanceof Vo)H("q"),H(ha(T)),J.gState&&v.setGState(J.gState),H(d.matrix.toString()+" cm"),H("/"+$+" sh"),H("Q");else if(J instanceof Ma){var te=new He(1,0,0,-1,0,jn());d.matrix&&(te=te.multiply(d.matrix||Vn),$=vs.call(J,d.key,d.boundingBox,d.xStep,d.yStep,te).id),H("q"),H("/Pattern cs"),H("/"+$+" scn"),J.gState&&v.setGState(J.gState),H(T),H("Q")}},ha=function(d){switch(d){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},qr=v.moveTo=function(d,T){return H(U(E(d))+" "+U(G(T))+" m"),this},_r=v.lineTo=function(d,T){return H(U(E(d))+" "+U(G(T))+" l"),this},zr=v.curveTo=function(d,T,$,J,te,ye){return H([U(E(d)),U(G(T)),U(E($)),U(G(J)),U(E(te)),U(G(ye)),"c"].join(" ")),this};v.__private__.line=v.line=function(d,T,$,J,te){if(isNaN(d)||isNaN(T)||isNaN($)||isNaN(J)||!Lr(te))throw new Error("Invalid arguments passed to jsPDF.line");return K===B.COMPAT?this.lines([[$-d,J-T]],d,T,[1,1],te||"S"):this.lines([[$-d,J-T]],d,T,[1,1]).stroke()},v.__private__.lines=v.lines=function(d,T,$,J,te,ye){var Pe,Me,u,m,w,O,ee,ce,Le,ft,wt,dt;if(typeof d=="number"&&(dt=$,$=T,T=d,d=dt),J=J||[1,1],ye=ye||!1,isNaN(T)||isNaN($)||!Array.isArray(d)||!Array.isArray(J)||!Lr(te)||typeof ye!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(qr(T,$),Pe=J[0],Me=J[1],m=d.length,ft=T,wt=$,u=0;u<m;u++)(w=d[u]).length===2?(ft=w[0]*Pe+ft,wt=w[1]*Me+wt,_r(ft,wt)):(O=w[0]*Pe+ft,ee=w[1]*Me+wt,ce=w[2]*Pe+ft,Le=w[3]*Me+wt,ft=w[4]*Pe+ft,wt=w[5]*Me+wt,zr(O,ee,ce,Le,ft,wt));return ye&&yr(),Eo(te),this},v.path=function(d){for(var T=0;T<d.length;T++){var $=d[T],J=$.c;switch($.op){case"m":qr(J[0],J[1]);break;case"l":_r(J[0],J[1]);break;case"c":zr.apply(this,J);break;case"h":yr()}}return this},v.__private__.rect=v.rect=function(d,T,$,J,te){if(isNaN(d)||isNaN(T)||isNaN($)||isNaN(J)||!Lr(te))throw new Error("Invalid arguments passed to jsPDF.rect");return K===B.COMPAT&&(J=-J),H([U(E(d)),U(G(T)),U(E($)),U(E(J)),"re"].join(" ")),Eo(te),this},v.__private__.triangle=v.triangle=function(d,T,$,J,te,ye,Pe){if(isNaN(d)||isNaN(T)||isNaN($)||isNaN(J)||isNaN(te)||isNaN(ye)||!Lr(Pe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[$-d,J-T],[te-$,ye-J],[d-te,T-ye]],d,T,[1,1],Pe,!0),this},v.__private__.roundedRect=v.roundedRect=function(d,T,$,J,te,ye,Pe){if(isNaN(d)||isNaN(T)||isNaN($)||isNaN(J)||isNaN(te)||isNaN(ye)||!Lr(Pe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Me=4/3*(Math.SQRT2-1);return te=Math.min(te,.5*$),ye=Math.min(ye,.5*J),this.lines([[$-2*te,0],[te*Me,0,te,ye-ye*Me,te,ye],[0,J-2*ye],[0,ye*Me,-te*Me,ye,-te,ye],[2*te-$,0],[-te*Me,0,-te,-ye*Me,-te,-ye],[0,2*ye-J],[0,-ye*Me,te*Me,-ye,te,-ye]],d+te,T,[1,1],Pe,!0),this},v.__private__.ellipse=v.ellipse=function(d,T,$,J,te){if(isNaN(d)||isNaN(T)||isNaN($)||isNaN(J)||!Lr(te))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ye=4/3*(Math.SQRT2-1)*$,Pe=4/3*(Math.SQRT2-1)*J;return qr(d+$,T),zr(d+$,T-Pe,d+ye,T-J,d,T-J),zr(d-ye,T-J,d-$,T-Pe,d-$,T),zr(d-$,T+Pe,d-ye,T+J,d,T+J),zr(d+ye,T+J,d+$,T+Pe,d+$,T),Eo(te),this},v.__private__.circle=v.circle=function(d,T,$,J){if(isNaN(d)||isNaN(T)||isNaN($)||!Lr(J))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(d,T,$,$,J)},v.setFont=function(d,T,$){return $&&(T=we(T,$)),vt=qi(d,T,{disableWarning:!1}),this};var Io=v.__private__.getFont=v.getFont=function(){return Lt[qi.apply(v,arguments)]};v.__private__.getFontList=v.getFontList=function(){var d,T,$={};for(d in qt)if(qt.hasOwnProperty(d))for(T in $[d]=[],qt[d])qt[d].hasOwnProperty(T)&&$[d].push(T);return $},v.addFont=function(d,T,$,J,te){var ye=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ye.indexOf(arguments[3])!==-1?te=arguments[3]:arguments[3]&&ye.indexOf(arguments[3])==-1&&($=we($,J)),te=te||"Identity-H",wo.call(this,d,T,$,te)};var Ct,To=n.lineWidth||.200025,_s=v.__private__.getLineWidth=v.getLineWidth=function(){return To},So=v.__private__.setLineWidth=v.setLineWidth=function(d){return To=d,H(U(E(d))+" w"),this};v.__private__.setLineDash=nt.API.setLineDash=nt.API.setLineDashPattern=function(d,T){if(d=d||[],T=T||0,isNaN(T)||!Array.isArray(d))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return d=d.map(function($){return U(E($))}).join(" "),T=U(E(T)),H("["+d+"] "+T+" d"),this};var No=v.__private__.getLineHeight=v.getLineHeight=function(){return xe*Ct};v.__private__.getLineHeight=v.getLineHeight=function(){return xe*Ct};var Po=v.__private__.setLineHeightFactor=v.setLineHeightFactor=function(d){return typeof(d=d||1.15)=="number"&&(Ct=d),this},$i=v.__private__.getLineHeightFactor=v.getLineHeightFactor=function(){return Ct};Po(n.lineHeight);var wr=v.__private__.getHorizontalCoordinate=function(d){return E(d)},wn=v.__private__.getVerticalCoordinate=function(d){return K===B.ADVANCED?d:Ze[z].mediaBox.topRightY-Ze[z].mediaBox.bottomLeftY-E(d)},fa=v.__private__.getHorizontalCoordinateString=v.getHorizontalCoordinateString=function(d){return U(wr(d))},vi=v.__private__.getVerticalCoordinateString=v.getVerticalCoordinateString=function(d){return U(wn(d))},Rn=n.strokeColor||"0 G";v.__private__.getStrokeColor=v.getDrawColor=function(){return sr(Rn)},v.__private__.setStrokeColor=v.setDrawColor=function(d,T,$,J){return Rn=Yn({ch1:d,ch2:T,ch3:$,ch4:J,pdfColorType:"draw",precision:2}),H(Rn),this};var ws=n.fillColor||"0 g";v.__private__.getFillColor=v.getFillColor=function(){return sr(ws)},v.__private__.setFillColor=v.setFillColor=function(d,T,$,J){return ws=Yn({ch1:d,ch2:T,ch3:$,ch4:J,pdfColorType:"fill",precision:2}),H(ws),this};var $r=n.textColor||"0 g",bs=v.__private__.getTextColor=v.getTextColor=function(){return sr($r)};v.__private__.setTextColor=v.setTextColor=function(d,T,$,J){return $r=Yn({ch1:d,ch2:T,ch3:$,ch4:J,pdfColorType:"text",precision:3}),this};var Hi=n.charSpace,As=v.__private__.getCharSpace=v.getCharSpace=function(){return parseFloat(Hi||0)};v.__private__.setCharSpace=v.setCharSpace=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Hi=d,this};var Lo=0;v.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},v.__private__.setLineCap=v.setLineCap=function(d){var T=v.CapJoinStyles[d];if(T===void 0)throw new Error("Line cap style of '"+d+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Lo=T,H(T+" J"),this};var Es=0;v.__private__.setLineJoin=v.setLineJoin=function(d){var T=v.CapJoinStyles[d];if(T===void 0)throw new Error("Line join style of '"+d+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Es=T,H(T+" j"),this},v.__private__.setLineMiterLimit=v.__private__.setMiterLimit=v.setLineMiterLimit=v.setMiterLimit=function(d){if(d=d||0,isNaN(d))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return H(U(E(d))+" M"),this},v.GState=Vl,v.setGState=function(d){(d=typeof d=="string"?Wt[Ln[d]]:yi(null,d)).equals(gr)||(H("/"+d.id+" gs"),gr=d)};var yi=function(d,T){if(!d||!Ln[d]){var $=!1;for(var J in Wt)if(Wt.hasOwnProperty(J)&&Wt[J].equals(T)){$=!0;break}if($)T=Wt[J];else{var te="GS"+(Object.keys(Wt).length+1).toString(10);Wt[te]=T,T.id=te}return d&&(Ln[d]=T.id),Nt.publish("addGState",T),T}};v.addGState=function(d,T){return yi(d,T),this},v.saveGraphicsState=function(){return H("q"),Nr.push({key:vt,size:xe,color:$r}),this},v.restoreGraphicsState=function(){H("Q");var d=Nr.pop();return vt=d.key,xe=d.size,$r=d.color,gr=null,this},v.setCurrentTransformationMatrix=function(d){return H(d.toString()+" cm"),this},v.comment=function(d){return H("#"+d),this};var Wi=function(d,T){var $=d||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return $},set:function(ye){isNaN(ye)||($=parseFloat(ye))}});var J=T||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return J},set:function(ye){isNaN(ye)||(J=parseFloat(ye))}});var te="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return te},set:function(ye){te=ye.toString()}}),this},Is=function(d,T,$,J){Wi.call(this,d,T),this.type="rect";var te=$||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return te},set:function(Pe){isNaN(Pe)||(te=parseFloat(Pe))}});var ye=J||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ye},set:function(Pe){isNaN(Pe)||(ye=parseFloat(Pe))}}),this},Gi=function(){this.page=zt,this.currentPage=z,this.pages=Re.slice(0),this.pagesContext=Ze.slice(0),this.x=Xt,this.y=Et,this.matrix=rr,this.width=_i(z),this.height=jn(z),this.outputDestination=Oe,this.id="",this.objectNumber=-1};Gi.prototype.restore=function(){zt=this.page,z=this.currentPage,Ze=this.pagesContext,Re=this.pages,Xt=this.x,Et=this.y,rr=this.matrix,Ss(z,this.width),Ns(z,this.height),Oe=this.outputDestination};var Ts=function(d,T,$,J,te){mr.push(new Gi),zt=z=0,Re=[],Xt=d,Et=T,rr=te,Zn([$,J])},da=function(d){if(Mn[d])mr.pop().restore();else{var T=new Gi,$="Xo"+(Object.keys(fn).length+1).toString(10);T.id=$,Mn[d]=$,fn[$]=T,Nt.publish("addFormObject",T),mr.pop().restore()}};for(var Hr in v.beginFormObject=function(d,T,$,J,te){return Ts(d,T,$,J,te),this},v.endFormObject=function(d){return da(d),this},v.doFormObject=function(d,T){var $=fn[Mn[d]];return H("q"),H(T.toString()+" cm"),H("/"+$.id+" Do"),H("Q"),this},v.getFormObject=function(d){var T=fn[Mn[d]];return{x:T.x,y:T.y,width:T.width,height:T.height,matrix:T.matrix}},v.save=function(d,T){return d=d||"generated.pdf",(T=T||{}).returnPromise=T.returnPromise||!1,T.returnPromise===!1?(Mo(ps(Br()),d),typeof Mo.unload=="function"&&it.setTimeout&&setTimeout(Mo.unload,911),this):new Promise(function($,J){try{var te=Mo(ps(Br()),d);typeof Mo.unload=="function"&&it.setTimeout&&setTimeout(Mo.unload,911),$(te)}catch(ye){J(ye.message)}})},nt.API)nt.API.hasOwnProperty(Hr)&&(Hr==="events"&&nt.API.events.length?function(d,T){var $,J,te;for(te=T.length-1;te!==-1;te--)$=T[te][0],J=T[te][1],d.subscribe.apply(d,[$].concat(typeof J=="function"?[J]:J))}(Nt,nt.API.events):v[Hr]=nt.API[Hr]);var _i=v.getPageWidth=function(d){return(Ze[d=d||z].mediaBox.topRightX-Ze[d].mediaBox.bottomLeftX)/Be},Ss=v.setPageWidth=function(d,T){Ze[d].mediaBox.topRightX=T*Be+Ze[d].mediaBox.bottomLeftX},jn=v.getPageHeight=function(d){return(Ze[d=d||z].mediaBox.topRightY-Ze[d].mediaBox.bottomLeftY)/Be},Ns=v.setPageHeight=function(d,T){Ze[d].mediaBox.topRightY=T*Be+Ze[d].mediaBox.bottomLeftY};return v.internal={pdfEscape:en,getStyle:la,getFont:Io,getFontSize:Ve,getCharSpace:As,getTextColor:bs,getLineHeight:No,getLineHeightFactor:$i,getLineWidth:_s,write:ut,getHorizontalCoordinate:wr,getVerticalCoordinate:wn,getCoordinateString:fa,getVerticalCoordinateString:vi,collections:{},newObject:rn,newAdditionalObject:ls,newObjectDeferred:Zt,newObjectDeferredBegin:pn,getFilters:Xn,putStream:sn,events:Nt,scaleFactor:Be,pageSize:{getWidth:function(){return _i(z)},setWidth:function(d){Ss(z,d)},getHeight:function(){return jn(z)},setHeight:function(d){Ns(z,d)}},encryptionOptions:g,encryption:Kt,getEncryptor:ua,output:gs,getNumberOfPages:Ot,pages:Re,out:H,f2:j,f3:A,getPageInfo:Ao,getPageInfoByObjId:ct,getCurrentPageInfo:mi,getPDFVersion:x,Point:Wi,Rectangle:Is,Matrix:He,hasHotfix:gi},Object.defineProperty(v.internal.pageSize,"width",{get:function(){return _i(z)},set:function(d){Ss(z,d)},enumerable:!0,configurable:!0}),Object.defineProperty(v.internal.pageSize,"height",{get:function(){return jn(z)},set:function(d){Ns(z,d)},enumerable:!0,configurable:!0}),aa.call(v,Ce),vt="F1",Bi(i,t),Nt.publish("initialized"),v}xa.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},xa.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},xa.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},xa.prototype.processOwnerPassword=function(n,e){return nd(td(e).substr(0,5),n)},xa.prototype.encryptor=function(n,e){var t=td(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return nd(t,r)}},Vl.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Mt(n)!==Mt(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},nt.API={events:[]},nt.version="3.0.1";var nn=nt.API,pp=1,na=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Na=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},pt=function(n){return n.toFixed(2)},Bs=function(n){return n.toFixed(5)};nn.__acroform__={};var pr=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},Xm=function(n){return n*pp},Ei=function(n){var e=new rv,t=Ge.internal.getHeight(n)||0,r=Ge.internal.getWidth(n)||0;return e.BBox=[0,0,Number(pt(r)),Number(pt(t))],e},aS=nn.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},cS=nn.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},uS=nn.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(n&1<<e)==0?0:1},un=nn.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return uS(n,e-1)},ln=nn.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return aS(n,e-1)},hn=nn.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return cS(n,e-1)},lS=nn.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],s=n[1],o=n[2],a=n[3],l={};return l.lowerLeft_X=t(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=t(i+o)||0,l.upperRight_Y=r(s)||0,[Number(pt(l.lowerLeft_X)),Number(pt(l.lowerLeft_Y)),Number(pt(l.upperRight_X)),Number(pt(l.upperRight_Y))]},hS=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=rd(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+pt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Ei(n);return s.scope=n.scope,s.stream=e.join(`
`),s}},rd=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(A){return A.split(`
`)}):i.map(function(A){return[A]});var s=t,o=Ge.internal.getHeight(n)||0;o=o<0?-o:o;var a=Ge.internal.getWidth(n)||0;a=a<0?-a:a;var l=function(A,E,N){if(A+1<i.length){var G=E+" "+i[A+1][0];return Ku(G,n,N).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var f,g,y=Ku("3",n,s).height,b=n.multiline?o-s:(o-y)/2,v=b+=2,M=0,x=0,F=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Ku(e,n,s=12).width+", FieldWidth:"+a+`
`;break}for(var P="",B=0,K=0;K<i.length;K++)if(i.hasOwnProperty(K)){var ie=!1;if(i[K].length!==1&&F!==i[K].length-1){if((y+2)*(B+2)+2>o)continue e;P+=i[K][F],ie=!0,x=K,K--}else{P=(P+=i[K][F]+" ").substr(P.length-1)==" "?P.substr(0,P.length-1):P;var le=parseInt(K),we=l(le,P,s),U=K>=i.length-1;if(we&&!U){P+=" ",F=0;continue}if(we||U){if(U)x=le;else if(n.multiline&&(y+2)*(B+2)+2>o)continue e}else{if(!n.multiline||(y+2)*(B+2)+2>o)continue e;x=le}}for(var I="",k=M;k<=x;k++){var j=i[k];if(n.multiline){if(k===x){I+=j[F]+" ",F=(F+1)%j.length;continue}if(k===M){I+=j[j.length-1]+" ";continue}}I+=j[0]+" "}switch(I=I.substr(I.length-1)==" "?I.substr(0,I.length-1):I,g=Ku(I,n,s).width,n.textAlign){case"right":f=a-g-2;break;case"center":f=(a-g)/2;break;case"left":default:f=2}e+=pt(f)+" "+pt(v)+` Td
`,e+="("+na(I)+`) Tj
`,e+=-pt(f)+` 0 Td
`,v=-(s+2),g=0,M=ie?x:x+1,B++,P=""}break}return r.text=e,r.fontSize=s,r},Ku=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},fS={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},dS=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},pS=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),Mt(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},gS=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(ai.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(fS)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");pp=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new iv,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&dS(s,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],f=a.Rect;if(a.Rect&&(a.Rect=lS(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Ge.createDefaultAppearanceStream(a),Mt(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=f,a.hasAppearanceStream&&!a.appearanceStreamContent){var g=hS(a);l.push({key:"AP",value:"<</N "+g+">>"}),i.internal.acroformPlugin.xForms.push(g)}if(a.appearanceStreamContent){var y="";for(var b in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(b)){var v=a.appearanceStreamContent[b];if(y+="/"+b+" ",y+="<<",Object.keys(v).length>=1||Array.isArray(v)){for(var o in v)if(v.hasOwnProperty(o)){var M=v[o];typeof M=="function"&&(M=M.call(i,a)),y+="/"+o+" "+M+" ",i.internal.acroformPlugin.xForms.indexOf(M)>=0||i.internal.acroformPlugin.xForms.push(M)}}else typeof(M=v)=="function"&&(M=M.call(i,a)),y+="/"+o+" "+M,i.internal.acroformPlugin.xForms.indexOf(M)>=0||i.internal.acroformPlugin.xForms.push(M);y+=">>"}l.push({key:"AP",value:`<<
`+y+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&pS(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},nv=nn.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(o){return o};if(Array.isArray(n)){for(var i="[",s=0;s<n.length;s++)switch(s!==0&&(i+=" "),Mt(n[s])){case"boolean":case"number":case"object":i+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+na(r(n[s].toString()))+")"):i+=n[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},ff=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+na(r(n))+")"},Ti=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ti.prototype.toString=function(){return this.objId+" 0 R"},Ti.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Ti.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:nv(i,this.objId,this.scope)}):i instanceof Ti?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var rv=function(){Ti.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};pr(rv,Ti);var iv=function(){Ti.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+na(t(n))+")"}},set:function(t){n=t}})};pr(iv,Ti);var ai=function n(){Ti.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(P){if(isNaN(P))throw new Error('Invalid value "'+P+'" for attribute F supplied.');e=P}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!un(e,3)},set:function(P){P?this.F=ln(e,3):this.F=hn(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(P){if(isNaN(P))throw new Error('Invalid value "'+P+'" for attribute Ff supplied.');t=P}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(P){r=P!==void 0?P:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(P){r[0]=P}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(P){r[1]=P}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(P){r[2]=P}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(P){r[3]=P}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(P){switch(P){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=P;break;default:throw new Error('Invalid value "'+P+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Ul)return;s="FieldObject"+n.FieldNum++}var P=function(B){return B};return this.scope&&(P=this.scope.internal.getEncryptor(this.objId)),"("+na(P(s))+")"},set:function(P){s=P.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(P){s=P}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(P){o=P}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(P){a=P}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(P){l=P}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/pp:f},set:function(P){f=P}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(P){g=P}});var y="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!y||this instanceof Ul||this instanceof qo))return ff(y,this.objId,this.scope)},set:function(P){P=P.toString(),y=P}});var b=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof Pn?b:ff(b,this.objId,this.scope)},set:function(P){P=P.toString(),b=this instanceof Pn?P:P.substr(0,1)==="("?Na(P.substr(1,P.length-2)):Na(P)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Pn?Na(b.substr(1,b.length-1)):b},set:function(P){P=P.toString(),b=this instanceof Pn?"/"+P:P}});var v=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(v)return v},set:function(P){this.V=P}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Pn?v:ff(v,this.objId,this.scope)},set:function(P){P=P.toString(),v=this instanceof Pn?P:P.substr(0,1)==="("?Na(P.substr(1,P.length-2)):Na(P)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Pn?Na(v.substr(1,v.length-1)):v},set:function(P){P=P.toString(),v=this instanceof Pn?"/"+P:P}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var M,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(P){P=!!P,x=P}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(M)return M},set:function(P){M=P}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,1)},set:function(P){P?this.Ff=ln(this.Ff,1):this.Ff=hn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,2)},set:function(P){P?this.Ff=ln(this.Ff,2):this.Ff=hn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,3)},set:function(P){P?this.Ff=ln(this.Ff,3):this.Ff=hn(this.Ff,3)}});var F=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(F!==null)return F},set:function(P){if([0,1,2].indexOf(P)===-1)throw new Error('Invalid value "'+P+'" for attribute Q supplied.');F=P}}),Object.defineProperty(this,"textAlign",{get:function(){var P;switch(F){case 0:default:P="left";break;case 1:P="center";break;case 2:P="right"}return P},configurable:!0,enumerable:!0,set:function(P){switch(P){case"right":case 2:F=2;break;case"center":case 1:F=1;break;case"left":case 0:default:F=0}}})};pr(ai,Ti);var $a=function(){ai.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return nv(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,f=[];l=o.exec(s);)f.push(l[a]);return f}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,18)},set:function(t){t?this.Ff=ln(this.Ff,18):this.Ff=hn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=ln(this.Ff,19):this.Ff=hn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,20)},set:function(t){t?(this.Ff=ln(this.Ff,20),e.sort()):this.Ff=hn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,22)},set:function(t){t?this.Ff=ln(this.Ff,22):this.Ff=hn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,23)},set:function(t){t?this.Ff=ln(this.Ff,23):this.Ff=hn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,27)},set:function(t){t?this.Ff=ln(this.Ff,27):this.Ff=hn(this.Ff,27)}}),this.hasAppearanceStream=!1};pr($a,ai);var Ha=function(){$a.call(this),this.fontName="helvetica",this.combo=!1};pr(Ha,$a);var Wa=function(){Ha.call(this),this.combo=!0};pr(Wa,Ha);var ul=function(){Wa.call(this),this.edit=!0};pr(ul,Wa);var Pn=function(){ai.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,15)},set:function(t){t?this.Ff=ln(this.Ff,15):this.Ff=hn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,16)},set:function(t){t?this.Ff=ln(this.Ff,16):this.Ff=hn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,17)},set:function(t){t?this.Ff=ln(this.Ff,17):this.Ff=hn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,26)},set:function(t){t?this.Ff=ln(this.Ff,26):this.Ff=hn(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+na(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Mt(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};pr(Pn,ai);var ll=function(){Pn.call(this),this.pushButton=!0};pr(ll,Pn);var Ga=function(){Pn.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};pr(Ga,Pn);var Ul=function(){var n,e;ai.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+na(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Mt(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ge.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};pr(Ul,ai),Ga.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Ga.prototype.createOption=function(n){var e=new Ul;return e.Parent=this,e.optionName=n,this.Kids.push(e),mS.call(this.scope,e),e};var hl=function(){Pn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ge.CheckBox.createAppearanceStream()};pr(hl,Pn);var qo=function(){ai.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,13)},set:function(e){e?this.Ff=ln(this.Ff,13):this.Ff=hn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,21)},set:function(e){e?this.Ff=ln(this.Ff,21):this.Ff=hn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,23)},set:function(e){e?this.Ff=ln(this.Ff,23):this.Ff=hn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,24)},set:function(e){e?this.Ff=ln(this.Ff,24):this.Ff=hn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,25)},set:function(e){e?this.Ff=ln(this.Ff,25):this.Ff=hn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,26)},set:function(e){e?this.Ff=ln(this.Ff,26):this.Ff=hn(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};pr(qo,ai);var fl=function(){qo.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,14)},set:function(n){n?this.Ff=ln(this.Ff,14):this.Ff=hn(this.Ff,14)}}),this.password=!0};pr(fl,qo);var Ge={CheckBox:{createAppearanceStream:function(){return{N:{On:Ge.CheckBox.YesNormal},D:{On:Ge.CheckBox.YesPushDown,Off:Ge.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Ei(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=rd(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+pt(Ge.internal.getWidth(n))+" "+pt(Ge.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+pt(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Ei(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],s=Ge.internal.getHeight(n),o=Ge.internal.getWidth(n),a=rd(n,n.caption);return i.push("1 g"),i.push("0 0 "+pt(o)+" "+pt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+pt(o-1)+" "+pt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+pt(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=Ei(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+pt(Ge.internal.getWidth(n))+" "+pt(Ge.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Ge.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Ge.RadioButton.Circle.YesNormal,e.D[n]=Ge.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Ei(n);e.scope=n.scope;var t=[],r=Ge.internal.getWidth(n)<=Ge.internal.getHeight(n)?Ge.internal.getWidth(n)/4:Ge.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Ge.internal.Bezier_C,s=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Bs(Ge.internal.getWidth(n)/2)+" "+Bs(Ge.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Ei(n);e.scope=n.scope;var t=[],r=Ge.internal.getWidth(n)<=Ge.internal.getHeight(n)?Ge.internal.getWidth(n)/4:Ge.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ge.internal.Bezier_C).toFixed(5)),o=Number((r*Ge.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Bs(Ge.internal.getWidth(n)/2)+" "+Bs(Ge.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Bs(Ge.internal.getWidth(n)/2)+" "+Bs(Ge.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Ei(n);e.scope=n.scope;var t=[],r=Ge.internal.getWidth(n)<=Ge.internal.getHeight(n)?Ge.internal.getWidth(n)/4:Ge.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ge.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Bs(Ge.internal.getWidth(n)/2)+" "+Bs(Ge.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Ge.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Ge.RadioButton.Cross.YesNormal,e.D[n]=Ge.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Ei(n);e.scope=n.scope;var t=[],r=Ge.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+pt(Ge.internal.getWidth(n)-2)+" "+pt(Ge.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(pt(r.x1.x)+" "+pt(r.x1.y)+" m"),t.push(pt(r.x2.x)+" "+pt(r.x2.y)+" l"),t.push(pt(r.x4.x)+" "+pt(r.x4.y)+" m"),t.push(pt(r.x3.x)+" "+pt(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Ei(n);e.scope=n.scope;var t=Ge.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+pt(Ge.internal.getWidth(n))+" "+pt(Ge.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+pt(Ge.internal.getWidth(n)-2)+" "+pt(Ge.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(pt(t.x1.x)+" "+pt(t.x1.y)+" m"),r.push(pt(t.x2.x)+" "+pt(t.x2.y)+" l"),r.push(pt(t.x4.x)+" "+pt(t.x4.y)+" m"),r.push(pt(t.x3.x)+" "+pt(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=Ei(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+pt(Ge.internal.getWidth(n))+" "+pt(Ge.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Ge.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Ge.internal.getWidth(n),t=Ge.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},Ge.internal.getWidth=function(n){var e=0;return Mt(n)==="object"&&(e=Xm(n.Rect[2])),e},Ge.internal.getHeight=function(n){var e=0;return Mt(n)==="object"&&(e=Xm(n.Rect[3])),e};var mS=nn.addField=function(n){if(gS(this,n),!(n instanceof ai))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};nn.AcroFormChoiceField=$a,nn.AcroFormListBox=Ha,nn.AcroFormComboBox=Wa,nn.AcroFormEditBox=ul,nn.AcroFormButton=Pn,nn.AcroFormPushButton=ll,nn.AcroFormRadioButton=Ga,nn.AcroFormCheckBox=hl,nn.AcroFormTextField=qo,nn.AcroFormPasswordField=fl,nn.AcroFormAppearance=Ge,nn.AcroForm={ChoiceField:$a,ListBox:Ha,ComboBox:Wa,EditBox:ul,Button:Pn,PushButton:ll,RadioButton:Ga,CheckBox:hl,TextField:qo,PasswordField:fl,Appearance:Ge},nt.AcroForm={ChoiceField:$a,ListBox:Ha,ComboBox:Wa,EditBox:ul,Button:Pn,PushButton:ll,RadioButton:Ga,CheckBox:hl,TextField:qo,PasswordField:fl,Appearance:Ge};nt.AcroForm;function sv(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(A,E){var N,G,pe,fe,ge,se=e;if((E=E||e)==="RGBA"||A.data!==void 0&&A.data instanceof Uint8ClampedArray&&"height"in A&&"width"in A)return"RGBA";if(we(A))for(ge in t)for(pe=t[ge],N=0;N<pe.length;N+=1){for(fe=!0,G=0;G<pe[N].length;G+=1)if(pe[N][G]!==void 0&&pe[N][G]!==A[G]){fe=!1;break}if(fe===!0){se=ge;break}}else for(ge in t)for(pe=t[ge],N=0;N<pe.length;N+=1){for(fe=!0,G=0;G<pe[N].length;G+=1)if(pe[N][G]!==void 0&&pe[N][G]!==A.charCodeAt(G)){fe=!1;break}if(fe===!0){se=ge;break}}return se===e&&E!==e&&(se=E),se},i=function A(E){for(var N=this.internal.write,G=this.internal.putStream,pe=(0,this.internal.getFilters)();pe.indexOf("FlateEncode")!==-1;)pe.splice(pe.indexOf("FlateEncode"),1);E.objectId=this.internal.newObject();var fe=[];if(fe.push({key:"Type",value:"/XObject"}),fe.push({key:"Subtype",value:"/Image"}),fe.push({key:"Width",value:E.width}),fe.push({key:"Height",value:E.height}),E.colorSpace===F.INDEXED?fe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(E.palette.length/3-1)+" "+("sMask"in E&&E.sMask!==void 0?E.objectId+2:E.objectId+1)+" 0 R]"}):(fe.push({key:"ColorSpace",value:"/"+E.colorSpace}),E.colorSpace===F.DEVICE_CMYK&&fe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),fe.push({key:"BitsPerComponent",value:E.bitsPerComponent}),"decodeParameters"in E&&E.decodeParameters!==void 0&&fe.push({key:"DecodeParms",value:"<<"+E.decodeParameters+">>"}),"transparency"in E&&Array.isArray(E.transparency)){for(var ge="",se=0,me=E.transparency.length;se<me;se++)ge+=E.transparency[se]+" "+E.transparency[se]+" ";fe.push({key:"Mask",value:"["+ge+"]"})}E.sMask!==void 0&&fe.push({key:"SMask",value:E.objectId+1+" 0 R"});var be=E.filter!==void 0?["/"+E.filter]:void 0;if(G({data:E.data,additionalKeyValues:fe,alreadyAppliedFilters:be,objectId:E.objectId}),N("endobj"),"sMask"in E&&E.sMask!==void 0){var qe="/Predictor "+E.predictor+" /Colors 1 /BitsPerComponent "+E.bitsPerComponent+" /Columns "+E.width,C={width:E.width,height:E.height,colorSpace:"DeviceGray",bitsPerComponent:E.bitsPerComponent,decodeParameters:qe,data:E.sMask};"filter"in E&&(C.filter=E.filter),A.call(this,C)}if(E.colorSpace===F.INDEXED){var z=this.internal.newObject();G({data:I(new Uint8Array(E.palette)),objectId:z}),N("endobj")}},s=function(){var A=this.internal.collections.addImage_images;for(var E in A)i.call(this,A[E])},o=function(){var A,E=this.internal.collections.addImage_images,N=this.internal.write;for(var G in E)N("/I"+(A=E[G]).index,A.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var A=this.internal.collections.addImage_images;return a.call(this),A},f=function(){return Object.keys(this.internal.collections.addImage_images).length},g=function(A){return typeof n["process"+A.toUpperCase()]=="function"},y=function(A){return Mt(A)==="object"&&A.nodeType===1},b=function(A,E){if(A.nodeName==="IMG"&&A.hasAttribute("src")){var N=""+A.getAttribute("src");if(N.indexOf("data:image/")===0)return Hc(unescape(N).split("base64,").pop());var G=n.loadFile(N,!0);if(G!==void 0)return G}if(A.nodeName==="CANVAS"){if(A.width===0||A.height===0)throw new Error("Given canvas must have data. Canvas width: "+A.width+", height: "+A.height);var pe;switch(E){case"PNG":pe="image/png";break;case"WEBP":pe="image/webp";break;case"JPEG":case"JPG":default:pe="image/jpeg"}return Hc(A.toDataURL(pe,1).split("base64,").pop())}},v=function(A){var E=this.internal.collections.addImage_images;if(E){for(var N in E)if(A===E[N].alias)return E[N]}},M=function(A,E,N){return A||E||(A=-96,E=-96),A<0&&(A=-1*N.width*72/A/this.internal.scaleFactor),E<0&&(E=-1*N.height*72/E/this.internal.scaleFactor),A===0&&(A=E*N.width/N.height),E===0&&(E=A*N.height/N.width),[A,E]},x=function(A,E,N,G,pe,fe){var ge=M.call(this,N,G,pe),se=this.internal.getCoordinateString,me=this.internal.getVerticalCoordinateString,be=l.call(this);if(N=ge[0],G=ge[1],be[pe.index]=pe,fe){fe*=Math.PI/180;var qe=Math.cos(fe),C=Math.sin(fe),z=function(Q){return Q.toFixed(4)},W=[z(qe),z(C),z(-1*C),z(qe),0,0,"cm"]}this.internal.write("q"),fe?(this.internal.write([1,"0","0",1,se(A),me(E+G),"cm"].join(" ")),this.internal.write(W.join(" ")),this.internal.write([se(N),"0","0",se(G),"0","0","cm"].join(" "))):this.internal.write([se(N),"0","0",se(G),se(A),me(E+G),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+pe.index+" Do"),this.internal.write("Q")},F=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var P=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},B=n.__addimage__.sHashCode=function(A){var E,N,G=0;if(typeof A=="string")for(N=A.length,E=0;E<N;E++)G=(G<<5)-G+A.charCodeAt(E),G|=0;else if(we(A))for(N=A.byteLength/2,E=0;E<N;E++)G=(G<<5)-G+A[E],G|=0;return G},K=n.__addimage__.validateStringAsBase64=function(A){(A=A||"").toString().trim();var E=!0;return A.length===0&&(E=!1),A.length%4!=0&&(E=!1),/^[A-Za-z0-9+/]+$/.test(A.substr(0,A.length-2))===!1&&(E=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(A.substr(-2))===!1&&(E=!1),E},ie=n.__addimage__.extractImageFromDataUrl=function(A){if(A==null||!(A=A.trim()).startsWith("data:"))return null;var E=A.indexOf(",");return E<0?null:A.substring(0,E).trim().endsWith("base64")?A.substring(E+1):null},le=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(A){return le()&&A instanceof ArrayBuffer};var we=n.__addimage__.isArrayBufferView=function(A){return le()&&typeof Uint32Array<"u"&&(A instanceof Int8Array||A instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&A instanceof Uint8ClampedArray||A instanceof Int16Array||A instanceof Uint16Array||A instanceof Int32Array||A instanceof Uint32Array||A instanceof Float32Array||A instanceof Float64Array)},U=n.__addimage__.binaryStringToUint8Array=function(A){for(var E=A.length,N=new Uint8Array(E),G=0;G<E;G++)N[G]=A.charCodeAt(G);return N},I=n.__addimage__.arrayBufferToBinaryString=function(A){for(var E="",N=we(A)?A:new Uint8Array(A),G=0;G<N.length;G+=8192)E+=String.fromCharCode.apply(null,N.subarray(G,G+8192));return E};n.addImage=function(){var A,E,N,G,pe,fe,ge,se,me;if(typeof arguments[1]=="number"?(E=e,N=arguments[1],G=arguments[2],pe=arguments[3],fe=arguments[4],ge=arguments[5],se=arguments[6],me=arguments[7]):(E=arguments[1],N=arguments[2],G=arguments[3],pe=arguments[4],fe=arguments[5],ge=arguments[6],se=arguments[7],me=arguments[8]),Mt(A=arguments[0])==="object"&&!y(A)&&"imageData"in A){var be=A;A=be.imageData,E=be.format||E||e,N=be.x||N||0,G=be.y||G||0,pe=be.w||be.width||pe,fe=be.h||be.height||fe,ge=be.alias||ge,se=be.compression||se,me=be.rotation||be.angle||me}var qe=this.internal.getFilters();if(se===void 0&&qe.indexOf("FlateEncode")!==-1&&(se="SLOW"),isNaN(N)||isNaN(G))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var C=k.call(this,A,E,ge,se);return x.call(this,N,G,pe,fe,C,me),this};var k=function(A,E,N,G){var pe,fe,ge;if(typeof A=="string"&&r(A)===e){A=unescape(A);var se=j(A,!1);(se!==""||(se=n.loadFile(A,!0))!==void 0)&&(A=se)}if(y(A)&&(A=b(A,E)),E=r(A,E),!g(E))throw new Error("addImage does not support files of type '"+E+"', please ensure that a plugin for '"+E+"' support is added.");if(((ge=N)==null||ge.length===0)&&(N=function(me){return typeof me=="string"||we(me)?B(me):we(me.data)?B(me.data):null}(A)),(pe=v.call(this,N))||(le()&&(A instanceof Uint8Array||E==="RGBA"||(fe=A,A=U(A))),pe=this["process"+E.toUpperCase()](A,f.call(this),N,function(me){return me&&typeof me=="string"&&(me=me.toUpperCase()),me in n.image_compression?me:P.NONE}(G),fe)),!pe)throw new Error("An unknown error occurred whilst processing the image.");return pe},j=n.__addimage__.convertBase64ToBinaryString=function(A,E){E=typeof E!="boolean"||E;var N,G="";if(typeof A=="string"){var pe;N=(pe=ie(A))!==null&&pe!==void 0?pe:A;try{G=Hc(N)}catch(fe){if(E)throw K(N)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+fe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return G};n.getImageProperties=function(A){var E,N,G="";if(y(A)&&(A=b(A)),typeof A=="string"&&r(A)===e&&((G=j(A,!1))===""&&(G=n.loadFile(A)||""),A=G),N=r(A),!g(N))throw new Error("addImage does not support files of type '"+N+"', please ensure that a plugin for '"+N+"' support is added.");if(!le()||A instanceof Uint8Array||(A=U(A)),!(E=this["process"+N.toUpperCase()](A)))throw new Error("An unknown error occurred whilst processing the image");return E.fileType=N,E}})(nt.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};nt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),f=t.pageContext.annotations,g=!1,y=0;y<f.length&&!g;y++)switch((r=f[y]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(g!=0){this.internal.write("/Annots [");for(var b=0;b<f.length;b++){r=f[b];var v=this.internal.pdfEscape,M=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),F=this.internal.newAdditionalObject(),P=this.internal.getEncryptor(x.objId),B=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+v(P(r.contents))+")",s+=" /Popup "+F.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+v(P(B))+") >>",x.content=s;var K=x.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+K,r.open&&(s+=" /Open true"),s+=" >>",F.content=s,this.internal.write(x.objId,"0 R",F.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var ie=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+v(M(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+ie+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var le=this.annotations._nameMap[r.options.name];r.options.pageNumber=le.page,r.options.top=le.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+v(M(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var we=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+we+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(t),y:f(r),w:l(t+i),h:f(r+s)},options:o,type:"link"})},n.textWithLink=function(t,r,i,s){var o,a,l=this.getTextWidth(t),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var g=this.splitTextToSize(t,a).length;o=Math.ceil(f*g)}else a=l,o=f;return this.text(t,r,i,s),i+=.2*f,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-f,a,o,s),l},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(nt.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(x){return e[x.charCodeAt(0)]!==void 0},o=n.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},a=n.__arabicParser__.isArabicEndLetter=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(x){return o(x)&&i.indexOf(x.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length>=1};var f=n.__arabicParser__.arabicLetterHasFinalForm=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length>=3};var g=n.__arabicParser__.arabicLetterHasMedialForm=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length==4},y=n.__arabicParser__.resolveLigatures=function(x){var F=0,P=t,B="",K=0;for(F=0;F<x.length;F+=1)P[x.charCodeAt(F)]!==void 0?(K++,typeof(P=P[x.charCodeAt(F)])=="number"&&(B+=String.fromCharCode(P),P=t,K=0),F===x.length-1&&(P=t,B+=x.charAt(F-(K-1)),F-=K-1,K=0)):(P=t,B+=x.charAt(F-K),F-=K,K=0);return B};n.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&r[x.charCodeAt(0)]!==void 0};var b=n.__arabicParser__.getCorrectForm=function(x,F,P){return o(x)?s(x)===!1?-1:!f(x)||!o(F)&&!o(P)||!o(P)&&a(F)||a(x)&&!o(F)||a(x)&&l(F)||a(x)&&a(F)?0:g(x)&&o(F)&&!a(F)&&o(P)&&f(P)?3:a(x)||!o(P)?1:2:-1},v=function(x){var F=0,P=0,B=0,K="",ie="",le="",we=(x=x||"").split("\\s+"),U=[];for(F=0;F<we.length;F+=1){for(U.push(""),P=0;P<we[F].length;P+=1)K=we[F][P],ie=we[F][P-1],le=we[F][P+1],o(K)?(B=b(K,ie,le),U[F]+=B!==-1?String.fromCharCode(e[K.charCodeAt(0)][B]):K):U[F]+=K;U[F]=y(U[F])}return U.join(" ")},M=n.__arabicParser__.processArabic=n.processArabic=function(){var x,F=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,P=[];if(Array.isArray(F)){var B=0;for(P=[],B=0;B<F.length;B+=1)Array.isArray(F[B])?P.push([v(F[B][0]),F[B][1],F[B][2]]):P.push([v(F[B])]);x=P}else x=v(F);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};n.events.push(["preProcessText",M])}(nt.API),nt.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(nt.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(x){l=x}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(x){g=x}});var y=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return y},set:function(x){y=x}});var b=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return b},set:function(x){b=x}});var v=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return v},set:function(x){v=x}});var M=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return M},set:function(x){M=x}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,f){r.call(this);var g=(f=f||{}).fontSize||this.getFontSize(),y=f.font||this.getFont(),b=f.scaleFactor||this.internal.scaleFactor,v=0,M=0,x=0,F=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var P=f.maxWidth;P>0?typeof l=="string"?l=this.splitTextToSize(l,P):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(K,ie){return K.concat(F.splitTextToSize(ie,P))},[])):l=Array.isArray(l)?l:[l];for(var B=0;B<l.length;B++)v<(x=this.getStringUnitWidth(l[B],{font:y})*g)&&(v=x);return v!==0&&(M=l.length),{w:v/=b,h:Math.max((M*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/b,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=n.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var f=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,y=this.internal.__cell__.margins||e,b=this.internal.__cell__.tableHeaderRow,v=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===l.lineNumber?(l.x=(f.x||0)+(f.width||0),l.y=f.y||0):f.y+f.height+l.height+y.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=y.top,v&&b&&(this.printHeaderRow(l.lineNumber,!0),l.y+=b[0].height)):l.y=f.y+f.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-g,l.y+g,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+g,{align:"center",baseline:"top",maxWidth:l.width-g-g}):this.text(l.text,l.x+g,l.y+g,{align:"left",baseline:"top",maxWidth:l.width-g-g})),this.internal.__cell__.lastCell=l,this};n.table=function(l,f,g,y,b){if(r.call(this),!g)throw new Error("No data for PDF table.");var v,M,x,F,P=[],B=[],K=[],ie={},le={},we=[],U=[],I=(b=b||{}).autoSize||!1,k=b.printHeaders!==!1,j=b.css&&b.css["font-size"]!==void 0?16*b.css["font-size"]:b.fontSize||12,A=b.margins||Object.assign({width:this.getPageWidth()},e),E=typeof b.padding=="number"?b.padding:3,N=b.headerBackgroundColor||"#c8c8c8",G=b.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=k,this.internal.__cell__.margins=A,this.internal.__cell__.table_font_size=j,this.internal.__cell__.padding=E,this.internal.__cell__.headerBackgroundColor=N,this.internal.__cell__.headerTextColor=G,this.setFontSize(j),y==null)B=P=Object.keys(g[0]),K=P.map(function(){return"left"});else if(Array.isArray(y)&&Mt(y[0])==="object")for(P=y.map(function(be){return be.name}),B=y.map(function(be){return be.prompt||be.name||""}),K=y.map(function(be){return be.align||"left"}),v=0;v<y.length;v+=1)le[y[v].name]=y[v].width*(19.049976/25.4);else Array.isArray(y)&&typeof y[0]=="string"&&(B=P=y,K=P.map(function(){return"left"}));if(I||Array.isArray(y)&&typeof y[0]=="string")for(v=0;v<P.length;v+=1){for(ie[F=P[v]]=g.map(function(be){return be[F]}),this.setFont(void 0,"bold"),we.push(this.getTextDimensions(B[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),M=ie[F],this.setFont(void 0,"normal"),x=0;x<M.length;x+=1)we.push(this.getTextDimensions(M[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);le[F]=Math.max.apply(null,we)+E+E,we=[]}if(k){var pe={};for(v=0;v<P.length;v+=1)pe[P[v]]={},pe[P[v]].text=B[v],pe[P[v]].align=K[v];var fe=a.call(this,pe,le);U=P.map(function(be){return new s(l,f,le[be],fe,pe[be].text,void 0,pe[be].align)}),this.setTableHeaderRow(U),this.printHeaderRow(1,!1)}var ge=y.reduce(function(be,qe){return be[qe.name]=qe.align,be},{});for(v=0;v<g.length;v+=1){"rowStart"in b&&b.rowStart instanceof Function&&b.rowStart({row:v,data:g[v]},this);var se=a.call(this,g[v],le);for(x=0;x<P.length;x+=1){var me=g[v][P[x]];"cellStart"in b&&b.cellStart instanceof Function&&b.cellStart({row:v,col:x,data:me},this),o.call(this,new s(l,f,le[P[x]],se,me,v+2,ge[P[x]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=f,this};var a=function(l,f){var g=this.internal.__cell__.padding,y=this.internal.__cell__.table_font_size,b=this.internal.scaleFactor;return Object.keys(l).map(function(v){var M=l[v];return this.splitTextToSize(M.hasOwnProperty("text")?M.text:M,f[v]-g-g)},this).map(function(v){return this.getLineHeightFactor()*v.length*y/b+g+g},this).reduce(function(v,M){return Math.max(v,M)},0)};n.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,f){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var y=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(y[0],y[1],y[2],y[3],void 0,-1)}this.setFont(void 0,"bold");for(var b=[],v=0;v<this.internal.__cell__.tableHeaderRow.length;v+=1){g=this.internal.__cell__.tableHeaderRow[v].clone(),f&&(g.y=this.internal.__cell__.margins.top||0,b.push(g)),g.lineNumber=l;var M=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,g),this.setTextColor(M)}b.length>0&&this.setTableHeaderRow(b),this.setFont(void 0,"normal"),t=!1}}(nt.API);var ov={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},av=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],id=sv(av),cv=[100,200,300,400,500,600,700,800,900],vS=sv(cv);function sd(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return ov[s=s||"normal"]?s:"normal"}(n.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(n.weight),i=function(s){return typeof id[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function Zm(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var yS={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},e1={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function t1(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function _S(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},yS,t.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=sd(e[a])).family]&&(s.family=i[s.family]),n.hasOwnProperty(s.family)){o=n[s.family];break}if(!(o=o||n[r]))throw new Error("Could not find a font-family for the rule '"+t1(s)+"' and default family '"+r+"'.");if(o=function(l,f){if(f[l])return f[l];var g=id[l],y=g<=id.normal?-1:1,b=Zm(f,av,g,y);if(!b)throw new Error("Could not find a matching font-stretch value for "+l);return b}(s.stretch,o),o=function(l,f){if(f[l])return f[l];for(var g=ov[l],y=0;y<g.length;++y)if(f[g[y]])return f[g[y]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,f){if(f[l])return f[l];if(l===400&&f[500])return f[500];if(l===500&&f[400])return f[400];var g=vS[l],y=Zm(f,cv,g,l<400?-1:1);if(!y)throw new Error("Could not find a matching font-weight for value "+l);return y}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+t1(s)+"'.");return o}function n1(n){return n.trimLeft()}function wS(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function bS(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Ju,r1,i1,df=["times"];(function(n){var e,t,r,i,s,o,a,l,f,g=function(C){return C=C||{},this.isStrokeTransparent=C.isStrokeTransparent||!1,this.strokeOpacity=C.strokeOpacity||1,this.strokeStyle=C.strokeStyle||"#000000",this.fillStyle=C.fillStyle||"#000000",this.isFillTransparent=C.isFillTransparent||!1,this.fillOpacity=C.fillOpacity||1,this.font=C.font||"10px sans-serif",this.textBaseline=C.textBaseline||"alphabetic",this.textAlign=C.textAlign||"left",this.lineWidth=C.lineWidth||1,this.lineJoin=C.lineJoin||"miter",this.lineCap=C.lineCap||"butt",this.path=C.path||[],this.transform=C.transform!==void 0?C.transform.clone():new l,this.globalCompositeOperation=C.globalCompositeOperation||"normal",this.globalAlpha=C.globalAlpha||1,this.clip_path=C.clip_path||[],this.currentPoint=C.currentPoint||new o,this.miterLimit=C.miterLimit||10,this.lastPoint=C.lastPoint||new o,this.lineDashOffset=C.lineDashOffset||0,this.lineDash=C.lineDash||[],this.margin=C.margin||[0,0,0,0],this.prevPageLastElemOffset=C.prevPageLastElemOffset||0,this.ignoreClearRect=typeof C.ignoreClearRect!="boolean"||C.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new y(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,f=new g}]);var y=function(C){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var z=C;Object.defineProperty(this,"pdf",{get:function(){return z}});var W=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return W},set:function(_e){W=!!_e}});var Q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Q},set:function(_e){Q=!!_e}});var ne=0;Object.defineProperty(this,"posX",{get:function(){return ne},set:function(_e){isNaN(_e)||(ne=_e)}});var ue=0;Object.defineProperty(this,"posY",{get:function(){return ue},set:function(_e){isNaN(_e)||(ue=_e)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(_e){var H;typeof _e=="number"?H=[_e,_e,_e,_e]:((H=new Array(4))[0]=_e[0],H[1]=_e.length>=2?_e[1]:H[0],H[2]=_e.length>=3?_e[2]:H[0],H[3]=_e.length>=4?_e[3]:H[1]),f.margin=H}});var he=!1;Object.defineProperty(this,"autoPaging",{get:function(){return he},set:function(_e){he=_e}});var de=0;Object.defineProperty(this,"lastBreak",{get:function(){return de},set:function(_e){de=_e}});var ke=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ke},set:function(_e){ke=_e}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(_e){_e instanceof g&&(f=_e)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(_e){f.path=_e}});var Re=[];Object.defineProperty(this,"ctxStack",{get:function(){return Re},set:function(_e){Re=_e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(_e){var H;H=b(_e),this.ctx.fillStyle=H.style,this.ctx.isFillTransparent=H.a===0,this.ctx.fillOpacity=H.a,this.pdf.setFillColor(H.r,H.g,H.b,{a:H.a}),this.pdf.setTextColor(H.r,H.g,H.b,{a:H.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(_e){var H=b(_e);this.ctx.strokeStyle=H.style,this.ctx.isStrokeTransparent=H.a===0,this.ctx.strokeOpacity=H.a,H.a===0?this.pdf.setDrawColor(255,255,255):(H.a,this.pdf.setDrawColor(H.r,H.g,H.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(_e){["butt","round","square"].indexOf(_e)!==-1&&(this.ctx.lineCap=_e,this.pdf.setLineCap(_e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(_e){isNaN(_e)||(this.ctx.lineWidth=_e,this.pdf.setLineWidth(_e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(_e){["bevel","round","miter"].indexOf(_e)!==-1&&(this.ctx.lineJoin=_e,this.pdf.setLineJoin(_e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(_e){isNaN(_e)||(this.ctx.miterLimit=_e,this.pdf.setMiterLimit(_e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(_e){this.ctx.textBaseline=_e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(_e){["right","end","center","left","start"].indexOf(_e)!==-1&&(this.ctx.textAlign=_e)}});var Fe=null;function Oe(_e,H){if(Fe===null){var ut=function(Ke){var Ce=[];return Object.keys(Ke).forEach(function(xe){Ke[xe].forEach(function(je){var Ve=null;switch(je){case"bold":Ve={family:xe,weight:"bold"};break;case"italic":Ve={family:xe,style:"italic"};break;case"bolditalic":Ve={family:xe,weight:"bold",style:"italic"};break;case"":case"normal":Ve={family:xe}}Ve!==null&&(Ve.ref={name:xe,style:je},Ce.push(Ve))})}),Ce}(_e.getFontList());Fe=function(Ke){for(var Ce={},xe=0;xe<Ke.length;++xe){var je=sd(Ke[xe]),Ve=je.family,Je=je.stretch,at=je.style,ht=je.weight;Ce[Ve]=Ce[Ve]||{},Ce[Ve][Je]=Ce[Ve][Je]||{},Ce[Ve][Je][at]=Ce[Ve][Je][at]||{},Ce[Ve][Je][at][ht]=je}return Ce}(ut.concat(H))}return Fe}var Xe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Xe},set:function(_e){Fe=null,Xe=_e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(_e){var H;if(this.ctx.font=_e,(H=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(_e))!==null){var ut=H[1];H[2];var Ke=H[3],Ce=H[4];H[5];var xe=H[6],je=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ce)[2];Ce=Math.floor(je==="px"?parseFloat(Ce)*this.pdf.internal.scaleFactor:je==="em"?parseFloat(Ce)*this.pdf.getFontSize():parseFloat(Ce)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ce);var Ve=function(tt){var vt,Be,Xt=[],Et=tt.trim();if(Et==="")return df;if(Et in e1)return[e1[Et]];for(;Et!=="";){switch(Be=null,vt=(Et=n1(Et)).charAt(0)){case'"':case"'":Be=wS(Et.substring(1),vt);break;default:Be=bS(Et)}if(Be===null||(Xt.push(Be[0]),(Et=n1(Be[1]))!==""&&Et.charAt(0)!==","))return df;Et=Et.replace(/^,/,"")}return Xt}(xe);if(this.fontFaces){var Je=_S(Oe(this.pdf,this.fontFaces),Ve.map(function(tt){return{family:tt,stretch:"normal",weight:Ke,style:ut}}));this.pdf.setFont(Je.ref.name,Je.ref.style)}else{var at="";(Ke==="bold"||parseInt(Ke,10)>=700||ut==="bold")&&(at="bold"),ut==="italic"&&(at+="italic"),at.length===0&&(at="normal");for(var ht="",Qe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},rt=0;rt<Ve.length;rt++){if(this.pdf.internal.getFont(Ve[rt],at,{noFallback:!0,disableWarning:!0})!==void 0){ht=Ve[rt];break}if(at==="bolditalic"&&this.pdf.internal.getFont(Ve[rt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ht=Ve[rt],at="bold";else if(this.pdf.internal.getFont(Ve[rt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ht=Ve[rt],at="normal";break}}if(ht===""){for(var St=0;St<Ve.length;St++)if(Qe[Ve[St]]){ht=Qe[Ve[St]];break}}ht=ht===""?"Times":ht,this.pdf.setFont(ht,at)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(_e){this.ctx.globalCompositeOperation=_e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(_e){this.ctx.globalAlpha=_e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(_e){this.ctx.lineDashOffset=_e,qe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(_e){this.ctx.lineDash=_e,qe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(_e){this.ctx.ignoreClearRect=!!_e}})};y.prototype.setLineDash=function(C){this.lineDash=C},y.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},y.prototype.fill=function(){ie.call(this,"fill",!1)},y.prototype.stroke=function(){ie.call(this,"stroke",!1)},y.prototype.beginPath=function(){this.path=[{type:"begin"}]},y.prototype.moveTo=function(C,z){if(isNaN(C)||isNaN(z))throw Bt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var W=this.ctx.transform.applyToPoint(new o(C,z));this.path.push({type:"mt",x:W.x,y:W.y}),this.ctx.lastPoint=new o(C,z)},y.prototype.closePath=function(){var C=new o(0,0),z=0;for(z=this.path.length-1;z!==-1;z--)if(this.path[z].type==="begin"&&Mt(this.path[z+1])==="object"&&typeof this.path[z+1].x=="number"){C=new o(this.path[z+1].x,this.path[z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(C.x,C.y)},y.prototype.lineTo=function(C,z){if(isNaN(C)||isNaN(z))throw Bt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var W=this.ctx.transform.applyToPoint(new o(C,z));this.path.push({type:"lt",x:W.x,y:W.y}),this.ctx.lastPoint=new o(W.x,W.y)},y.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),ie.call(this,null,!0)},y.prototype.quadraticCurveTo=function(C,z,W,Q){if(isNaN(W)||isNaN(Q)||isNaN(C)||isNaN(z))throw Bt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ne=this.ctx.transform.applyToPoint(new o(W,Q)),ue=this.ctx.transform.applyToPoint(new o(C,z));this.path.push({type:"qct",x1:ue.x,y1:ue.y,x:ne.x,y:ne.y}),this.ctx.lastPoint=new o(ne.x,ne.y)},y.prototype.bezierCurveTo=function(C,z,W,Q,ne,ue){if(isNaN(ne)||isNaN(ue)||isNaN(C)||isNaN(z)||isNaN(W)||isNaN(Q))throw Bt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var he=this.ctx.transform.applyToPoint(new o(ne,ue)),de=this.ctx.transform.applyToPoint(new o(C,z)),ke=this.ctx.transform.applyToPoint(new o(W,Q));this.path.push({type:"bct",x1:de.x,y1:de.y,x2:ke.x,y2:ke.y,x:he.x,y:he.y}),this.ctx.lastPoint=new o(he.x,he.y)},y.prototype.arc=function(C,z,W,Q,ne,ue){if(isNaN(C)||isNaN(z)||isNaN(W)||isNaN(Q)||isNaN(ne))throw Bt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ue=!!ue,!this.ctx.transform.isIdentity){var he=this.ctx.transform.applyToPoint(new o(C,z));C=he.x,z=he.y;var de=this.ctx.transform.applyToPoint(new o(0,W)),ke=this.ctx.transform.applyToPoint(new o(0,0));W=Math.sqrt(Math.pow(de.x-ke.x,2)+Math.pow(de.y-ke.y,2))}Math.abs(ne-Q)>=2*Math.PI&&(Q=0,ne=2*Math.PI),this.path.push({type:"arc",x:C,y:z,radius:W,startAngle:Q,endAngle:ne,counterclockwise:ue})},y.prototype.arcTo=function(C,z,W,Q,ne){throw new Error("arcTo not implemented.")},y.prototype.rect=function(C,z,W,Q){if(isNaN(C)||isNaN(z)||isNaN(W)||isNaN(Q))throw Bt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(C,z),this.lineTo(C+W,z),this.lineTo(C+W,z+Q),this.lineTo(C,z+Q),this.lineTo(C,z),this.lineTo(C+W,z),this.lineTo(C,z)},y.prototype.fillRect=function(C,z,W,Q){if(isNaN(C)||isNaN(z)||isNaN(W)||isNaN(Q))throw Bt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!v.call(this)){var ne={};this.lineCap!=="butt"&&(ne.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ne.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(C,z,W,Q),this.fill(),ne.hasOwnProperty("lineCap")&&(this.lineCap=ne.lineCap),ne.hasOwnProperty("lineJoin")&&(this.lineJoin=ne.lineJoin)}},y.prototype.strokeRect=function(C,z,W,Q){if(isNaN(C)||isNaN(z)||isNaN(W)||isNaN(Q))throw Bt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");M.call(this)||(this.beginPath(),this.rect(C,z,W,Q),this.stroke())},y.prototype.clearRect=function(C,z,W,Q){if(isNaN(C)||isNaN(z)||isNaN(W)||isNaN(Q))throw Bt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(C,z,W,Q))},y.prototype.save=function(C){C=typeof C!="boolean"||C;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("q");if(this.pdf.setPage(z),C){this.ctx.fontSize=this.pdf.internal.getFontSize();var Q=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Q}},y.prototype.restore=function(C){C=typeof C!="boolean"||C;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("Q");this.pdf.setPage(z),C&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},y.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var b=function(C){var z,W,Q,ne;if(C.isCanvasGradient===!0&&(C=C.getColor()),!C)return{r:0,g:0,b:0,a:0,style:C};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(C))z=0,W=0,Q=0,ne=0;else{var ue=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(C);if(ue!==null)z=parseInt(ue[1]),W=parseInt(ue[2]),Q=parseInt(ue[3]),ne=1;else if((ue=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(C))!==null)z=parseInt(ue[1]),W=parseInt(ue[2]),Q=parseInt(ue[3]),ne=parseFloat(ue[4]);else{if(ne=1,typeof C=="string"&&C.charAt(0)!=="#"){var he=new Z5(C);C=he.ok?he.toHex():"#000000"}C.length===4?(z=C.substring(1,2),z+=z,W=C.substring(2,3),W+=W,Q=C.substring(3,4),Q+=Q):(z=C.substring(1,3),W=C.substring(3,5),Q=C.substring(5,7)),z=parseInt(z,16),W=parseInt(W,16),Q=parseInt(Q,16)}}return{r:z,g:W,b:Q,a:ne,style:C}},v=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},M=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};y.prototype.fillText=function(C,z,W,Q){if(isNaN(z)||isNaN(W)||typeof C!="string")throw Bt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Q=isNaN(Q)?void 0:Q,!v.call(this)){var ne=se(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;E.call(this,{text:C,x:z,y:W,scale:ue,angle:ne,align:this.textAlign,maxWidth:Q})}},y.prototype.strokeText=function(C,z,W,Q){if(isNaN(z)||isNaN(W)||typeof C!="string")throw Bt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!M.call(this)){Q=isNaN(Q)?void 0:Q;var ne=se(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;E.call(this,{text:C,x:z,y:W,scale:ue,renderingMode:"stroke",angle:ne,align:this.textAlign,maxWidth:Q})}},y.prototype.measureText=function(C){if(typeof C!="string")throw Bt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var z=this.pdf,W=this.pdf.internal.scaleFactor,Q=z.internal.getFontSize(),ne=z.getStringUnitWidth(C)*Q/z.internal.scaleFactor,ue=function(he){var de=(he=he||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return de}}),this};return new ue({width:ne*=Math.round(96*W/72*1e4)/1e4})},y.prototype.scale=function(C,z){if(isNaN(C)||isNaN(z))throw Bt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var W=new l(C,0,0,z,0,0);this.ctx.transform=this.ctx.transform.multiply(W)},y.prototype.rotate=function(C){if(isNaN(C))throw Bt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var z=new l(Math.cos(C),Math.sin(C),-Math.sin(C),Math.cos(C),0,0);this.ctx.transform=this.ctx.transform.multiply(z)},y.prototype.translate=function(C,z){if(isNaN(C)||isNaN(z))throw Bt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var W=new l(1,0,0,1,C,z);this.ctx.transform=this.ctx.transform.multiply(W)},y.prototype.transform=function(C,z,W,Q,ne,ue){if(isNaN(C)||isNaN(z)||isNaN(W)||isNaN(Q)||isNaN(ne)||isNaN(ue))throw Bt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var he=new l(C,z,W,Q,ne,ue);this.ctx.transform=this.ctx.transform.multiply(he)},y.prototype.setTransform=function(C,z,W,Q,ne,ue){C=isNaN(C)?1:C,z=isNaN(z)?0:z,W=isNaN(W)?0:W,Q=isNaN(Q)?1:Q,ne=isNaN(ne)?0:ne,ue=isNaN(ue)?0:ue,this.ctx.transform=new l(C,z,W,Q,ne,ue)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};y.prototype.drawImage=function(C,z,W,Q,ne,ue,he,de,ke){var Re=this.pdf.getImageProperties(C),Fe=1,Oe=1,Xe=1,_e=1;Q!==void 0&&de!==void 0&&(Xe=de/Q,_e=ke/ne,Fe=Re.width/Q*de/Q,Oe=Re.height/ne*ke/ne),ue===void 0&&(ue=z,he=W,z=0,W=0),Q!==void 0&&de===void 0&&(de=Q,ke=ne),Q===void 0&&de===void 0&&(de=Re.width,ke=Re.height);for(var H,ut=this.ctx.transform.decompose(),Ke=se(ut.rotate.shx),Ce=new l,xe=(Ce=(Ce=(Ce=Ce.multiply(ut.translate)).multiply(ut.skew)).multiply(ut.scale)).applyToRectangle(new a(ue-z*Xe,he-W*_e,Q*Fe,ne*Oe)),je=F.call(this,xe),Ve=[],Je=0;Je<je.length;Je+=1)Ve.indexOf(je[Je])===-1&&Ve.push(je[Je]);if(K(Ve),this.autoPaging)for(var at=Ve[0],ht=Ve[Ve.length-1],Qe=at;Qe<ht+1;Qe++){this.pdf.setPage(Qe);var rt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],St=Qe===1?this.posY+this.margin[0]:this.margin[0],tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],vt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Be=Qe===1?0:tt+(Qe-2)*vt;if(this.ctx.clip_path.length!==0){var Xt=this.path;H=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(H,this.posX+this.margin[3],-Be+St+this.ctx.prevPageLastElemOffset),le.call(this,"fill",!0),this.path=Xt}var Et=JSON.parse(JSON.stringify(xe));Et=B([Et],this.posX+this.margin[3],-Be+St+this.ctx.prevPageLastElemOffset)[0];var rr=(Qe>at||Qe<ht)&&x.call(this);rr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],rt,vt,null).clip().discardPath()),this.pdf.addImage(C,"JPEG",Et.x,Et.y,Et.w,Et.h,null,null,Ke),rr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(C,"JPEG",xe.x,xe.y,xe.w,xe.h,null,null,Ke)};var F=function(C,z,W){var Q=[];z=z||this.pdf.internal.pageSize.width,W=W||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ne=this.posY+this.ctx.prevPageLastElemOffset;switch(C.type){default:case"mt":case"lt":Q.push(Math.floor((C.y+ne)/W)+1);break;case"arc":Q.push(Math.floor((C.y+ne-C.radius)/W)+1),Q.push(Math.floor((C.y+ne+C.radius)/W)+1);break;case"qct":var ue=me(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x,C.y);Q.push(Math.floor((ue.y+ne)/W)+1),Q.push(Math.floor((ue.y+ue.h+ne)/W)+1);break;case"bct":var he=be(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x2,C.y2,C.x,C.y);Q.push(Math.floor((he.y+ne)/W)+1),Q.push(Math.floor((he.y+he.h+ne)/W)+1);break;case"rect":Q.push(Math.floor((C.y+ne)/W)+1),Q.push(Math.floor((C.y+C.h+ne)/W)+1)}for(var de=0;de<Q.length;de+=1)for(;this.pdf.internal.getNumberOfPages()<Q[de];)P.call(this);return Q},P=function(){var C=this.fillStyle,z=this.strokeStyle,W=this.font,Q=this.lineCap,ne=this.lineWidth,ue=this.lineJoin;this.pdf.addPage(),this.fillStyle=C,this.strokeStyle=z,this.font=W,this.lineCap=Q,this.lineWidth=ne,this.lineJoin=ue},B=function(C,z,W){for(var Q=0;Q<C.length;Q++)switch(C[Q].type){case"bct":C[Q].x2+=z,C[Q].y2+=W;case"qct":C[Q].x1+=z,C[Q].y1+=W;case"mt":case"lt":case"arc":default:C[Q].x+=z,C[Q].y+=W}return C},K=function(C){return C.sort(function(z,W){return z-W})},ie=function(C,z){for(var W,Q,ne=this.fillStyle,ue=this.strokeStyle,he=this.lineCap,de=this.lineWidth,ke=Math.abs(de*this.ctx.transform.scaleX),Re=this.lineJoin,Fe=JSON.parse(JSON.stringify(this.path)),Oe=JSON.parse(JSON.stringify(this.path)),Xe=[],_e=0;_e<Oe.length;_e++)if(Oe[_e].x!==void 0)for(var H=F.call(this,Oe[_e]),ut=0;ut<H.length;ut+=1)Xe.indexOf(H[ut])===-1&&Xe.push(H[ut]);for(var Ke=0;Ke<Xe.length;Ke++)for(;this.pdf.internal.getNumberOfPages()<Xe[Ke];)P.call(this);if(K(Xe),this.autoPaging)for(var Ce=Xe[0],xe=Xe[Xe.length-1],je=Ce;je<xe+1;je++){this.pdf.setPage(je),this.fillStyle=ne,this.strokeStyle=ue,this.lineCap=he,this.lineWidth=ke,this.lineJoin=Re;var Ve=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Je=je===1?this.posY+this.margin[0]:this.margin[0],at=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ht=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Qe=je===1?0:at+(je-2)*ht;if(this.ctx.clip_path.length!==0){var rt=this.path;W=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(W,this.posX+this.margin[3],-Qe+Je+this.ctx.prevPageLastElemOffset),le.call(this,C,!0),this.path=rt}if(Q=JSON.parse(JSON.stringify(Fe)),this.path=B(Q,this.posX+this.margin[3],-Qe+Je+this.ctx.prevPageLastElemOffset),z===!1||je===0){var St=(je>Ce||je<xe)&&x.call(this);St&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ve,ht,null).clip().discardPath()),le.call(this,C,z),St&&this.pdf.restoreGraphicsState()}this.lineWidth=de}else this.lineWidth=ke,le.call(this,C,z),this.lineWidth=de;this.path=Fe},le=function(C,z){if((C!=="stroke"||z||!M.call(this))&&(C==="stroke"||z||!v.call(this))){for(var W,Q,ne=[],ue=this.path,he=0;he<ue.length;he++){var de=ue[he];switch(de.type){case"begin":ne.push({begin:!0});break;case"close":ne.push({close:!0});break;case"mt":ne.push({start:de,deltas:[],abs:[]});break;case"lt":var ke=ne.length;if(ue[he-1]&&!isNaN(ue[he-1].x)&&(W=[de.x-ue[he-1].x,de.y-ue[he-1].y],ke>0)){for(;ke>=0;ke--)if(ne[ke-1].close!==!0&&ne[ke-1].begin!==!0){ne[ke-1].deltas.push(W),ne[ke-1].abs.push(de);break}}break;case"bct":W=[de.x1-ue[he-1].x,de.y1-ue[he-1].y,de.x2-ue[he-1].x,de.y2-ue[he-1].y,de.x-ue[he-1].x,de.y-ue[he-1].y],ne[ne.length-1].deltas.push(W);break;case"qct":var Re=ue[he-1].x+2/3*(de.x1-ue[he-1].x),Fe=ue[he-1].y+2/3*(de.y1-ue[he-1].y),Oe=de.x+2/3*(de.x1-de.x),Xe=de.y+2/3*(de.y1-de.y),_e=de.x,H=de.y;W=[Re-ue[he-1].x,Fe-ue[he-1].y,Oe-ue[he-1].x,Xe-ue[he-1].y,_e-ue[he-1].x,H-ue[he-1].y],ne[ne.length-1].deltas.push(W);break;case"arc":ne.push({deltas:[],abs:[],arc:!0}),Array.isArray(ne[ne.length-1].abs)&&ne[ne.length-1].abs.push(de)}}Q=z?null:C==="stroke"?"stroke":"fill";for(var ut=!1,Ke=0;Ke<ne.length;Ke++)if(ne[Ke].arc)for(var Ce=ne[Ke].abs,xe=0;xe<Ce.length;xe++){var je=Ce[xe];je.type==="arc"?I.call(this,je.x,je.y,je.radius,je.startAngle,je.endAngle,je.counterclockwise,void 0,z,!ut):N.call(this,je.x,je.y),ut=!0}else if(ne[Ke].close===!0)this.pdf.internal.out("h"),ut=!1;else if(ne[Ke].begin!==!0){var Ve=ne[Ke].start.x,Je=ne[Ke].start.y;G.call(this,ne[Ke].deltas,Ve,Je),ut=!0}Q&&k.call(this,Q),z&&j.call(this)}},we=function(C){var z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,W=z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return C-W;case"top":return C+z-W;case"hanging":return C+z-2*W;case"middle":return C+z/2-W;case"ideographic":return C;case"alphabetic":default:return C}},U=function(C){return C+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};y.prototype.createLinearGradient=function(){var C=function(){};return C.colorStops=[],C.addColorStop=function(z,W){this.colorStops.push([z,W])},C.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},C.isCanvasGradient=!0,C},y.prototype.createPattern=function(){return this.createLinearGradient()},y.prototype.createRadialGradient=function(){return this.createLinearGradient()};var I=function(C,z,W,Q,ne,ue,he,de,ke){for(var Re=fe.call(this,W,Q,ne,ue),Fe=0;Fe<Re.length;Fe++){var Oe=Re[Fe];Fe===0&&(ke?A.call(this,Oe.x1+C,Oe.y1+z):N.call(this,Oe.x1+C,Oe.y1+z)),pe.call(this,C,z,Oe.x2,Oe.y2,Oe.x3,Oe.y3,Oe.x4,Oe.y4)}de?j.call(this):k.call(this,he)},k=function(C){switch(C){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},j=function(){this.pdf.clip(),this.pdf.discardPath()},A=function(C,z){this.pdf.internal.out(t(C)+" "+r(z)+" m")},E=function(C){var z;switch(C.align){case"right":case"end":z="right";break;case"center":z="center";break;case"left":case"start":default:z="left"}var W=this.pdf.getTextDimensions(C.text),Q=we.call(this,C.y),ne=U.call(this,Q)-W.h,ue=this.ctx.transform.applyToPoint(new o(C.x,Q)),he=this.ctx.transform.decompose(),de=new l;de=(de=(de=de.multiply(he.translate)).multiply(he.skew)).multiply(he.scale);for(var ke,Re,Fe,Oe=this.ctx.transform.applyToRectangle(new a(C.x,Q,W.w,W.h)),Xe=de.applyToRectangle(new a(C.x,ne,W.w,W.h)),_e=F.call(this,Xe),H=[],ut=0;ut<_e.length;ut+=1)H.indexOf(_e[ut])===-1&&H.push(_e[ut]);if(K(H),this.autoPaging)for(var Ke=H[0],Ce=H[H.length-1],xe=Ke;xe<Ce+1;xe++){this.pdf.setPage(xe);var je=xe===1?this.posY+this.margin[0]:this.margin[0],Ve=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Je=this.pdf.internal.pageSize.height-this.margin[2],at=Je-this.margin[0],ht=this.pdf.internal.pageSize.width-this.margin[1],Qe=ht-this.margin[3],rt=xe===1?0:Ve+(xe-2)*at;if(this.ctx.clip_path.length!==0){var St=this.path;ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(ke,this.posX+this.margin[3],-1*rt+je),le.call(this,"fill",!0),this.path=St}var tt=B([JSON.parse(JSON.stringify(Xe))],this.posX+this.margin[3],-rt+je+this.ctx.prevPageLastElemOffset)[0];C.scale>=.01&&(Re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Re*C.scale),Fe=this.lineWidth,this.lineWidth=Fe*C.scale);var vt=this.autoPaging!=="text";if(vt||tt.y+tt.h<=Je){if(vt||tt.y>=je&&tt.x<=ht){var Be=vt?C.text:this.pdf.splitTextToSize(C.text,C.maxWidth||ht-tt.x)[0],Xt=B([JSON.parse(JSON.stringify(Oe))],this.posX+this.margin[3],-rt+je+this.ctx.prevPageLastElemOffset)[0],Et=vt&&(xe>Ke||xe<Ce)&&x.call(this);Et&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Qe,at,null).clip().discardPath()),this.pdf.text(Be,Xt.x,Xt.y,{angle:C.angle,align:z,renderingMode:C.renderingMode}),Et&&this.pdf.restoreGraphicsState()}}else tt.y<Je&&(this.ctx.prevPageLastElemOffset+=Je-tt.y);C.scale>=.01&&(this.pdf.setFontSize(Re),this.lineWidth=Fe)}else C.scale>=.01&&(Re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Re*C.scale),Fe=this.lineWidth,this.lineWidth=Fe*C.scale),this.pdf.text(C.text,ue.x+this.posX,ue.y+this.posY,{angle:C.angle,align:z,renderingMode:C.renderingMode,maxWidth:C.maxWidth}),C.scale>=.01&&(this.pdf.setFontSize(Re),this.lineWidth=Fe)},N=function(C,z,W,Q){W=W||0,Q=Q||0,this.pdf.internal.out(t(C+W)+" "+r(z+Q)+" l")},G=function(C,z,W){return this.pdf.lines(C,z,W,null,null)},pe=function(C,z,W,Q,ne,ue,he,de){this.pdf.internal.out([e(i(W+C)),e(s(Q+z)),e(i(ne+C)),e(s(ue+z)),e(i(he+C)),e(s(de+z)),"c"].join(" "))},fe=function(C,z,W,Q){for(var ne=2*Math.PI,ue=Math.PI/2;z>W;)z-=ne;var he=Math.abs(W-z);he<ne&&Q&&(he=ne-he);for(var de=[],ke=Q?-1:1,Re=z;he>1e-5;){var Fe=Re+ke*Math.min(he,ue);de.push(ge.call(this,C,Re,Fe)),he-=Math.abs(Fe-Re),Re=Fe}return de},ge=function(C,z,W){var Q=(W-z)/2,ne=C*Math.cos(Q),ue=C*Math.sin(Q),he=ne,de=-ue,ke=he*he+de*de,Re=ke+he*ne+de*ue,Fe=4/3*(Math.sqrt(2*ke*Re)-Re)/(he*ue-de*ne),Oe=he-Fe*de,Xe=de+Fe*he,_e=Oe,H=-Xe,ut=Q+z,Ke=Math.cos(ut),Ce=Math.sin(ut);return{x1:C*Math.cos(z),y1:C*Math.sin(z),x2:Oe*Ke-Xe*Ce,y2:Oe*Ce+Xe*Ke,x3:_e*Ke-H*Ce,y3:_e*Ce+H*Ke,x4:C*Math.cos(W),y4:C*Math.sin(W)}},se=function(C){return 180*C/Math.PI},me=function(C,z,W,Q,ne,ue){var he=C+.5*(W-C),de=z+.5*(Q-z),ke=ne+.5*(W-ne),Re=ue+.5*(Q-ue),Fe=Math.min(C,ne,he,ke),Oe=Math.max(C,ne,he,ke),Xe=Math.min(z,ue,de,Re),_e=Math.max(z,ue,de,Re);return new a(Fe,Xe,Oe-Fe,_e-Xe)},be=function(C,z,W,Q,ne,ue,he,de){var ke,Re,Fe,Oe,Xe,_e,H,ut,Ke,Ce,xe,je,Ve,Je,at=W-C,ht=Q-z,Qe=ne-W,rt=ue-Q,St=he-ne,tt=de-ue;for(Re=0;Re<41;Re++)Ke=(H=(Fe=C+(ke=Re/40)*at)+ke*((Xe=W+ke*Qe)-Fe))+ke*(Xe+ke*(ne+ke*St-Xe)-H),Ce=(ut=(Oe=z+ke*ht)+ke*((_e=Q+ke*rt)-Oe))+ke*(_e+ke*(ue+ke*tt-_e)-ut),Re==0?(xe=Ke,je=Ce,Ve=Ke,Je=Ce):(xe=Math.min(xe,Ke),je=Math.min(je,Ce),Ve=Math.max(Ve,Ke),Je=Math.max(Je,Ce));return new a(Math.round(xe),Math.round(je),Math.round(Ve-xe),Math.round(Je-je))},qe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var C,z,W=(C=this.ctx.lineDash,z=this.ctx.lineDashOffset,JSON.stringify({lineDash:C,lineDashOffset:z}));this.prevLineDash!==W&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=W)}}})(nt.API),function(n){var e=function(s){var o,a,l,f,g,y,b,v,M,x;for(a=[],l=0,f=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;f>l;l+=4)(g=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(y=(g=((g=((g=((g=(g-(x=g%85))/85)-(M=g%85))/85)-(v=g%85))/85)-(b=g%85))/85)%85,a.push(y+33,b+33,v+33,M+33,x+33)):a.push(122);return function(F,P){for(var B=P;B>0;B--)F.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},t=function(s){var o,a,l,f,g,y=String,b="length",v=255,M="charCodeAt",x="slice",F="replace";for(s[x](-2),s=s[x](0,-2)[F](/\s/g,"")[F]("z","!!!!!"),l=[],f=0,g=(s+=o="uuuuu"[x](s[b]%5||5))[b];g>f;f+=5)a=52200625*(s[M](f)-33)+614125*(s[M](f+1)-33)+7225*(s[M](f+2)-33)+85*(s[M](f+3)-33)+(s[M](f+4)-33),l.push(v&a>>24,v&a>>16,v&a>>8,v&a);return function(P,B){for(var K=B;K>0;K--)P.pop()}(l,o[b]),y.fromCharCode.apply(y,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=Zf(o)).reduce(function(l,f){return l+String.fromCharCode(f)},"")};n.processDataByFilters=function(s,o){var a=0,l=s||"",f=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(g){return("0"+g.charCodeAt().toString(16)).slice(-2)}).join("")+">",f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:f.reverse().join(" ")}}}(nt.API),function(n){n.loadFile=function(e,t,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,f,g){var y=new XMLHttpRequest,b=0,v=function(M){var x=M.length,F=[],P=String.fromCharCode;for(b=0;b<x;b+=1)F.push(P(255&M.charCodeAt(b)));return F.join("")};if(y.open("GET",l,!f),y.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(y.onload=function(){y.status===200?g(v(this.responseText)):g(void 0)}),y.send(null),f&&y.status===200)return v(y.responseText)}(i,s,o)}catch{}return a}(e,t,r)},n.loadImageFile=n.loadFile}(nt.API),function(n){function e(){return(it.html2canvas?Promise.resolve(it.html2canvas):Kf(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function t(){return(it.DOMPurify?Promise.resolve(it.DOMPurify):Kf(()=>import("./purify.es-Bf0oSh3b.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=Mt(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var f in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[f]=a.style[f];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),f=o.convert(Promise.resolve(),l);return f=(f=f.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(t).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(f,g){for(var y=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),b=f.firstChild;b;b=b.nextSibling)g!==!0&&b.nodeType===1&&b.nodeName==="SCRIPT"||y.appendChild(l(b,g));return f.nodeType===1&&(f.nodeName==="CANVAS"?(y.width=f.width,y.height=f.height,y.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(y.value=f.value),y.addEventListener("load",function(){y.scrollTop=f.scrollTop,y.scrollLeft=f.scrollLeft},!0)),y}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,f=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=f,f)for(var b=0;b<f.length;++b){var v=f[b],M=v.src.find(function(x){return x.format==="truetype"});M&&l.addFont(M.url,v.ref.name,v.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,l.context2d.save(!0),a(this.prop.container,y)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,f){return Math.floor(l*f/72*96)}return this.then(function(){(o=o||nt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,f){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,f){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,f?this.progress.stack.concat(f):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(f,g){return l.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(y){return l.updateProgress(null,f),y}).then(f,g).then(function(y){return l.updateProgress(1),y})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),g=l.call(f,o,a);return s.convert(g,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,nt.getPageSize=function(o,a,l){if(Mt(o)==="object"){var f=o;o=f.orientation,a=f.unit||a,l=f.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var g,y=(""+l).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+a}var v,M=0,x=0;if(b.hasOwnProperty(y))M=b[y][1]/g,x=b[y][0]/g;else try{M=l[1],x=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",x>M&&(v=x,x=M,M=v);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",M>x&&(v=x,x=M,M=v)}return{width:x,height:M,unit:a,k:g,orientation:o}},n.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(sd):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(nt.API),nt.API.addJS=function(n){return i1=n,this.internal.events.subscribe("postPutResources",function(){Ju=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ju+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),r1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+i1+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ju!==void 0&&r1!==void 0&&this.internal.out("/Names <</JavaScript "+Ju+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,g=[];for(s=0;s<f;s++){var y=t.internal.newObject();g.push(y);var b=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+b.objId+" 0 R /XYZ null null null]>> endobj")}var v=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<g.length;s++)t.internal.write("(page_"+(s+1)+")"+g[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+v+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var f=0;f<r.children.length;f++)this.renderItems(r.children[f])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(nt.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,s,o,a){var l,f=this.decode.DCT_DECODE,g=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(l=function(y){for(var b,v=256*y.charCodeAt(4)+y.charCodeAt(5),M=y.length,x={width:0,height:0,numcomponents:1},F=4;F<M;F+=2){if(F+=v,e.indexOf(y.charCodeAt(F+1))!==-1){b=256*y.charCodeAt(F+5)+y.charCodeAt(F+6),x={width:256*y.charCodeAt(F+7)+y.charCodeAt(F+8),height:b,numcomponents:y.charCodeAt(F+9)};break}v=256*y.charCodeAt(F+2)+y.charCodeAt(F+3)}return x}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}g={data:t,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:f,index:r,alias:i}}return g}}(nt.API);var Pa,Qu,s1,o1,a1,AS=function(){var n,e,t;function r(s){var o,a,l,f,g,y,b,v,M,x,F,P,B,K;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},y=null;;){switch(o=this.readUInt32(),M=(function(){var ie,le;for(le=[],ie=0;ie<4;++ie)le.push(String.fromCharCode(this.data[this.pos++]));return le}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":y&&this.animation.frames.push(y),this.pos+=4,y={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},g=this.readUInt16(),f=this.readUInt16()||100,y.delay=1e3*g/f,y.disposeOp=this.data[this.pos++],y.blendOp=this.data[this.pos++],y.data=[];break;case"IDAT":case"fdAT":for(M==="fdAT"&&(this.pos+=4,o-=4),s=(y!=null?y.data:void 0)||this.imgData,P=0;0<=o?P<o:P>o;0<=o?++P:--P)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((x=l-this.transparency.indexed.length)>0)for(B=0;0<=x?B<x:B>x;0<=x?++B:--B)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":b=(F=this.read(o)).indexOf(0),v=String.fromCharCode.apply(String,F.slice(0,b)),this.text[v]=String.fromCharCode.apply(String,F.slice(b+1));break;case"IEND":return y&&this.animation.frames.push(y),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(K=this.colorType)===4||K===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,f=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function g(y,b,v,M){var x,F,P,B,K,ie,le,we,U,I,k,j,A,E,N,G,pe,fe,ge,se,me,be=Math.ceil((f.width-y)/v),qe=Math.ceil((f.height-b)/M),C=f.width==be&&f.height==qe;for(E=o*be,j=C?a:new Uint8Array(E*qe),ie=s.length,A=0,F=0;A<qe&&l<ie;){switch(s[l++]){case 0:for(B=pe=0;pe<E;B=pe+=1)j[F++]=s[l++];break;case 1:for(B=fe=0;fe<E;B=fe+=1)x=s[l++],K=B<o?0:j[F-o],j[F++]=(x+K)%256;break;case 2:for(B=ge=0;ge<E;B=ge+=1)x=s[l++],P=(B-B%o)/o,N=A&&j[(A-1)*E+P*o+B%o],j[F++]=(N+x)%256;break;case 3:for(B=se=0;se<E;B=se+=1)x=s[l++],P=(B-B%o)/o,K=B<o?0:j[F-o],N=A&&j[(A-1)*E+P*o+B%o],j[F++]=(x+Math.floor((K+N)/2))%256;break;case 4:for(B=me=0;me<E;B=me+=1)x=s[l++],P=(B-B%o)/o,K=B<o?0:j[F-o],A===0?N=G=0:(N=j[(A-1)*E+P*o+B%o],G=P&&j[(A-1)*E+(P-1)*o+B%o]),le=K+N-G,we=Math.abs(le-K),I=Math.abs(le-N),k=Math.abs(le-G),U=we<=I&&we<=k?K:I<=k?N:G,j[F++]=(x+U)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!C){var z=((b+A*M)*f.width+y)*o,W=A*E;for(B=0;B<be;B+=1){for(var Q=0;Q<o;Q+=1)a[z++]=j[W++];z+=(v-1)*o}}A++}}return s=eS(s),f.interlaceMethod==1?(g(0,0,8,8),g(4,0,8,8),g(0,4,4,8),g(2,0,4,4),g(0,2,2,4),g(1,0,2,2),g(0,1,1,2)):g(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,f,g,y,b,v;for(a=this.palette,g=this.transparency.indexed||[],f=new Uint8Array((g.length||0)+a.length),l=0,s=0,o=y=0,b=a.length;y<b;o=y+=3)f[l++]=a[o],f[l++]=a[o+1],f[l++]=a[o+2],f[l++]=(v=g[s++])!=null?v:255;return f},r.prototype.copyToImageData=function(s,o){var a,l,f,g,y,b,v,M,x,F,P;if(l=this.colors,x=null,a=this.hasAlphaChannel,this.palette.length&&(x=(P=this._decodedPalette)!=null?P:this._decodedPalette=this.decodePalette(),l=4,a=!0),M=(f=s.data||s).length,y=x||o,g=b=0,l===1)for(;g<M;)v=x?4*o[g/4]:b,F=y[v++],f[g++]=F,f[g++]=F,f[g++]=F,f[g++]=a?y[v++]:255,b=v;else for(;g<M;)v=x?4*o[g/4]:b,f[g++]=y[v++],f[g++]=y[v++],f[g++]=y[v++],f[g++]=a?y[v++]:255,b=v},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(it)==="[object Window]"){try{e=it.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(s){var o;if(i()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,f,g,y,b,v;if(this.animation){for(v=[],a=g=0,y=(b=this.animation.frames).length;g<y;a=++g)o=b[a],l=s.createImageData(o.width,o.height),f=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,f),o.imageData=l,v.push(o.image=n(l));return v}},r.prototype.renderFrame=function(s,o){var a,l,f;return a=(l=this.animation.frames)[o],f=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(f!=null?f.disposeOp:void 0)===1?s.clearRect(f.xOffset,f.yOffset,f.width,f.height):(f!=null?f.disposeOp:void 0)===2&&s.putImageData(f.imageData,f.xOffset,f.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,f,g,y,b=this;return a=0,y=this.animation,f=y.numFrames,l=y.frames,g=y.numPlays,(o=function(){var v,M;if(v=a++%f,M=l[v],b.renderFrame(s,v),f>1&&a/f<g)return b.animation._timeout=setTimeout(o,M.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function ES(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],s=i>>7,o=1<<(7&i)+1;n[e++],n[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var f=!0,g=[],y=0,b=null,v=0,M=null;for(this.width=t,this.height=r;f&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,M=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((A=n[e++])>=0))throw Error("Invalid block size");if(A===0)break;e+=A}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var x=n[e++];y=n[e++]|n[e++]<<8,b=n[e++],(1&x)==0&&(b=null),v=x>>2&7,e++;break;case 254:for(;;){if(!((A=n[e++])>=0))throw Error("Invalid block size");if(A===0)break;e+=A}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var F=n[e++]|n[e++]<<8,P=n[e++]|n[e++]<<8,B=n[e++]|n[e++]<<8,K=n[e++]|n[e++]<<8,ie=n[e++],le=ie>>6&1,we=1<<(7&ie)+1,U=a,I=l,k=!1;ie>>7&&(k=!0,U=e,I=we,e+=3*we);var j=e;for(e++;;){var A;if(!((A=n[e++])>=0))throw Error("Invalid block size");if(A===0)break;e+=A}g.push({x:F,y:P,width:B,height:K,has_local_palette:k,palette_offset:U,palette_size:I,data_offset:j,data_length:e-j,transparent_index:b,interlaced:!!le,delay:y,disposal:v});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return M},this.frameInfo=function(E){if(E<0||E>=g.length)throw new Error("Frame index out of range.");return g[E]},this.decodeAndBlitFrameBGRA=function(E,N){var G=this.frameInfo(E),pe=G.width*G.height,fe=new Uint8Array(pe);c1(n,G.data_offset,fe,pe);var ge=G.palette_offset,se=G.transparent_index;se===null&&(se=256);var me=G.width,be=t-me,qe=me,C=4*(G.y*t+G.x),z=4*((G.y+G.height)*t+G.x),W=C,Q=4*be;G.interlaced===!0&&(Q+=4*t*7);for(var ne=8,ue=0,he=fe.length;ue<he;++ue){var de=fe[ue];if(qe===0&&(qe=me,(W+=Q)>=z&&(Q=4*be+4*t*(ne-1),W=C+(me+be)*(ne<<1),ne>>=1)),de===se)W+=4;else{var ke=n[ge+3*de],Re=n[ge+3*de+1],Fe=n[ge+3*de+2];N[W++]=Fe,N[W++]=Re,N[W++]=ke,N[W++]=255}--qe}},this.decodeAndBlitFrameRGBA=function(E,N){var G=this.frameInfo(E),pe=G.width*G.height,fe=new Uint8Array(pe);c1(n,G.data_offset,fe,pe);var ge=G.palette_offset,se=G.transparent_index;se===null&&(se=256);var me=G.width,be=t-me,qe=me,C=4*(G.y*t+G.x),z=4*((G.y+G.height)*t+G.x),W=C,Q=4*be;G.interlaced===!0&&(Q+=4*t*7);for(var ne=8,ue=0,he=fe.length;ue<he;++ue){var de=fe[ue];if(qe===0&&(qe=me,(W+=Q)>=z&&(Q=4*be+4*t*(ne-1),W=C+(me+be)*(ne<<1),ne>>=1)),de===se)W+=4;else{var ke=n[ge+3*de],Re=n[ge+3*de+1],Fe=n[ge+3*de+2];N[W++]=ke,N[W++]=Re,N[W++]=Fe,N[W++]=255}--qe}}}function c1(n,e,t,r){for(var i=n[e++],s=1<<i,o=s+1,a=o+1,l=i+1,f=(1<<l)-1,g=0,y=0,b=0,v=n[e++],M=new Int32Array(4096),x=null;;){for(;g<16&&v!==0;)y|=n[e++]<<g,g+=8,v===1?v=n[e++]:--v;if(g<l)break;var F=y&f;if(y>>=l,g-=l,F!==s){if(F===o)break;for(var P=F<a?F:x,B=0,K=P;K>s;)K=M[K]>>8,++B;var ie=K;if(b+B+(P!==F?1:0)>r)return void Bt.log("Warning, gif stream longer than expected.");t[b++]=ie;var le=b+=B;for(P!==F&&(t[b++]=ie),K=P;B--;)K=M[K],t[--le]=255&K,K>>=8;x!==null&&a<4096&&(M[a++]=x<<8|ie,a>=f+1&&l<12&&(++l,f=f<<1|1)),x=F}else a=o+1,f=(1<<(l=i+1))-1,x=null}return b!==r&&Bt.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function pf(n){var e,t,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),f=new Array(64),g=new Array(64),y=new Array(65535),b=new Array(65535),v=new Array(64),M=new Array(64),x=[],F=0,P=7,B=new Array(64),K=new Array(64),ie=new Array(64),le=new Array(256),we=new Array(2048),U=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],I=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],j=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],E=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],pe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function fe(C,z){for(var W=0,Q=0,ne=new Array,ue=1;ue<=16;ue++){for(var he=1;he<=C[ue];he++)ne[z[Q]]=[],ne[z[Q]][0]=W,ne[z[Q]][1]=ue,Q++,W++;W*=2}return ne}function ge(C){for(var z=C[0],W=C[1]-1;W>=0;)z&1<<W&&(F|=1<<P),W--,--P<0&&(F==255?(se(255),se(0)):se(F),P=7,F=0)}function se(C){x.push(C)}function me(C){se(C>>8&255),se(255&C)}function be(C,z,W,Q,ne){for(var ue,he=ne[0],de=ne[240],ke=function(Ce,xe){var je,Ve,Je,at,ht,Qe,rt,St,tt,vt,Be=0;for(tt=0;tt<8;++tt){je=Ce[Be],Ve=Ce[Be+1],Je=Ce[Be+2],at=Ce[Be+3],ht=Ce[Be+4],Qe=Ce[Be+5],rt=Ce[Be+6];var Xt=je+(St=Ce[Be+7]),Et=je-St,rr=Ve+rt,Lt=Ve-rt,qt=Je+Qe,Nr=Je-Qe,It=at+ht,ui=at-ht,Wt=Xt+It,Ln=Xt-It,gr=rr+qt,zt=rr-qt;Ce[Be]=Wt+gr,Ce[Be+4]=Wt-gr;var Ze=.707106781*(zt+Ln);Ce[Be+2]=Ln+Ze,Ce[Be+6]=Ln-Ze;var Nt=.382683433*((Wt=ui+Nr)-(zt=Lt+Et)),Pr=.5411961*Wt+Nt,fn=1.306562965*zt+Nt,Mn=.707106781*(gr=Nr+Lt),mr=Et+Mn,He=Et-Mn;Ce[Be+5]=He+Pr,Ce[Be+3]=He-Pr,Ce[Be+1]=mr+fn,Ce[Be+7]=mr-fn,Be+=8}for(Be=0,tt=0;tt<8;++tt){je=Ce[Be],Ve=Ce[Be+8],Je=Ce[Be+16],at=Ce[Be+24],ht=Ce[Be+32],Qe=Ce[Be+40],rt=Ce[Be+48];var ir=je+(St=Ce[Be+56]),Vn=je-St,dn=Ve+rt,rn=Ve-rt,Zt=Je+Qe,pn=Je-Qe,ls=at+ht,Vr=at-ht,Un=ir+ls,sr=ir-ls,Yn=dn+Zt,Xn=dn-Zt;Ce[Be]=Un+Yn,Ce[Be+32]=Un-Yn;var sn=.707106781*(Xn+sr);Ce[Be+16]=sr+sn,Ce[Be+48]=sr-sn;var vr=.382683433*((Un=Vr+pn)-(Xn=rn+Vn)),li=.5411961*Un+vr,hi=1.306562965*Xn+vr,fi=.707106781*(Yn=pn+rn),Mi=Vn+fi,Vi=Vn-fi;Ce[Be+40]=Vi+li,Ce[Be+24]=Vi-li,Ce[Be+8]=Mi+hi,Ce[Be+56]=Mi-hi,Be++}for(tt=0;tt<64;++tt)vt=Ce[tt]*xe[tt],v[tt]=vt>0?vt+.5|0:vt-.5|0;return v}(C,z),Re=0;Re<64;++Re)M[U[Re]]=ke[Re];var Fe=M[0]-W;W=M[0],Fe==0?ge(Q[0]):(ge(Q[b[ue=32767+Fe]]),ge(y[ue]));for(var Oe=63;Oe>0&&M[Oe]==0;)Oe--;if(Oe==0)return ge(he),W;for(var Xe,_e=1;_e<=Oe;){for(var H=_e;M[_e]==0&&_e<=Oe;)++_e;var ut=_e-H;if(ut>=16){Xe=ut>>4;for(var Ke=1;Ke<=Xe;++Ke)ge(de);ut&=15}ue=32767+M[_e],ge(ne[(ut<<4)+b[ue]]),ge(y[ue]),_e++}return Oe!=63&&ge(he),W}function qe(C){C=Math.min(Math.max(C,1),100),s!=C&&(function(z){for(var W=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Q=0;Q<64;Q++){var ne=o((W[Q]*z+50)/100);ne=Math.min(Math.max(ne,1),255),a[U[Q]]=ne}for(var ue=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],he=0;he<64;he++){var de=o((ue[he]*z+50)/100);de=Math.min(Math.max(de,1),255),l[U[he]]=de}for(var ke=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Re=0,Fe=0;Fe<8;Fe++)for(var Oe=0;Oe<8;Oe++)f[Re]=1/(a[U[Re]]*ke[Fe]*ke[Oe]*8),g[Re]=1/(l[U[Re]]*ke[Fe]*ke[Oe]*8),Re++}(C<50?Math.floor(5e3/C):Math.floor(200-2*C)),s=C)}this.encode=function(C,z){z&&qe(z),x=new Array,F=0,P=7,me(65496),me(65504),me(16),se(74),se(70),se(73),se(70),se(0),se(1),se(1),se(0),me(1),me(1),se(0),se(0),function(){me(65499),me(132),se(0);for(var Ve=0;Ve<64;Ve++)se(a[Ve]);se(1);for(var Je=0;Je<64;Je++)se(l[Je])}(),function(Ve,Je){me(65472),me(17),se(8),me(Je),me(Ve),se(3),se(1),se(17),se(0),se(2),se(17),se(1),se(3),se(17),se(1)}(C.width,C.height),function(){me(65476),me(418),se(0);for(var Ve=0;Ve<16;Ve++)se(I[Ve+1]);for(var Je=0;Je<=11;Je++)se(k[Je]);se(16);for(var at=0;at<16;at++)se(j[at+1]);for(var ht=0;ht<=161;ht++)se(A[ht]);se(1);for(var Qe=0;Qe<16;Qe++)se(E[Qe+1]);for(var rt=0;rt<=11;rt++)se(N[rt]);se(17);for(var St=0;St<16;St++)se(G[St+1]);for(var tt=0;tt<=161;tt++)se(pe[tt])}(),me(65498),me(12),se(3),se(1),se(0),se(2),se(17),se(3),se(17),se(0),se(63),se(0);var W=0,Q=0,ne=0;F=0,P=7,this.encode.displayName="_encode_";for(var ue,he,de,ke,Re,Fe,Oe,Xe,_e,H=C.data,ut=C.width,Ke=C.height,Ce=4*ut,xe=0;xe<Ke;){for(ue=0;ue<Ce;){for(Re=Ce*xe+ue,Oe=-1,Xe=0,_e=0;_e<64;_e++)Fe=Re+(Xe=_e>>3)*Ce+(Oe=4*(7&_e)),xe+Xe>=Ke&&(Fe-=Ce*(xe+1+Xe-Ke)),ue+Oe>=Ce&&(Fe-=ue+Oe-Ce+4),he=H[Fe++],de=H[Fe++],ke=H[Fe++],B[_e]=(we[he]+we[de+256>>0]+we[ke+512>>0]>>16)-128,K[_e]=(we[he+768>>0]+we[de+1024>>0]+we[ke+1280>>0]>>16)-128,ie[_e]=(we[he+1280>>0]+we[de+1536>>0]+we[ke+1792>>0]>>16)-128;W=be(B,f,W,e,r),Q=be(K,g,Q,t,i),ne=be(ie,g,ne,t,i),ue+=32}xe+=8}if(P>=0){var je=[];je[1]=P+1,je[0]=(1<<P+1)-1,ge(je)}return me(65497),new Uint8Array(x)},n=n||50,function(){for(var C=String.fromCharCode,z=0;z<256;z++)le[z]=C(z)}(),e=fe(I,k),t=fe(E,N),r=fe(j,A),i=fe(G,pe),function(){for(var C=1,z=2,W=1;W<=15;W++){for(var Q=C;Q<z;Q++)b[32767+Q]=W,y[32767+Q]=[],y[32767+Q][1]=W,y[32767+Q][0]=Q;for(var ne=-(z-1);ne<=-C;ne++)b[32767+ne]=W,y[32767+ne]=[],y[32767+ne][1]=W,y[32767+ne][0]=z-1+ne;C<<=1,z<<=1}}(),function(){for(var C=0;C<256;C++)we[C]=19595*C,we[C+256>>0]=38470*C,we[C+512>>0]=7471*C+32768,we[C+768>>0]=-11059*C,we[C+1024>>0]=-21709*C,we[C+1280>>0]=32768*C+8421375,we[C+1536>>0]=-27439*C,we[C+1792>>0]=-5329*C}(),qe(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Yr(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function u1(n){function e(I){if(!I)throw Error("assert :P")}function t(I,k,j){for(var A=0;4>A;A++)if(I[k+A]!=j.charCodeAt(A))return!0;return!1}function r(I,k,j,A,E){for(var N=0;N<E;N++)I[k+N]=j[A+N]}function i(I,k,j,A){for(var E=0;E<A;E++)I[k+E]=j}function s(I){return new Int32Array(I)}function o(I,k){for(var j=[],A=0;A<I;A++)j.push(new k);return j}function a(I,k){var j=[];return function A(E,N,G){for(var pe=G[N],fe=0;fe<pe&&(E.push(G.length>N+1?[]:new k),!(G.length<N+1));fe++)A(E[fe],N+1,G)}(j,0,I),j}var l=function(){var I=this;function k(c,h){for(var p=1<<h-1>>>0;c&p;)p>>>=1;return p?(c&p-1)+p:c}function j(c,h,p,_,S){e(!(_%p));do c[h+(_-=p)]=S;while(0<_)}function A(c,h,p,_,S){if(e(2328>=S),512>=S)var L=s(512);else if((L=s(S))==null)return 0;return function(R,D,V,q,Y,oe){var ae,re,Ie=D,ve=1<<V,X=s(16),Z=s(16);for(e(Y!=0),e(q!=null),e(R!=null),e(0<V),re=0;re<Y;++re){if(15<q[re])return 0;++X[q[re]]}if(X[0]==Y)return 0;for(Z[1]=0,ae=1;15>ae;++ae){if(X[ae]>1<<ae)return 0;Z[ae+1]=Z[ae]+X[ae]}for(re=0;re<Y;++re)ae=q[re],0<q[re]&&(oe[Z[ae]++]=re);if(Z[15]==1)return(q=new E).g=0,q.value=oe[0],j(R,Ie,1,ve,q),ve;var Ae,Ne=-1,Ee=ve-1,ze=0,De=1,et=1,Ue=1<<V;for(re=0,ae=1,Y=2;ae<=V;++ae,Y<<=1){if(De+=et<<=1,0>(et-=X[ae]))return 0;for(;0<X[ae];--X[ae])(q=new E).g=ae,q.value=oe[re++],j(R,Ie+ze,Y,Ue,q),ze=k(ze,ae)}for(ae=V+1,Y=2;15>=ae;++ae,Y<<=1){if(De+=et<<=1,0>(et-=X[ae]))return 0;for(;0<X[ae];--X[ae]){if(q=new E,(ze&Ee)!=Ne){for(Ie+=Ue,Ae=1<<(Ne=ae)-V;15>Ne&&!(0>=(Ae-=X[Ne]));)++Ne,Ae<<=1;ve+=Ue=1<<(Ae=Ne-V),R[D+(Ne=ze&Ee)].g=Ae+V,R[D+Ne].value=Ie-D-Ne}q.g=ae-V,q.value=oe[re++],j(R,Ie+(ze>>V),Y,Ue,q),ze=k(ze,ae)}}return De!=2*Z[15]-1?0:ve}(c,h,p,_,S,L)}function E(){this.value=this.g=0}function N(){this.value=this.g=0}function G(){this.G=o(5,E),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(kn,N)}function pe(c,h,p,_){e(c!=null),e(h!=null),e(2147483648>_),c.Ca=254,c.I=0,c.b=-8,c.Ka=0,c.oa=h,c.pa=p,c.Jd=h,c.Yc=p+_,c.Zc=4<=_?p+_-4+1:p,ue(c)}function fe(c,h){for(var p=0;0<h--;)p|=de(c,128)<<h;return p}function ge(c,h){var p=fe(c,h);return he(c)?-p:p}function se(c,h,p,_){var S,L=0;for(e(c!=null),e(h!=null),e(4294967288>_),c.Sb=_,c.Ra=0,c.u=0,c.h=0,4<_&&(_=4),S=0;S<_;++S)L+=h[p+S]<<8*S;c.Ra=L,c.bb=_,c.oa=h,c.pa=p}function me(c){for(;8<=c.u&&c.bb<c.Sb;)c.Ra>>>=8,c.Ra+=c.oa[c.pa+c.bb]<<va-8>>>0,++c.bb,c.u-=8;W(c)&&(c.h=1,c.u=0)}function be(c,h){if(e(0<=h),!c.h&&h<=ma){var p=z(c)&ga[h];return c.u+=h,me(c),p}return c.h=1,c.u=0}function qe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function C(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function z(c){return c.Ra>>>(c.u&va-1)>>>0}function W(c){return e(c.bb<=c.Sb),c.h||c.bb==c.Sb&&c.u>va}function Q(c,h){c.u=h,c.h=W(c)}function ne(c){c.u>=vc&&(e(c.u>=vc),me(c))}function ue(c){e(c!=null&&c.oa!=null),c.pa<c.Zc?(c.I=(c.oa[c.pa++]|c.I<<8)>>>0,c.b+=8):(e(c!=null&&c.oa!=null),c.pa<c.Yc?(c.b+=8,c.I=c.oa[c.pa++]|c.I<<8):c.Ka?c.b=0:(c.I<<=8,c.b+=8,c.Ka=1))}function he(c){return fe(c,1)}function de(c,h){var p=c.Ca;0>c.b&&ue(c);var _=c.b,S=p*h>>>8,L=(c.I>>>_>S)+0;for(L?(p-=S,c.I-=S+1<<_>>>0):p=S+1,_=p,S=0;256<=_;)S+=8,_>>=8;return _=7^S+ar[_],c.b-=_,c.Ca=(p<<_)-1,L}function ke(c,h,p){c[h+0]=p>>24&255,c[h+1]=p>>16&255,c[h+2]=p>>8&255,c[h+3]=p>>0&255}function Re(c,h){return c[h+0]<<0|c[h+1]<<8}function Fe(c,h){return Re(c,h)|c[h+2]<<16}function Oe(c,h){return Re(c,h)|Re(c,h+2)<<16}function Xe(c,h){var p=1<<h;return e(c!=null),e(0<h),c.X=s(p),c.X==null?0:(c.Mb=32-h,c.Xa=h,1)}function _e(c,h){e(c!=null),e(h!=null),e(c.Xa==h.Xa),r(h.X,0,c.X,0,1<<h.Xa)}function H(){this.X=[],this.Xa=this.Mb=0}function ut(c,h,p,_){e(p!=null),e(_!=null);var S=p[0],L=_[0];return S==0&&(S=(c*L+h/2)/h),L==0&&(L=(h*S+c/2)/c),0>=S||0>=L?0:(p[0]=S,_[0]=L,1)}function Ke(c,h){return c+(1<<h)-1>>>h}function Ce(c,h){return((4278255360&c)+(4278255360&h)>>>0&4278255360)+((16711935&c)+(16711935&h)>>>0&16711935)>>>0}function xe(c,h){I[h]=function(p,_,S,L,R,D,V){var q;for(q=0;q<R;++q){var Y=I[c](D[V+q-1],S,L+q);D[V+q]=Ce(p[_+q],Y)}}}function je(){this.ud=this.hd=this.jd=0}function Ve(c,h){return((4278124286&(c^h))>>>1)+(c&h)>>>0}function Je(c){return 0<=c&&256>c?c:0>c?0:255<c?255:void 0}function at(c,h){return Je(c+(c-h+.5>>1))}function ht(c,h,p){return Math.abs(h-p)-Math.abs(c-p)}function Qe(c,h,p,_,S,L,R){for(_=L[R-1],p=0;p<S;++p)L[R+p]=_=Ce(c[h+p],_)}function rt(c,h,p,_,S){var L;for(L=0;L<p;++L){var R=c[h+L],D=R>>8&255,V=16711935&(V=(V=16711935&R)+((D<<16)+D));_[S+L]=(4278255360&R)+V>>>0}}function St(c,h){h.jd=c>>0&255,h.hd=c>>8&255,h.ud=c>>16&255}function tt(c,h,p,_,S,L){var R;for(R=0;R<_;++R){var D=h[p+R],V=D>>>8,q=D,Y=255&(Y=(Y=D>>>16)+((c.jd<<24>>24)*(V<<24>>24)>>>5));q=255&(q=(q=q+((c.hd<<24>>24)*(V<<24>>24)>>>5))+((c.ud<<24>>24)*(Y<<24>>24)>>>5)),S[L+R]=(4278255360&D)+(Y<<16)+q}}function vt(c,h,p,_,S){I[h]=function(L,R,D,V,q,Y,oe,ae,re){for(V=oe;V<ae;++V)for(oe=0;oe<re;++oe)q[Y++]=S(D[_(L[R++])])},I[c]=function(L,R,D,V,q,Y,oe){var ae=8>>L.b,re=L.Ea,Ie=L.K[0],ve=L.w;if(8>ae)for(L=(1<<L.b)-1,ve=(1<<ae)-1;R<D;++R){var X,Z=0;for(X=0;X<re;++X)X&L||(Z=_(V[q++])),Y[oe++]=S(Ie[Z&ve]),Z>>=ae}else I["VP8LMapColor"+p](V,q,Ie,ve,Y,oe,R,D,re)}}function Be(c,h,p,_,S){for(p=h+p;h<p;){var L=c[h++];_[S++]=L>>16&255,_[S++]=L>>8&255,_[S++]=L>>0&255}}function Xt(c,h,p,_,S){for(p=h+p;h<p;){var L=c[h++];_[S++]=L>>16&255,_[S++]=L>>8&255,_[S++]=L>>0&255,_[S++]=L>>24&255}}function Et(c,h,p,_,S){for(p=h+p;h<p;){var L=(R=c[h++])>>16&240|R>>12&15,R=R>>0&240|R>>28&15;_[S++]=L,_[S++]=R}}function rr(c,h,p,_,S){for(p=h+p;h<p;){var L=(R=c[h++])>>16&248|R>>13&7,R=R>>5&224|R>>3&31;_[S++]=L,_[S++]=R}}function Lt(c,h,p,_,S){for(p=h+p;h<p;){var L=c[h++];_[S++]=L>>0&255,_[S++]=L>>8&255,_[S++]=L>>16&255}}function qt(c,h,p,_,S,L){if(L==0)for(p=h+p;h<p;)ke(_,((L=c[h++])[0]>>24|L[1]>>8&65280|L[2]<<8&16711680|L[3]<<24)>>>0),S+=32;else r(_,S,c,h,p)}function Nr(c,h){I[h][0]=I[c+"0"],I[h][1]=I[c+"1"],I[h][2]=I[c+"2"],I[h][3]=I[c+"3"],I[h][4]=I[c+"4"],I[h][5]=I[c+"5"],I[h][6]=I[c+"6"],I[h][7]=I[c+"7"],I[h][8]=I[c+"8"],I[h][9]=I[c+"9"],I[h][10]=I[c+"10"],I[h][11]=I[c+"11"],I[h][12]=I[c+"12"],I[h][13]=I[c+"13"],I[h][14]=I[c+"0"],I[h][15]=I[c+"0"]}function It(c){return c==Eh||c==Ih||c==Iu||c==Th}function ui(){this.eb=[],this.size=this.A=this.fb=0}function Wt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ln(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ui,this.f.kb=new Wt,this.sd=null}function gr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function zt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ze(c){return alert("todo:WebPSamplerProcessPlane"),c.T}function Nt(c,h){var p=c.T,_=h.ba.f.RGBA,S=_.eb,L=_.fb+c.ka*_.A,R=Dr[h.ba.S],D=c.y,V=c.O,q=c.f,Y=c.N,oe=c.ea,ae=c.W,re=h.cc,Ie=h.dc,ve=h.Mc,X=h.Nc,Z=c.ka,Ae=c.ka+c.T,Ne=c.U,Ee=Ne+1>>1;for(Z==0?R(D,V,null,null,q,Y,oe,ae,q,Y,oe,ae,S,L,null,null,Ne):(R(h.ec,h.fc,D,V,re,Ie,ve,X,q,Y,oe,ae,S,L-_.A,S,L,Ne),++p);Z+2<Ae;Z+=2)re=q,Ie=Y,ve=oe,X=ae,Y+=c.Rc,ae+=c.Rc,L+=2*_.A,R(D,(V+=2*c.fa)-c.fa,D,V,re,Ie,ve,X,q,Y,oe,ae,S,L-_.A,S,L,Ne);return V+=c.fa,c.j+Ae<c.o?(r(h.ec,h.fc,D,V,Ne),r(h.cc,h.dc,q,Y,Ee),r(h.Mc,h.Nc,oe,ae,Ee),p--):1&Ae||R(D,V,null,null,q,Y,oe,ae,q,Y,oe,ae,S,L+_.A,null,null,Ne),p}function Pr(c,h,p){var _=c.F,S=[c.J];if(_!=null){var L=c.U,R=h.ba.S,D=R==Eu||R==Iu;h=h.ba.f.RGBA;var V=[0],q=c.ka;V[0]=c.T,c.Kb&&(q==0?--V[0]:(--q,S[0]-=c.width),c.j+c.ka+c.T==c.o&&(V[0]=c.o-c.j-q));var Y=h.eb;q=h.fb+q*h.A,c=Ht(_,S[0],c.width,L,V,Y,q+(D?0:3),h.A),e(p==V),c&&It(R)&&xr(Y,q,D,L,V,h.A)}return 0}function fn(c){var h=c.ma,p=h.ba.S,_=11>p,S=p==bu||p==Au||p==Eu||p==Ah||p==12||It(p);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!gc(h.Oa,c,S?11:12))return 0;if(S&&It(p)&&Pe(),c.da)alert("todo:use_scaling");else{if(_){if(h.Ib=Ze,c.Kb){if(p=c.U+1>>1,h.memory=s(c.U+2*p),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+c.U,h.Mc=h.cc,h.Nc=h.dc+p,h.Ib=Nt,Pe()}}else alert("todo:EmitYUV");S&&(h.Jb=Pr,_&&te())}if(_&&!Tp){for(c=0;256>c;++c)Lv[c]=89858*(c-128)+Su>>Tu,kv[c]=-22014*(c-128)+Su,Cv[c]=-45773*(c-128),Rv[c]=113618*(c-128)+Su>>Tu;for(c=Ic;c<Ph;++c)h=76283*(c-16)+Su>>Tu,xv[c-Ic]=kt(h,255),Ov[c-Ic]=kt(h+8>>4,15);Tp=1}return 1}function Mn(c){var h=c.ma,p=c.U,_=c.T;return e(!(1&c.ka)),0>=p||0>=_?0:(p=h.Ib(c,h),h.Jb!=null&&h.Jb(c,h,p),h.Dc+=p,1)}function mr(c){c.ma.memory=null}function He(c,h,p,_){return be(c,8)!=47?0:(h[0]=be(c,14)+1,p[0]=be(c,14)+1,_[0]=be(c,1),be(c,3)!=0?0:!c.h)}function ir(c,h){if(4>c)return c+1;var p=c-2>>1;return(2+(1&c)<<p)+be(h,p)+1}function Vn(c,h){return 120<h?h-120:1<=(p=((p=gv[h-1])>>4)*c+(8-(15&p)))?p:1;var p}function dn(c,h,p){var _=z(p),S=c[h+=255&_].g-8;return 0<S&&(Q(p,p.u+8),_=z(p),h+=c[h].value,h+=_&(1<<S)-1),Q(p,p.u+c[h].g),c[h].value}function rn(c,h,p){return p.g+=c.g,p.value+=c.value<<h>>>0,e(8>=p.g),c.g}function Zt(c,h,p){var _=c.xc;return e((h=_==0?0:c.vc[c.md*(p>>_)+(h>>_)])<c.Wb),c.Ya[h]}function pn(c,h,p,_){var S=c.ab,L=c.c*h,R=c.C;h=R+h;var D=p,V=_;for(_=c.Ta,p=c.Ua;0<S--;){var q=c.gc[S],Y=R,oe=h,ae=D,re=V,Ie=(V=_,D=p,q.Ea);switch(e(Y<oe),e(oe<=q.nc),q.hc){case 2:pu(ae,re,(oe-Y)*Ie,V,D);break;case 0:var ve=Y,X=oe,Z=V,Ae=D,Ne=(Ue=q).Ea;ve==0&&(wh(ae,re,null,null,1,Z,Ae),Qe(ae,re+1,0,0,Ne-1,Z,Ae+1),re+=Ne,Ae+=Ne,++ve);for(var Ee=1<<Ue.b,ze=Ee-1,De=Ke(Ne,Ue.b),et=Ue.K,Ue=Ue.w+(ve>>Ue.b)*De;ve<X;){var Rt=et,Dt=Ue,Pt=1;for(yc(ae,re,Z,Ae-Ne,1,Z,Ae);Pt<Ne;){var bt=(Pt&~ze)+Ee;bt>Ne&&(bt=Ne),(0,Ps[Rt[Dt++]>>8&15])(ae,re+ +Pt,Z,Ae+Pt-Ne,bt-Pt,Z,Ae+Pt),Pt=bt}re+=Ne,Ae+=Ne,++ve&ze||(Ue+=De)}oe!=q.nc&&r(V,D-Ie,V,D+(oe-Y-1)*Ie,Ie);break;case 1:for(Ie=ae,X=re,Ne=(ae=q.Ea)-(Ae=ae&~(Z=(re=1<<q.b)-1)),ve=Ke(ae,q.b),Ee=q.K,q=q.w+(Y>>q.b)*ve;Y<oe;){for(ze=Ee,De=q,et=new je,Ue=X+Ae,Rt=X+ae;X<Ue;)St(ze[De++],et),Ro(et,Ie,X,re,V,D),X+=re,D+=re;X<Rt&&(St(ze[De++],et),Ro(et,Ie,X,Ne,V,D),X+=Ne,D+=Ne),++Y&Z||(q+=ve)}break;case 3:if(ae==V&&re==D&&0<q.b){for(X=V,ae=Ie=D+(oe-Y)*Ie-(Ae=(oe-Y)*Ke(q.Ea,q.b)),re=V,Z=D,ve=[],Ae=(Ne=Ae)-1;0<=Ae;--Ae)ve[Ae]=re[Z+Ae];for(Ae=Ne-1;0<=Ae;--Ae)X[ae+Ae]=ve[Ae];Rr(q,Y,oe,V,Ie,V,D)}else Rr(q,Y,oe,ae,re,V,D)}D=_,V=p}V!=p&&r(_,p,D,V,L)}function ls(c,h){var p=c.V,_=c.Ba+c.c*c.C,S=h-c.C;if(e(h<=c.l.o),e(16>=S),0<S){var L=c.l,R=c.Ta,D=c.Ua,V=L.width;if(pn(c,S,p,_),S=D=[D],e((p=c.C)<(_=h)),e(L.v<L.va),_>L.o&&(_=L.o),p<L.j){var q=L.j-p;p=L.j,S[0]+=q*V}if(p>=_?p=0:(S[0]+=4*L.v,L.ka=p-L.j,L.U=L.va-L.v,L.T=_-p,p=1),p){if(D=D[0],11>(p=c.ca).S){var Y=p.f.RGBA,oe=(_=p.S,S=L.U,L=L.T,q=Y.eb,Y.A),ae=L;for(Y=Y.fb+c.Ma*Y.A;0<ae--;){var re=R,Ie=D,ve=S,X=q,Z=Y;switch(_){case wu:cr(re,Ie,ve,X,Z);break;case bu:er(re,Ie,ve,X,Z);break;case Eh:er(re,Ie,ve,X,Z),xr(X,Z,0,ve,1,0);break;case mp:Ji(re,Ie,ve,X,Z);break;case Au:qt(re,Ie,ve,X,Z,1);break;case Ih:qt(re,Ie,ve,X,Z,1),xr(X,Z,0,ve,1,0);break;case Eu:qt(re,Ie,ve,X,Z,0);break;case Iu:qt(re,Ie,ve,X,Z,0),xr(X,Z,1,ve,1,0);break;case Ah:Ls(re,Ie,ve,X,Z);break;case Th:Ls(re,Ie,ve,X,Z),$t(X,Z,ve,1,0);break;case vp:Ki(re,Ie,ve,X,Z);break;default:e(0)}D+=V,Y+=oe}c.Ma+=L}else alert("todo:EmitRescaledRowsYUVA");e(c.Ma<=p.height)}}c.C=h,e(c.C<=c.i)}function Vr(c){var h;if(0<c.ua)return 0;for(h=0;h<c.Wb;++h){var p=c.Ya[h].G,_=c.Ya[h].H;if(0<p[1][_[1]+0].g||0<p[2][_[2]+0].g||0<p[3][_[3]+0].g)return 0}return 1}function Un(c,h,p,_,S,L){if(c.Z!=0){var R=c.qd,D=c.rd;for(e(xs[c.Z]!=null);h<p;++h)xs[c.Z](R,D,_,S,_,S,L),R=_,D=S,S+=L;c.qd=R,c.rd=D}}function sr(c,h){var p=c.l.ma,_=p.Z==0||p.Z==1?c.l.j:c.C;if(_=c.C<_?_:c.C,e(h<=c.l.o),h>_){var S=c.l.width,L=p.ca,R=p.tb+S*_,D=c.V,V=c.Ba+c.c*_,q=c.gc;e(c.ab==1),e(q[0].hc==3),gu(q[0],_,h,D,V,L,R),Un(p,_,h,L,R,S)}c.C=c.Ma=h}function Yn(c,h,p,_,S,L,R){var D=c.$/_,V=c.$%_,q=c.m,Y=c.s,oe=p+c.$,ae=oe;S=p+_*S;var re=p+_*L,Ie=280+Y.ua,ve=c.Pb?D:16777216,X=0<Y.ua?Y.Wa:null,Z=Y.wc,Ae=oe<re?Zt(Y,V,D):null;e(c.C<L),e(re<=S);var Ne=!1;e:for(;;){for(;Ne||oe<re;){var Ee=0;if(D>=ve){var ze=oe-p;e((ve=c).Pb),ve.wd=ve.m,ve.xd=ze,0<ve.s.ua&&_e(ve.s.Wa,ve.s.vb),ve=D+vv}if(V&Z||(Ae=Zt(Y,V,D)),e(Ae!=null),Ae.Qb&&(h[oe]=Ae.qb,Ne=!0),!Ne)if(ne(q),Ae.jc){Ee=q,ze=h;var De=oe,et=Ae.pd[z(Ee)&kn-1];e(Ae.jc),256>et.g?(Q(Ee,Ee.u+et.g),ze[De]=et.value,Ee=0):(Q(Ee,Ee.u+et.g-256),e(256<=et.value),Ee=et.value),Ee==0&&(Ne=!0)}else Ee=dn(Ae.G[0],Ae.H[0],q);if(q.h)break;if(Ne||256>Ee){if(!Ne)if(Ae.nd)h[oe]=(Ae.qb|Ee<<8)>>>0;else{if(ne(q),Ne=dn(Ae.G[1],Ae.H[1],q),ne(q),ze=dn(Ae.G[2],Ae.H[2],q),De=dn(Ae.G[3],Ae.H[3],q),q.h)break;h[oe]=(De<<24|Ne<<16|Ee<<8|ze)>>>0}if(Ne=!1,++oe,++V>=_&&(V=0,++D,R!=null&&D<=L&&!(D%16)&&R(c,D),X!=null))for(;ae<oe;)Ee=h[ae++],X.X[(506832829*Ee&4294967295)>>>X.Mb]=Ee}else if(280>Ee){if(Ee=ir(Ee-256,q),ze=dn(Ae.G[4],Ae.H[4],q),ne(q),ze=Vn(_,ze=ir(ze,q)),q.h)break;if(oe-p<ze||S-oe<Ee)break e;for(De=0;De<Ee;++De)h[oe+De]=h[oe+De-ze];for(oe+=Ee,V+=Ee;V>=_;)V-=_,++D,R!=null&&D<=L&&!(D%16)&&R(c,D);if(e(oe<=S),V&Z&&(Ae=Zt(Y,V,D)),X!=null)for(;ae<oe;)Ee=h[ae++],X.X[(506832829*Ee&4294967295)>>>X.Mb]=Ee}else{if(!(Ee<Ie))break e;for(Ne=Ee-280,e(X!=null);ae<oe;)Ee=h[ae++],X.X[(506832829*Ee&4294967295)>>>X.Mb]=Ee;Ee=oe,e(!(Ne>>>(ze=X).Xa)),h[Ee]=ze.X[Ne],Ne=!0}Ne||e(q.h==W(q))}if(c.Pb&&q.h&&oe<S)e(c.m.h),c.a=5,c.m=c.wd,c.$=c.xd,0<c.s.ua&&_e(c.s.vb,c.s.Wa);else{if(q.h)break e;R!=null&&R(c,D>L?L:D),c.a=0,c.$=oe-p}return 1}return c.a=3,0}function Xn(c){e(c!=null),c.vc=null,c.yc=null,c.Ya=null;var h=c.Wa;h!=null&&(h.X=null),c.vb=null,e(c!=null)}function sn(){var c=new da;return c==null?null:(c.a=0,c.xb=wp,Nr("Predictor","VP8LPredictors"),Nr("Predictor","VP8LPredictors_C"),Nr("PredictorAdd","VP8LPredictorsAdd"),Nr("PredictorAdd","VP8LPredictorsAdd_C"),pu=rt,Ro=tt,cr=Be,er=Xt,Ls=Et,Ki=rr,Ji=Lt,I.VP8LMapColor32b=ya,I.VP8LMapColor8b=mu,c)}function vr(c,h,p,_,S){var L=1,R=[c],D=[h],V=_.m,q=_.s,Y=null,oe=0;e:for(;;){if(p)for(;L&&be(V,1);){var ae=R,re=D,Ie=_,ve=1,X=Ie.m,Z=Ie.gc[Ie.ab],Ae=be(X,2);if(Ie.Oc&1<<Ae)L=0;else{switch(Ie.Oc|=1<<Ae,Z.hc=Ae,Z.Ea=ae[0],Z.nc=re[0],Z.K=[null],++Ie.ab,e(4>=Ie.ab),Ae){case 0:case 1:Z.b=be(X,3)+2,ve=vr(Ke(Z.Ea,Z.b),Ke(Z.nc,Z.b),0,Ie,Z.K),Z.K=Z.K[0];break;case 3:var Ne,Ee=be(X,8)+1,ze=16<Ee?0:4<Ee?1:2<Ee?2:3;if(ae[0]=Ke(Z.Ea,ze),Z.b=ze,Ne=ve=vr(Ee,1,0,Ie,Z.K)){var De,et=Ee,Ue=Z,Rt=1<<(8>>Ue.b),Dt=s(Rt);if(Dt==null)Ne=0;else{var Pt=Ue.K[0],bt=Ue.w;for(Dt[0]=Ue.K[0][0],De=1;De<1*et;++De)Dt[De]=Ce(Pt[bt+De],Dt[De-1]);for(;De<4*Rt;++De)Dt[De]=0;Ue.K[0]=null,Ue.K[0]=Dt,Ne=1}}ve=Ne;break;case 2:break;default:e(0)}L=ve}}if(R=R[0],D=D[0],L&&be(V,1)&&!(L=1<=(oe=be(V,4))&&11>=oe)){_.a=3;break e}var jt;if(jt=L)t:{var Vt,mt,gn,ur=_,mn=R,lr=D,Ft=oe,Ar=p,Er=ur.m,Tn=ur.s,xn=[null],nr=1,Fr=0,Ai=mv[Ft];n:for(;;){if(Ar&&be(Er,1)){var Sn=be(Er,3)+2,Zi=Ke(mn,Sn),Do=Ke(lr,Sn),Ea=Zi*Do;if(!vr(Zi,Do,0,ur,xn))break n;for(xn=xn[0],Tn.xc=Sn,Vt=0;Vt<Ea;++Vt){var Os=xn[Vt]>>8&65535;xn[Vt]=Os,Os>=nr&&(nr=Os+1)}}if(Er.h)break n;for(mt=0;5>mt;++mt){var tn=yp[mt];!mt&&0<Ft&&(tn+=1<<Ft),Fr<tn&&(Fr=tn)}var Lh=o(nr*Ai,E),Pp=nr,Lp=o(Pp,G);if(Lp==null)var Pu=null;else e(65536>=Pp),Pu=Lp;var Tc=s(Fr);if(Pu==null||Tc==null||Lh==null){ur.a=1;break n}var Lu=Lh;for(Vt=gn=0;Vt<nr;++Vt){var Kr=Pu[Vt],Ia=Kr.G,Ta=Kr.H,Rp=0,Ru=1,Cp=0;for(mt=0;5>mt;++mt){tn=yp[mt],Ia[mt]=Lu,Ta[mt]=gn,!mt&&0<Ft&&(tn+=1<<Ft);i:{var Cu,Rh=tn,ku=ur,Sc=Tc,Mv=Lu,Vv=gn,Ch=0,Ds=ku.m,Uv=be(Ds,1);if(i(Sc,0,0,Rh),Uv){var jv=be(Ds,1)+1,Bv=be(Ds,1),kp=be(Ds,Bv==0?1:8);Sc[kp]=1,jv==2&&(Sc[kp=be(Ds,8)]=1);var xu=1}else{var xp=s(19),Op=be(Ds,4)+4;if(19<Op){ku.a=3;var Ou=0;break i}for(Cu=0;Cu<Op;++Cu)xp[pv[Cu]]=be(Ds,3);var kh=void 0,Nc=void 0,Dp=ku,qv=xp,Du=Rh,Fp=Sc,xh=0,Fs=Dp.m,Mp=8,Vp=o(128,E);r:for(;A(Vp,0,7,qv,19);){if(be(Fs,1)){var zv=2+2*be(Fs,3);if((kh=2+be(Fs,zv))>Du)break r}else kh=Du;for(Nc=0;Nc<Du&&kh--;){ne(Fs);var Up=Vp[0+(127&z(Fs))];Q(Fs,Fs.u+Up.g);var Sa=Up.value;if(16>Sa)Fp[Nc++]=Sa,Sa!=0&&(Mp=Sa);else{var $v=Sa==16,jp=Sa-16,Hv=fv[jp],Bp=be(Fs,hv[jp])+Hv;if(Nc+Bp>Du)break r;for(var Wv=$v?Mp:0;0<Bp--;)Fp[Nc++]=Wv}}xh=1;break r}xh||(Dp.a=3),xu=xh}(xu=xu&&!Ds.h)&&(Ch=A(Mv,Vv,8,Sc,Rh)),xu&&Ch!=0?Ou=Ch:(ku.a=3,Ou=0)}if(Ou==0)break n;if(Ru&&dv[mt]==1&&(Ru=Lu[gn].g==0),Rp+=Lu[gn].g,gn+=Ou,3>=mt){var Pc,Oh=Tc[0];for(Pc=1;Pc<tn;++Pc)Tc[Pc]>Oh&&(Oh=Tc[Pc]);Cp+=Oh}}if(Kr.nd=Ru,Kr.Qb=0,Ru&&(Kr.qb=(Ia[3][Ta[3]+0].value<<24|Ia[1][Ta[1]+0].value<<16|Ia[2][Ta[2]+0].value)>>>0,Rp==0&&256>Ia[0][Ta[0]+0].value&&(Kr.Qb=1,Kr.qb+=Ia[0][Ta[0]+0].value<<8)),Kr.jc=!Kr.Qb&&6>Cp,Kr.jc){var Fu,es=Kr;for(Fu=0;Fu<kn;++Fu){var Ms=Fu,Vs=es.pd[Ms],Mu=es.G[0][es.H[0]+Ms];256<=Mu.value?(Vs.g=Mu.g+256,Vs.value=Mu.value):(Vs.g=0,Vs.value=0,Ms>>=rn(Mu,8,Vs),Ms>>=rn(es.G[1][es.H[1]+Ms],16,Vs),Ms>>=rn(es.G[2][es.H[2]+Ms],0,Vs),rn(es.G[3][es.H[3]+Ms],24,Vs))}}}Tn.vc=xn,Tn.Wb=nr,Tn.Ya=Pu,Tn.yc=Lh,jt=1;break t}jt=0}if(!(L=jt)){_.a=3;break e}if(0<oe){if(q.ua=1<<oe,!Xe(q.Wa,oe)){_.a=1,L=0;break e}}else q.ua=0;var Dh=_,qp=R,Gv=D,Fh=Dh.s,Mh=Fh.xc;if(Dh.c=qp,Dh.i=Gv,Fh.md=Ke(qp,Mh),Fh.wc=Mh==0?-1:(1<<Mh)-1,p){_.xb=Iv;break e}if((Y=s(R*D))==null){_.a=1,L=0;break e}L=(L=Yn(_,Y,0,R,D,D,null))&&!V.h;break e}return L?(S!=null?S[0]=Y:(e(Y==null),e(p)),_.$=0,p||Xn(q)):Xn(q),L}function li(c,h){var p=c.c*c.i,_=p+h+16*h;return e(c.c<=h),c.V=s(_),c.V==null?(c.Ta=null,c.Ua=0,c.a=1,0):(c.Ta=c.V,c.Ua=c.Ba+p+h,1)}function hi(c,h){var p=c.C,_=h-p,S=c.V,L=c.Ba+c.c*p;for(e(h<=c.l.o);0<_;){var R=16<_?16:_,D=c.l.ma,V=c.l.width,q=V*R,Y=D.ca,oe=D.tb+V*p,ae=c.Ta,re=c.Ua;pn(c,R,S,L),an(ae,re,Y,oe,q),Un(D,p,p+R,Y,oe,V),_-=R,S+=R*c.c,p+=R}e(p==h),c.C=c.Ma=h}function fi(){this.ub=this.yd=this.td=this.Rb=0}function Mi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Vi(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function ra(){this.Yb=function(){var c=[];return function h(p,_,S){for(var L=S[_],R=0;R<L&&(p.push(S.length>_+1?[]:0),!(S.length<_+1));R++)h(p[R],_+1,S)}(c,0,[3,11]),c}()}function hs(){this.jb=s(3),this.Wc=a([4,8],ra),this.Xc=a([4,17],ra)}function ia(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function di(){this.ld=this.La=this.dd=this.tc=0}function pi(){this.Na=this.la=0}function Ur(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ui(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function hc(){this.uc=this.M=this.Nb=0,this.wa=Array(new di),this.Y=0,this.ya=Array(new Ui),this.aa=0,this.l=new ji}function mo(){this.y=s(16),this.f=s(8),this.ea=s(8)}function sa(){this.cb=this.a=0,this.sc="",this.m=new qe,this.Od=new fi,this.Kc=new Mi,this.ed=new ia,this.Qa=new Vi,this.Ic=this.$c=this.Aa=0,this.D=new hc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,qe),this.ia=0,this.pb=o(4,Ur),this.Pa=new hs,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new mo),this.Hd=0,this.rb=Array(new pi),this.sb=0,this.wa=Array(new di),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ui),this.L=this.aa=0,this.gd=a([4,2],di),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ji(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function vo(){var c=new sa;return c!=null&&(c.a=0,c.sc="OK",c.cb=0,c.Xb=0,Ec||(Ec=oa)),c}function Gt(c,h,p){return c.a==0&&(c.a=h,c.sc=p,c.cb=0),0}function yo(c,h,p){return 3<=p&&c[h+0]==157&&c[h+1]==1&&c[h+2]==42}function _o(c,h){if(c==null)return 0;if(c.a=0,c.sc="OK",h==null)return Gt(c,2,"null VP8Io passed to VP8GetHeaders()");var p=h.data,_=h.w,S=h.ha;if(4>S)return Gt(c,7,"Truncated header.");var L=p[_+0]|p[_+1]<<8|p[_+2]<<16,R=c.Od;if(R.Rb=!(1&L),R.td=L>>1&7,R.yd=L>>4&1,R.ub=L>>5,3<R.td)return Gt(c,3,"Incorrect keyframe parameters.");if(!R.yd)return Gt(c,4,"Frame not displayable.");_+=3,S-=3;var D=c.Kc;if(R.Rb){if(7>S)return Gt(c,7,"cannot parse picture header");if(!yo(p,_,S))return Gt(c,3,"Bad code word");D.c=16383&(p[_+4]<<8|p[_+3]),D.Td=p[_+4]>>6,D.i=16383&(p[_+6]<<8|p[_+5]),D.Ud=p[_+6]>>6,_+=7,S-=7,c.za=D.c+15>>4,c.Ub=D.i+15>>4,h.width=D.c,h.height=D.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,i((L=c.Pa).jb,0,255,L.jb.length),e((L=c.Qa)!=null),L.Cb=0,L.Bb=0,L.Fb=1,i(L.Zb,0,0,L.Zb.length),i(L.Lb,0,0,L.Lb)}if(R.ub>S)return Gt(c,7,"bad partition length");pe(L=c.m,p,_,R.ub),_+=R.ub,S-=R.ub,R.Rb&&(D.Ld=he(L),D.Kd=he(L)),D=c.Qa;var V,q=c.Pa;if(e(L!=null),e(D!=null),D.Cb=he(L),D.Cb){if(D.Bb=he(L),he(L)){for(D.Fb=he(L),V=0;4>V;++V)D.Zb[V]=he(L)?ge(L,7):0;for(V=0;4>V;++V)D.Lb[V]=he(L)?ge(L,6):0}if(D.Bb)for(V=0;3>V;++V)q.jb[V]=he(L)?fe(L,8):255}else D.Bb=0;if(L.Ka)return Gt(c,3,"cannot parse segment header");if((D=c.ed).zd=he(L),D.Tb=fe(L,6),D.wb=fe(L,3),D.Pc=he(L),D.Pc&&he(L)){for(q=0;4>q;++q)he(L)&&(D.vd[q]=ge(L,6));for(q=0;4>q;++q)he(L)&&(D.od[q]=ge(L,6))}if(c.L=D.Tb==0?0:D.zd?1:2,L.Ka)return Gt(c,3,"cannot parse filter header");var Y=S;if(S=V=_,_=V+Y,D=Y,c.Xb=(1<<fe(c.m,2))-1,Y<3*(q=c.Xb))p=7;else{for(V+=3*q,D-=3*q,Y=0;Y<q;++Y){var oe=p[S+0]|p[S+1]<<8|p[S+2]<<16;oe>D&&(oe=D),pe(c.Jc[+Y],p,V,oe),V+=oe,D-=oe,S+=3}pe(c.Jc[+q],p,V,D),p=V<_?0:5}if(p!=0)return Gt(c,p,"cannot parse partitions");for(p=fe(V=c.m,7),S=he(V)?ge(V,4):0,_=he(V)?ge(V,4):0,D=he(V)?ge(V,4):0,q=he(V)?ge(V,4):0,V=he(V)?ge(V,4):0,Y=c.Qa,oe=0;4>oe;++oe){if(Y.Cb){var ae=Y.Zb[oe];Y.Fb||(ae+=p)}else{if(0<oe){c.pb[oe]=c.pb[0];continue}ae=p}var re=c.pb[oe];re.Sc[0]=Sh[kt(ae+S,127)],re.Sc[1]=Nh[kt(ae+0,127)],re.Eb[0]=2*Sh[kt(ae+_,127)],re.Eb[1]=101581*Nh[kt(ae+D,127)]>>16,8>re.Eb[1]&&(re.Eb[1]=8),re.Qc[0]=Sh[kt(ae+q,117)],re.Qc[1]=Nh[kt(ae+V,127)],re.lc=ae+V}if(!R.Rb)return Gt(c,4,"Not a key frame.");for(he(L),R=c.Pa,p=0;4>p;++p){for(S=0;8>S;++S)for(_=0;3>_;++_)for(D=0;11>D;++D)q=de(L,Av[p][S][_][D])?fe(L,8):wv[p][S][_][D],R.Wc[p][S].Yb[_][D]=q;for(S=0;17>S;++S)R.Xc[p][S]=R.Wc[p][Ev[S]]}return c.kc=he(L),c.kc&&(c.Bd=fe(L,8)),c.cb=1}function oa(c,h,p,_,S,L,R){var D=h[S].Yb[p];for(p=0;16>S;++S){if(!de(c,D[p+0]))return S;for(;!de(c,D[p+1]);)if(D=h[++S].Yb[0],p=0,S==16)return 16;var V=h[S+1].Yb;if(de(c,D[p+2])){var q=c,Y=0;if(de(q,(ae=D)[(oe=p)+3]))if(de(q,ae[oe+6])){for(D=0,oe=2*(Y=de(q,ae[oe+8]))+(ae=de(q,ae[oe+9+Y])),Y=0,ae=yv[oe];ae[D];++D)Y+=Y+de(q,ae[D]);Y+=3+(8<<oe)}else de(q,ae[oe+7])?(Y=7+2*de(q,165),Y+=de(q,145)):Y=5+de(q,159);else Y=de(q,ae[oe+4])?3+de(q,ae[oe+5]):2;D=V[2]}else Y=1,D=V[1];V=R+_v[S],0>(q=c).b&&ue(q);var oe,ae=q.b,re=(oe=q.Ca>>1)-(q.I>>ae)>>31;--q.b,q.Ca+=re,q.Ca|=1,q.I-=(oe+1&re)<<ae,L[V]=((Y^re)-re)*_[(0<S)+0]}return 16}function wo(c){var h=c.rb[c.sb-1];h.la=0,h.Na=0,i(c.zc,0,0,c.zc.length),c.ja=0}function aa(c,h){if(c==null)return 0;if(h==null)return Gt(c,2,"NULL VP8Io parameter in VP8Decode().");if(!c.cb&&!_o(c,h))return 0;if(e(c.cb),h.ac==null||h.ac(h)){h.ob&&(c.L=0);var p=Nu[c.L];if(c.L==2?(c.yb=0,c.zb=0):(c.yb=h.v-p>>4,c.zb=h.j-p>>4,0>c.yb&&(c.yb=0),0>c.zb&&(c.zb=0)),c.Va=h.o+15+p>>4,c.Hb=h.va+15+p>>4,c.Hb>c.za&&(c.Hb=c.za),c.Va>c.Ub&&(c.Va=c.Ub),0<c.L){var _=c.ed;for(p=0;4>p;++p){var S;if(c.Qa.Cb){var L=c.Qa.Lb[p];c.Qa.Fb||(L+=_.Tb)}else L=_.Tb;for(S=0;1>=S;++S){var R=c.gd[p][S],D=L;if(_.Pc&&(D+=_.vd[0],S&&(D+=_.od[0])),0<(D=0>D?0:63<D?63:D)){var V=D;0<_.wb&&(V=4<_.wb?V>>2:V>>1)>9-_.wb&&(V=9-_.wb),1>V&&(V=1),R.dd=V,R.tc=2*D+V,R.ld=40<=D?2:15<=D?1:0}else R.tc=0;R.La=S}}}p=0}else Gt(c,6,"Frame setup failed"),p=c.a;if(p=p==0){if(p){c.$c=0,0<c.Aa||(c.Ic=Fv);e:{p=c.Ic,_=4*(V=c.za);var q=32*V,Y=V+1,oe=0<c.L?V*(0<c.Aa?2:1):0,ae=(c.Aa==2?2:1)*V;if((R=_+832+(S=3*(16*p+Nu[c.L])/2*q)+(L=c.Fa!=null&&0<c.Fa.length?c.Kc.c*c.Kc.i:0))!=R)p=0;else{if(R>c.Vb){if(c.Vb=0,c.Ec=s(R),c.Fc=0,c.Ec==null){p=Gt(c,1,"no memory during frame initialization.");break e}c.Vb=R}R=c.Ec,D=c.Fc,c.Ac=R,c.Bc=D,D+=_,c.Gd=o(q,mo),c.Hd=0,c.rb=o(Y+1,pi),c.sb=1,c.wa=oe?o(oe,di):null,c.Y=0,c.D.Nb=0,c.D.wa=c.wa,c.D.Y=c.Y,0<c.Aa&&(c.D.Y+=V),e(!0),c.oc=R,c.pc=D,D+=832,c.ya=o(ae,Ui),c.aa=0,c.D.ya=c.ya,c.D.aa=c.aa,c.Aa==2&&(c.D.aa+=V),c.R=16*V,c.B=8*V,V=(q=Nu[c.L])*c.R,q=q/2*c.B,c.sa=R,c.ta=D+V,c.qa=c.sa,c.ra=c.ta+16*p*c.R+q,c.Ha=c.qa,c.Ia=c.ra+8*p*c.B+q,c.$c=0,D+=S,c.mb=L?R:null,c.nb=L?D:null,e(D+L<=c.Fc+c.Vb),wo(c),i(c.Ac,c.Bc,0,_),p=1}}if(p){if(h.ka=0,h.y=c.sa,h.O=c.ta,h.f=c.qa,h.N=c.ra,h.ea=c.Ha,h.Vd=c.Ia,h.fa=c.R,h.Rc=c.B,h.F=null,h.J=0,!yu){for(p=-255;255>=p;++p)bn[255+p]=0>p?-p:p;for(p=-1020;1020>=p;++p)Yi[1020+p]=-128>p?-128:127<p?127:p;for(p=-112;112>=p;++p)Ac[112+p]=-16>p?-16:15<p?15:p;for(p=-255;510>=p;++p)Aa[255+p]=0>p?0:255<p?255:p;yu=1}_a=zi,Qi=ds,_c=bo,tr=Ot,Cr=qi,on=Bi,wa=ws,vu=$r,wc=As,Co=Lo,ko=bs,Rs=Hi,xo=Es,ba=yi,Oo=$i,Cs=wr,bc=wn,kr=fa,Gr[0]=Lr,Gr[1]=fc,Gr[2]=mi,Gr[3]=pc,Gr[4]=la,Gr[5]=ms,Gr[6]=yr,Gr[7]=Eo,Gr[8]=ys,Gr[9]=vs,ks[0]=gi,ks[1]=dc,ks[2]=Br,ks[3]=ps,ks[4]=Kt,ks[5]=ua,ks[6]=Ao,Xi[0]=zr,Xi[1]=ca,Xi[2]=ha,Xi[3]=qr,Xi[4]=Ct,Xi[5]=Io,Xi[6]=To,p=1}else p=0}p&&(p=function(re,Ie){for(re.M=0;re.M<re.Va;++re.M){var ve,X=re.Jc[re.M&re.Xb],Z=re.m,Ae=re;for(ve=0;ve<Ae.za;++ve){var Ne=Z,Ee=Ae,ze=Ee.Ac,De=Ee.Bc+4*ve,et=Ee.zc,Ue=Ee.ya[Ee.aa+ve];if(Ee.Qa.Bb?Ue.$b=de(Ne,Ee.Pa.jb[0])?2+de(Ne,Ee.Pa.jb[2]):de(Ne,Ee.Pa.jb[1]):Ue.$b=0,Ee.kc&&(Ue.Ad=de(Ne,Ee.Bd)),Ue.Za=!de(Ne,145)+0,Ue.Za){var Rt=Ue.Ob,Dt=0;for(Ee=0;4>Ee;++Ee){var Pt,bt=et[0+Ee];for(Pt=0;4>Pt;++Pt){bt=bv[ze[De+Pt]][bt];for(var jt=_p[de(Ne,bt[0])];0<jt;)jt=_p[2*jt+de(Ne,bt[jt])];bt=-jt,ze[De+Pt]=bt}r(Rt,Dt,ze,De,4),Dt+=4,et[0+Ee]=bt}}else bt=de(Ne,156)?de(Ne,128)?1:3:de(Ne,163)?2:0,Ue.Ob[0]=bt,i(ze,De,bt,4),i(et,0,bt,4);Ue.Dd=de(Ne,142)?de(Ne,114)?de(Ne,183)?1:3:2:0}if(Ae.m.Ka)return Gt(re,7,"Premature end-of-partition0 encountered.");for(;re.ja<re.za;++re.ja){if(Ae=X,Ne=(Z=re).rb[Z.sb-1],ze=Z.rb[Z.sb+Z.ja],ve=Z.ya[Z.aa+Z.ja],De=Z.kc?ve.Ad:0)Ne.la=ze.la=0,ve.Za||(Ne.Na=ze.Na=0),ve.Hc=0,ve.Gc=0,ve.ia=0;else{var Vt,mt;if(Ne=ze,ze=Ae,De=Z.Pa.Xc,et=Z.ya[Z.aa+Z.ja],Ue=Z.pb[et.$b],Ee=et.ad,Rt=0,Dt=Z.rb[Z.sb-1],bt=Pt=0,i(Ee,Rt,0,384),et.Za)var gn=0,ur=De[3];else{jt=s(16);var mn=Ne.Na+Dt.Na;if(mn=Ec(ze,De[1],mn,Ue.Eb,0,jt,0),Ne.Na=Dt.Na=(0<mn)+0,1<mn)_a(jt,0,Ee,Rt);else{var lr=jt[0]+3>>3;for(jt=0;256>jt;jt+=16)Ee[Rt+jt]=lr}gn=1,ur=De[0]}var Ft=15&Ne.la,Ar=15&Dt.la;for(jt=0;4>jt;++jt){var Er=1&Ar;for(lr=mt=0;4>lr;++lr)Ft=Ft>>1|(Er=(mn=Ec(ze,ur,mn=Er+(1&Ft),Ue.Sc,gn,Ee,Rt))>gn)<<7,mt=mt<<2|(3<mn?3:1<mn?2:Ee[Rt+0]!=0),Rt+=16;Ft>>=4,Ar=Ar>>1|Er<<7,Pt=(Pt<<8|mt)>>>0}for(ur=Ft,gn=Ar>>4,Vt=0;4>Vt;Vt+=2){for(mt=0,Ft=Ne.la>>4+Vt,Ar=Dt.la>>4+Vt,jt=0;2>jt;++jt){for(Er=1&Ar,lr=0;2>lr;++lr)mn=Er+(1&Ft),Ft=Ft>>1|(Er=0<(mn=Ec(ze,De[2],mn,Ue.Qc,0,Ee,Rt)))<<3,mt=mt<<2|(3<mn?3:1<mn?2:Ee[Rt+0]!=0),Rt+=16;Ft>>=2,Ar=Ar>>1|Er<<5}bt|=mt<<4*Vt,ur|=Ft<<4<<Vt,gn|=(240&Ar)<<Vt}Ne.la=ur,Dt.la=gn,et.Hc=Pt,et.Gc=bt,et.ia=43690&bt?0:Ue.ia,De=!(Pt|bt)}if(0<Z.L&&(Z.wa[Z.Y+Z.ja]=Z.gd[ve.$b][ve.Za],Z.wa[Z.Y+Z.ja].La|=!De),Ae.Ka)return Gt(re,7,"Premature end-of-file encountered.")}if(wo(re),Z=Ie,Ae=1,ve=(X=re).D,Ne=0<X.L&&X.M>=X.zb&&X.M<=X.Va,X.Aa==0)e:{if(ve.M=X.M,ve.uc=Ne,wi(X,ve),Ae=1,ve=(mt=X.D).Nb,Ne=(bt=Nu[X.L])*X.R,ze=bt/2*X.B,jt=16*ve*X.R,lr=8*ve*X.B,De=X.sa,et=X.ta-Ne+jt,Ue=X.qa,Ee=X.ra-ze+lr,Rt=X.Ha,Dt=X.Ia-ze+lr,Ar=(Ft=mt.M)==0,Pt=Ft>=X.Va-1,X.Aa==2&&wi(X,mt),mt.uc)for(Er=(mn=X).D.M,e(mn.D.uc),mt=mn.yb;mt<mn.Hb;++mt){gn=mt,ur=Er;var Tn=(xn=(tn=mn).D).Nb;Vt=tn.R;var xn=xn.wa[xn.Y+gn],nr=tn.sa,Fr=tn.ta+16*Tn*Vt+16*gn,Ai=xn.dd,Sn=xn.tc;if(Sn!=0)if(e(3<=Sn),tn.L==1)0<gn&&Cs(nr,Fr,Vt,Sn+4),xn.La&&kr(nr,Fr,Vt,Sn),0<ur&&Oo(nr,Fr,Vt,Sn+4),xn.La&&bc(nr,Fr,Vt,Sn);else{var Zi=tn.B,Do=tn.qa,Ea=tn.ra+8*Tn*Zi+8*gn,Os=tn.Ha,tn=tn.Ia+8*Tn*Zi+8*gn;Tn=xn.ld,0<gn&&(vu(nr,Fr,Vt,Sn+4,Ai,Tn),Co(Do,Ea,Os,tn,Zi,Sn+4,Ai,Tn)),xn.La&&(Rs(nr,Fr,Vt,Sn,Ai,Tn),ba(Do,Ea,Os,tn,Zi,Sn,Ai,Tn)),0<ur&&(wa(nr,Fr,Vt,Sn+4,Ai,Tn),wc(Do,Ea,Os,tn,Zi,Sn+4,Ai,Tn)),xn.La&&(ko(nr,Fr,Vt,Sn,Ai,Tn),xo(Do,Ea,Os,tn,Zi,Sn,Ai,Tn))}}if(X.ia&&alert("todo:DitherRow"),Z.put!=null){if(mt=16*Ft,Ft=16*(Ft+1),Ar?(Z.y=X.sa,Z.O=X.ta+jt,Z.f=X.qa,Z.N=X.ra+lr,Z.ea=X.Ha,Z.W=X.Ia+lr):(mt-=bt,Z.y=De,Z.O=et,Z.f=Ue,Z.N=Ee,Z.ea=Rt,Z.W=Dt),Pt||(Ft-=bt),Ft>Z.o&&(Ft=Z.o),Z.F=null,Z.J=null,X.Fa!=null&&0<X.Fa.length&&mt<Ft&&(Z.J=Ns(X,Z,mt,Ft-mt),Z.F=X.mb,Z.F==null&&Z.F.length==0)){Ae=Gt(X,3,"Could not decode alpha data.");break e}mt<Z.j&&(bt=Z.j-mt,mt=Z.j,e(!(1&bt)),Z.O+=X.R*bt,Z.N+=X.B*(bt>>1),Z.W+=X.B*(bt>>1),Z.F!=null&&(Z.J+=Z.width*bt)),mt<Ft&&(Z.O+=Z.v,Z.N+=Z.v>>1,Z.W+=Z.v>>1,Z.F!=null&&(Z.J+=Z.v),Z.ka=mt-Z.j,Z.U=Z.va-Z.v,Z.T=Ft-mt,Ae=Z.put(Z))}ve+1!=X.Ic||Pt||(r(X.sa,X.ta-Ne,De,et+16*X.R,Ne),r(X.qa,X.ra-ze,Ue,Ee+8*X.B,ze),r(X.Ha,X.Ia-ze,Rt,Dt+8*X.B,ze))}if(!Ae)return Gt(re,6,"Output aborted.")}return 1}(c,h)),h.bc!=null&&h.bc(h),p&=1}return p?(c.cb=0,p):0}function or(c,h,p,_,S){S=c[h+p+32*_]+(S>>3),c[h+p+32*_]=-256&S?0>S?0:255:S}function fs(c,h,p,_,S,L){or(c,h,0,p,_+S),or(c,h,1,p,_+L),or(c,h,2,p,_-L),or(c,h,3,p,_-S)}function en(c){return(20091*c>>16)+c}function Zn(c,h,p,_){var S,L=0,R=s(16);for(S=0;4>S;++S){var D=c[h+0]+c[h+8],V=c[h+0]-c[h+8],q=(35468*c[h+4]>>16)-en(c[h+12]),Y=en(c[h+4])+(35468*c[h+12]>>16);R[L+0]=D+Y,R[L+1]=V+q,R[L+2]=V-q,R[L+3]=D-Y,L+=4,h++}for(S=L=0;4>S;++S)D=(c=R[L+0]+4)+R[L+8],V=c-R[L+8],q=(35468*R[L+4]>>16)-en(R[L+12]),or(p,_,0,0,D+(Y=en(R[L+4])+(35468*R[L+12]>>16))),or(p,_,1,0,V+q),or(p,_,2,0,V-q),or(p,_,3,0,D-Y),L++,_+=32}function Bi(c,h,p,_){var S=c[h+0]+4,L=35468*c[h+4]>>16,R=en(c[h+4]),D=35468*c[h+1]>>16;fs(p,_,0,S+R,c=en(c[h+1]),D),fs(p,_,1,S+L,c,D),fs(p,_,2,S-L,c,D),fs(p,_,3,S-R,c,D)}function ds(c,h,p,_,S){Zn(c,h,p,_),S&&Zn(c,h+16,p,_+4)}function bo(c,h,p,_){Qi(c,h+0,p,_,1),Qi(c,h+32,p,_+128,1)}function Ot(c,h,p,_){var S;for(c=c[h+0]+4,S=0;4>S;++S)for(h=0;4>h;++h)or(p,_,h,S,c)}function qi(c,h,p,_){c[h+0]&&tr(c,h+0,p,_),c[h+16]&&tr(c,h+16,p,_+4),c[h+32]&&tr(c,h+32,p,_+128),c[h+48]&&tr(c,h+48,p,_+128+4)}function zi(c,h,p,_){var S,L=s(16);for(S=0;4>S;++S){var R=c[h+0+S]+c[h+12+S],D=c[h+4+S]+c[h+8+S],V=c[h+4+S]-c[h+8+S],q=c[h+0+S]-c[h+12+S];L[0+S]=R+D,L[8+S]=R-D,L[4+S]=q+V,L[12+S]=q-V}for(S=0;4>S;++S)R=(c=L[0+4*S]+3)+L[3+4*S],D=L[1+4*S]+L[2+4*S],V=L[1+4*S]-L[2+4*S],q=c-L[3+4*S],p[_+0]=R+D>>3,p[_+16]=q+V>>3,p[_+32]=R-D>>3,p[_+48]=q-V>>3,_+=64}function jr(c,h,p){var _,S=h-32,L=br,R=255-c[S-1];for(_=0;_<p;++_){var D,V=L,q=R+c[h-1];for(D=0;D<p;++D)c[h+D]=V[q+c[S+D]];h+=32}}function fc(c,h){jr(c,h,4)}function ca(c,h){jr(c,h,8)}function dc(c,h){jr(c,h,16)}function Br(c,h){var p;for(p=0;16>p;++p)r(c,h+32*p,c,h-32,16)}function ps(c,h){var p;for(p=16;0<p;--p)i(c,h,c[h-1],16),h+=32}function gs(c,h,p){var _;for(_=0;16>_;++_)i(h,p+32*_,c,16)}function gi(c,h){var p,_=16;for(p=0;16>p;++p)_+=c[h-1+32*p]+c[h+p-32];gs(_>>5,c,h)}function Kt(c,h){var p,_=8;for(p=0;16>p;++p)_+=c[h-1+32*p];gs(_>>4,c,h)}function ua(c,h){var p,_=8;for(p=0;16>p;++p)_+=c[h+p-32];gs(_>>4,c,h)}function Ao(c,h){gs(128,c,h)}function ct(c,h,p){return c+2*h+p+2>>2}function mi(c,h){var p,_=h-32;for(_=new Uint8Array([ct(c[_-1],c[_+0],c[_+1]),ct(c[_+0],c[_+1],c[_+2]),ct(c[_+1],c[_+2],c[_+3]),ct(c[_+2],c[_+3],c[_+4])]),p=0;4>p;++p)r(c,h+32*p,_,0,_.length)}function pc(c,h){var p=c[h-1],_=c[h-1+32],S=c[h-1+64],L=c[h-1+96];ke(c,h+0,16843009*ct(c[h-1-32],p,_)),ke(c,h+32,16843009*ct(p,_,S)),ke(c,h+64,16843009*ct(_,S,L)),ke(c,h+96,16843009*ct(S,L,L))}function Lr(c,h){var p,_=4;for(p=0;4>p;++p)_+=c[h+p-32]+c[h-1+32*p];for(_>>=3,p=0;4>p;++p)i(c,h+32*p,_,4)}function la(c,h){var p=c[h-1+0],_=c[h-1+32],S=c[h-1+64],L=c[h-1-32],R=c[h+0-32],D=c[h+1-32],V=c[h+2-32],q=c[h+3-32];c[h+0+96]=ct(_,S,c[h-1+96]),c[h+1+96]=c[h+0+64]=ct(p,_,S),c[h+2+96]=c[h+1+64]=c[h+0+32]=ct(L,p,_),c[h+3+96]=c[h+2+64]=c[h+1+32]=c[h+0+0]=ct(R,L,p),c[h+3+64]=c[h+2+32]=c[h+1+0]=ct(D,R,L),c[h+3+32]=c[h+2+0]=ct(V,D,R),c[h+3+0]=ct(q,V,D)}function yr(c,h){var p=c[h+1-32],_=c[h+2-32],S=c[h+3-32],L=c[h+4-32],R=c[h+5-32],D=c[h+6-32],V=c[h+7-32];c[h+0+0]=ct(c[h+0-32],p,_),c[h+1+0]=c[h+0+32]=ct(p,_,S),c[h+2+0]=c[h+1+32]=c[h+0+64]=ct(_,S,L),c[h+3+0]=c[h+2+32]=c[h+1+64]=c[h+0+96]=ct(S,L,R),c[h+3+32]=c[h+2+64]=c[h+1+96]=ct(L,R,D),c[h+3+64]=c[h+2+96]=ct(R,D,V),c[h+3+96]=ct(D,V,V)}function ms(c,h){var p=c[h-1+0],_=c[h-1+32],S=c[h-1+64],L=c[h-1-32],R=c[h+0-32],D=c[h+1-32],V=c[h+2-32],q=c[h+3-32];c[h+0+0]=c[h+1+64]=L+R+1>>1,c[h+1+0]=c[h+2+64]=R+D+1>>1,c[h+2+0]=c[h+3+64]=D+V+1>>1,c[h+3+0]=V+q+1>>1,c[h+0+96]=ct(S,_,p),c[h+0+64]=ct(_,p,L),c[h+0+32]=c[h+1+96]=ct(p,L,R),c[h+1+32]=c[h+2+96]=ct(L,R,D),c[h+2+32]=c[h+3+96]=ct(R,D,V),c[h+3+32]=ct(D,V,q)}function Eo(c,h){var p=c[h+0-32],_=c[h+1-32],S=c[h+2-32],L=c[h+3-32],R=c[h+4-32],D=c[h+5-32],V=c[h+6-32],q=c[h+7-32];c[h+0+0]=p+_+1>>1,c[h+1+0]=c[h+0+64]=_+S+1>>1,c[h+2+0]=c[h+1+64]=S+L+1>>1,c[h+3+0]=c[h+2+64]=L+R+1>>1,c[h+0+32]=ct(p,_,S),c[h+1+32]=c[h+0+96]=ct(_,S,L),c[h+2+32]=c[h+1+96]=ct(S,L,R),c[h+3+32]=c[h+2+96]=ct(L,R,D),c[h+3+64]=ct(R,D,V),c[h+3+96]=ct(D,V,q)}function vs(c,h){var p=c[h-1+0],_=c[h-1+32],S=c[h-1+64],L=c[h-1+96];c[h+0+0]=p+_+1>>1,c[h+2+0]=c[h+0+32]=_+S+1>>1,c[h+2+32]=c[h+0+64]=S+L+1>>1,c[h+1+0]=ct(p,_,S),c[h+3+0]=c[h+1+32]=ct(_,S,L),c[h+3+32]=c[h+1+64]=ct(S,L,L),c[h+3+64]=c[h+2+64]=c[h+0+96]=c[h+1+96]=c[h+2+96]=c[h+3+96]=L}function ys(c,h){var p=c[h-1+0],_=c[h-1+32],S=c[h-1+64],L=c[h-1+96],R=c[h-1-32],D=c[h+0-32],V=c[h+1-32],q=c[h+2-32];c[h+0+0]=c[h+2+32]=p+R+1>>1,c[h+0+32]=c[h+2+64]=_+p+1>>1,c[h+0+64]=c[h+2+96]=S+_+1>>1,c[h+0+96]=L+S+1>>1,c[h+3+0]=ct(D,V,q),c[h+2+0]=ct(R,D,V),c[h+1+0]=c[h+3+32]=ct(p,R,D),c[h+1+32]=c[h+3+64]=ct(_,p,R),c[h+1+64]=c[h+3+96]=ct(S,_,p),c[h+1+96]=ct(L,S,_)}function ha(c,h){var p;for(p=0;8>p;++p)r(c,h+32*p,c,h-32,8)}function qr(c,h){var p;for(p=0;8>p;++p)i(c,h,c[h-1],8),h+=32}function _r(c,h,p){var _;for(_=0;8>_;++_)i(h,p+32*_,c,8)}function zr(c,h){var p,_=8;for(p=0;8>p;++p)_+=c[h+p-32]+c[h-1+32*p];_r(_>>4,c,h)}function Io(c,h){var p,_=4;for(p=0;8>p;++p)_+=c[h+p-32];_r(_>>3,c,h)}function Ct(c,h){var p,_=4;for(p=0;8>p;++p)_+=c[h-1+32*p];_r(_>>3,c,h)}function To(c,h){_r(128,c,h)}function _s(c,h,p){var _=c[h-p],S=c[h+0],L=3*(S-_)+bh[1020+c[h-2*p]-c[h+p]],R=_u[112+(L+4>>3)];c[h-p]=br[255+_+_u[112+(L+3>>3)]],c[h+0]=br[255+S-R]}function So(c,h,p,_){var S=c[h+0],L=c[h+p];return Or[255+c[h-2*p]-c[h-p]]>_||Or[255+L-S]>_}function No(c,h,p,_){return 4*Or[255+c[h-p]-c[h+0]]+Or[255+c[h-2*p]-c[h+p]]<=_}function Po(c,h,p,_,S){var L=c[h-3*p],R=c[h-2*p],D=c[h-p],V=c[h+0],q=c[h+p],Y=c[h+2*p],oe=c[h+3*p];return 4*Or[255+D-V]+Or[255+R-q]>_?0:Or[255+c[h-4*p]-L]<=S&&Or[255+L-R]<=S&&Or[255+R-D]<=S&&Or[255+oe-Y]<=S&&Or[255+Y-q]<=S&&Or[255+q-V]<=S}function $i(c,h,p,_){var S=2*_+1;for(_=0;16>_;++_)No(c,h+_,p,S)&&_s(c,h+_,p)}function wr(c,h,p,_){var S=2*_+1;for(_=0;16>_;++_)No(c,h+_*p,1,S)&&_s(c,h+_*p,1)}function wn(c,h,p,_){var S;for(S=3;0<S;--S)$i(c,h+=4*p,p,_)}function fa(c,h,p,_){var S;for(S=3;0<S;--S)wr(c,h+=4,p,_)}function vi(c,h,p,_,S,L,R,D){for(L=2*L+1;0<S--;){if(Po(c,h,p,L,R))if(So(c,h,p,D))_s(c,h,p);else{var V=c,q=h,Y=p,oe=V[q-2*Y],ae=V[q-Y],re=V[q+0],Ie=V[q+Y],ve=V[q+2*Y],X=27*(Ae=bh[1020+3*(re-ae)+bh[1020+oe-Ie]])+63>>7,Z=18*Ae+63>>7,Ae=9*Ae+63>>7;V[q-3*Y]=br[255+V[q-3*Y]+Ae],V[q-2*Y]=br[255+oe+Z],V[q-Y]=br[255+ae+X],V[q+0]=br[255+re-X],V[q+Y]=br[255+Ie-Z],V[q+2*Y]=br[255+ve-Ae]}h+=_}}function Rn(c,h,p,_,S,L,R,D){for(L=2*L+1;0<S--;){if(Po(c,h,p,L,R))if(So(c,h,p,D))_s(c,h,p);else{var V=c,q=h,Y=p,oe=V[q-Y],ae=V[q+0],re=V[q+Y],Ie=_u[112+((ve=3*(ae-oe))+4>>3)],ve=_u[112+(ve+3>>3)],X=Ie+1>>1;V[q-2*Y]=br[255+V[q-2*Y]+X],V[q-Y]=br[255+oe+ve],V[q+0]=br[255+ae-Ie],V[q+Y]=br[255+re-X]}h+=_}}function ws(c,h,p,_,S,L){vi(c,h,p,1,16,_,S,L)}function $r(c,h,p,_,S,L){vi(c,h,1,p,16,_,S,L)}function bs(c,h,p,_,S,L){var R;for(R=3;0<R;--R)Rn(c,h+=4*p,p,1,16,_,S,L)}function Hi(c,h,p,_,S,L){var R;for(R=3;0<R;--R)Rn(c,h+=4,1,p,16,_,S,L)}function As(c,h,p,_,S,L,R,D){vi(c,h,S,1,8,L,R,D),vi(p,_,S,1,8,L,R,D)}function Lo(c,h,p,_,S,L,R,D){vi(c,h,1,S,8,L,R,D),vi(p,_,1,S,8,L,R,D)}function Es(c,h,p,_,S,L,R,D){Rn(c,h+4*S,S,1,8,L,R,D),Rn(p,_+4*S,S,1,8,L,R,D)}function yi(c,h,p,_,S,L,R,D){Rn(c,h+4,1,S,8,L,R,D),Rn(p,_+4,1,S,8,L,R,D)}function Wi(){this.ba=new Ln,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new zt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Is(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Gi(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ts(){this.ua=0,this.Wa=new H,this.vb=new H,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new G,this.yc=new E}function da(){this.xb=this.a=0,this.l=new ji,this.ca=new Ln,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new C,this.Pb=0,this.wd=new C,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ts,this.ab=0,this.gc=o(4,Gi),this.Oc=0}function Hr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ji,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function _i(c,h,p,_,S,L,R){for(c=c==null?0:c[h+0],h=0;h<R;++h)S[L+h]=c+p[_+h]&255,c=S[L+h]}function Ss(c,h,p,_,S,L,R){var D;if(c==null)_i(null,null,p,_,S,L,R);else for(D=0;D<R;++D)S[L+D]=c[h+D]+p[_+D]&255}function jn(c,h,p,_,S,L,R){if(c==null)_i(null,null,p,_,S,L,R);else{var D,V=c[h+0],q=V,Y=V;for(D=0;D<R;++D)q=Y+(V=c[h+D])-q,Y=p[_+D]+(-256&q?0>q?0:255:q)&255,q=V,S[L+D]=Y}}function Ns(c,h,p,_){var S=h.width,L=h.o;if(e(c!=null&&h!=null),0>p||0>=_||p+_>L)return null;if(!c.Cc){if(c.ga==null){var R;if(c.ga=new Hr,(R=c.ga==null)||(R=h.width*h.o,e(c.Gb.length==0),c.Gb=s(R),c.Uc=0,c.Gb==null?R=0:(c.mb=c.Gb,c.nb=c.Uc,c.rc=null,R=1),R=!R),!R){R=c.ga;var D=c.Fa,V=c.P,q=c.qc,Y=c.mb,oe=c.nb,ae=V+1,re=q-1,Ie=R.l;if(e(D!=null&&Y!=null&&h!=null),xs[0]=null,xs[1]=_i,xs[2]=Ss,xs[3]=jn,R.ca=Y,R.tb=oe,R.c=h.width,R.i=h.height,e(0<R.c&&0<R.i),1>=q)h=0;else if(R.$a=D[V+0]>>0&3,R.Z=D[V+0]>>2&3,R.Lc=D[V+0]>>4&3,V=D[V+0]>>6&3,0>R.$a||1<R.$a||4<=R.Z||1<R.Lc||V)h=0;else if(Ie.put=Mn,Ie.ac=fn,Ie.bc=mr,Ie.ma=R,Ie.width=h.width,Ie.height=h.height,Ie.Da=h.Da,Ie.v=h.v,Ie.va=h.va,Ie.j=h.j,Ie.o=h.o,R.$a)e:{e(R.$a==1),h=sn();t:for(;;){if(h==null){h=0;break e}if(e(R!=null),R.mc=h,h.c=R.c,h.i=R.i,h.l=R.l,h.l.ma=R,h.l.width=R.c,h.l.height=R.i,h.a=0,se(h.m,D,ae,re),!vr(R.c,R.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&Vr(h.s)?(R.ic=1,D=h.c*h.i,h.Ta=null,h.Ua=0,h.V=s(D),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):(R.ic=0,h=li(h,R.c)),!h))break t;h=1;break e}R.mc=null,h=0}else h=re>=R.c*R.i;R=!h}if(R)return null;c.ga.Lc!=1?c.Ga=0:_=L-p}e(c.ga!=null),e(p+_<=L);e:{if(h=(D=c.ga).c,L=D.l.o,D.$a==0){if(ae=c.rc,re=c.Vc,Ie=c.Fa,V=c.P+1+p*h,q=c.mb,Y=c.nb+p*h,e(V<=c.P+c.qc),D.Z!=0)for(e(xs[D.Z]!=null),R=0;R<_;++R)xs[D.Z](ae,re,Ie,V,q,Y,h),ae=q,re=Y,Y+=h,V+=h;else for(R=0;R<_;++R)r(q,Y,Ie,V,h),ae=q,re=Y,Y+=h,V+=h;c.rc=ae,c.Vc=re}else{if(e(D.mc!=null),h=p+_,e((R=D.mc)!=null),e(h<=R.i),R.C>=h)h=1;else if(D.ic||te(),D.ic){D=R.V,ae=R.Ba,re=R.c;var ve=R.i,X=(Ie=1,V=R.$/re,q=R.$%re,Y=R.m,oe=R.s,R.$),Z=re*ve,Ae=re*h,Ne=oe.wc,Ee=X<Ae?Zt(oe,q,V):null;e(X<=Z),e(h<=ve),e(Vr(oe));t:for(;;){for(;!Y.h&&X<Ae;){if(q&Ne||(Ee=Zt(oe,q,V)),e(Ee!=null),ne(Y),256>(ve=dn(Ee.G[0],Ee.H[0],Y)))D[ae+X]=ve,++X,++q>=re&&(q=0,++V<=h&&!(V%16)&&sr(R,V));else{if(!(280>ve)){Ie=0;break t}ve=ir(ve-256,Y);var ze,De=dn(Ee.G[4],Ee.H[4],Y);if(ne(Y),!(X>=(De=Vn(re,De=ir(De,Y)))&&Z-X>=ve)){Ie=0;break t}for(ze=0;ze<ve;++ze)D[ae+X+ze]=D[ae+X+ze-De];for(X+=ve,q+=ve;q>=re;)q-=re,++V<=h&&!(V%16)&&sr(R,V);X<Ae&&q&Ne&&(Ee=Zt(oe,q,V))}e(Y.h==W(Y))}sr(R,V>h?h:V);break t}!Ie||Y.h&&X<Z?(Ie=0,R.a=Y.h?5:3):R.$=X,h=Ie}else h=Yn(R,R.V,R.Ba,R.c,R.i,h,hi);if(!h){_=0;break e}}p+_>=L&&(c.Cc=1),_=1}if(!_)return null;if(c.Cc&&((_=c.ga)!=null&&(_.mc=null),c.ga=null,0<c.Ga))return alert("todo:WebPDequantizeLevels"),null}return c.nb+p*S}function d(c,h,p,_,S,L){for(;0<S--;){var R,D=c,V=h+(p?1:0),q=c,Y=h+(p?0:3);for(R=0;R<_;++R){var oe=q[Y+4*R];oe!=255&&(oe*=32897,D[V+4*R+0]=D[V+4*R+0]*oe>>23,D[V+4*R+1]=D[V+4*R+1]*oe>>23,D[V+4*R+2]=D[V+4*R+2]*oe>>23)}h+=L}}function T(c,h,p,_,S){for(;0<_--;){var L;for(L=0;L<p;++L){var R=c[h+2*L+0],D=15&(q=c[h+2*L+1]),V=4369*D,q=(240&q|q>>4)*V>>16;c[h+2*L+0]=(240&R|R>>4)*V>>16&240|(15&R|R<<4)*V>>16>>4&15,c[h+2*L+1]=240&q|D}h+=S}}function $(c,h,p,_,S,L,R,D){var V,q,Y=255;for(q=0;q<S;++q){for(V=0;V<_;++V){var oe=c[h+V];L[R+4*V]=oe,Y&=oe}h+=p,R+=D}return Y!=255}function J(c,h,p,_,S){var L;for(L=0;L<S;++L)p[_+L]=c[h+L]>>8}function te(){xr=d,$t=T,Ht=$,an=J}function ye(c,h,p){I[c]=function(_,S,L,R,D,V,q,Y,oe,ae,re,Ie,ve,X,Z,Ae,Ne){var Ee,ze=Ne-1>>1,De=D[V+0]|q[Y+0]<<16,et=oe[ae+0]|re[Ie+0]<<16;e(_!=null);var Ue=3*De+et+131074>>2;for(h(_[S+0],255&Ue,Ue>>16,ve,X),L!=null&&(Ue=3*et+De+131074>>2,h(L[R+0],255&Ue,Ue>>16,Z,Ae)),Ee=1;Ee<=ze;++Ee){var Rt=D[V+Ee]|q[Y+Ee]<<16,Dt=oe[ae+Ee]|re[Ie+Ee]<<16,Pt=De+Rt+et+Dt+524296,bt=Pt+2*(Rt+et)>>3;Ue=bt+De>>1,De=(Pt=Pt+2*(De+Dt)>>3)+Rt>>1,h(_[S+2*Ee-1],255&Ue,Ue>>16,ve,X+(2*Ee-1)*p),h(_[S+2*Ee-0],255&De,De>>16,ve,X+(2*Ee-0)*p),L!=null&&(Ue=Pt+et>>1,De=bt+Dt>>1,h(L[R+2*Ee-1],255&Ue,Ue>>16,Z,Ae+(2*Ee-1)*p),h(L[R+2*Ee+0],255&De,De>>16,Z,Ae+(2*Ee+0)*p)),De=Rt,et=Dt}1&Ne||(Ue=3*De+et+131074>>2,h(_[S+Ne-1],255&Ue,Ue>>16,ve,X+(Ne-1)*p),L!=null&&(Ue=3*et+De+131074>>2,h(L[R+Ne-1],255&Ue,Ue>>16,Z,Ae+(Ne-1)*p)))}}function Pe(){Dr[wu]=Tv,Dr[bu]=bp,Dr[mp]=Sv,Dr[Au]=Ap,Dr[Eu]=Ep,Dr[Ah]=Ip,Dr[vp]=Nv,Dr[Eh]=bp,Dr[Ih]=Ap,Dr[Iu]=Ep,Dr[Th]=Ip}function Me(c){return c&-16384?0>c?0:255:c>>Pv}function u(c,h){return Me((19077*c>>8)+(26149*h>>8)-14234)}function m(c,h,p){return Me((19077*c>>8)-(6419*h>>8)-(13320*p>>8)+8708)}function w(c,h){return Me((19077*c>>8)+(33050*h>>8)-17685)}function O(c,h,p,_,S){_[S+0]=u(c,p),_[S+1]=m(c,h,p),_[S+2]=w(c,h)}function ee(c,h,p,_,S){_[S+0]=w(c,h),_[S+1]=m(c,h,p),_[S+2]=u(c,p)}function ce(c,h,p,_,S){var L=m(c,h,p);h=L<<3&224|w(c,h)>>3,_[S+0]=248&u(c,p)|L>>5,_[S+1]=h}function Le(c,h,p,_,S){var L=240&w(c,h)|15;_[S+0]=240&u(c,p)|m(c,h,p)>>4,_[S+1]=L}function ft(c,h,p,_,S){_[S+0]=255,O(c,h,p,_,S+1)}function wt(c,h,p,_,S){ee(c,h,p,_,S),_[S+3]=255}function dt(c,h,p,_,S){O(c,h,p,_,S),_[S+3]=255}function kt(c,h){return 0>c?0:c>h?h:c}function Ut(c,h,p){I[c]=function(_,S,L,R,D,V,q,Y,oe){for(var ae=Y+(-2&oe)*p;Y!=ae;)h(_[S+0],L[R+0],D[V+0],q,Y),h(_[S+1],L[R+0],D[V+0],q,Y+p),S+=2,++R,++V,Y+=2*p;1&oe&&h(_[S+0],L[R+0],D[V+0],q,Y)}}function Wr(c,h,p){return p==0?c==0?h==0?6:5:h==0?4:0:p}function Cn(c,h,p,_,S){switch(c>>>30){case 3:Qi(h,p,_,S,0);break;case 2:on(h,p,_,S);break;case 1:tr(h,p,_,S)}}function wi(c,h){var p,_,S=h.M,L=h.Nb,R=c.oc,D=c.pc+40,V=c.oc,q=c.pc+584,Y=c.oc,oe=c.pc+600;for(p=0;16>p;++p)R[D+32*p-1]=129;for(p=0;8>p;++p)V[q+32*p-1]=129,Y[oe+32*p-1]=129;for(0<S?R[D-1-32]=V[q-1-32]=Y[oe-1-32]=129:(i(R,D-32-1,127,21),i(V,q-32-1,127,9),i(Y,oe-32-1,127,9)),_=0;_<c.za;++_){var ae=h.ya[h.aa+_];if(0<_){for(p=-1;16>p;++p)r(R,D+32*p-4,R,D+32*p+12,4);for(p=-1;8>p;++p)r(V,q+32*p-4,V,q+32*p+4,4),r(Y,oe+32*p-4,Y,oe+32*p+4,4)}var re=c.Gd,Ie=c.Hd+_,ve=ae.ad,X=ae.Hc;if(0<S&&(r(R,D-32,re[Ie].y,0,16),r(V,q-32,re[Ie].f,0,8),r(Y,oe-32,re[Ie].ea,0,8)),ae.Za){var Z=R,Ae=D-32+16;for(0<S&&(_>=c.za-1?i(Z,Ae,re[Ie].y[15],4):r(Z,Ae,re[Ie+1].y,0,4)),p=0;4>p;p++)Z[Ae+128+p]=Z[Ae+256+p]=Z[Ae+384+p]=Z[Ae+0+p];for(p=0;16>p;++p,X<<=2)Z=R,Ae=D+Sp[p],Gr[ae.Ob[p]](Z,Ae),Cn(X,ve,16*+p,Z,Ae)}else if(Z=Wr(_,S,ae.Ob[0]),ks[Z](R,D),X!=0)for(p=0;16>p;++p,X<<=2)Cn(X,ve,16*+p,R,D+Sp[p]);for(p=ae.Gc,Z=Wr(_,S,ae.Dd),Xi[Z](V,q),Xi[Z](Y,oe),X=ve,Z=V,Ae=q,255&(ae=p>>0)&&(170&ae?_c(X,256,Z,Ae):Cr(X,256,Z,Ae)),ae=Y,X=oe,255&(p>>=8)&&(170&p?_c(ve,320,ae,X):Cr(ve,320,ae,X)),S<c.Ub-1&&(r(re[Ie].y,0,R,D+480,16),r(re[Ie].f,0,V,q+224,8),r(re[Ie].ea,0,Y,oe+224,8)),p=8*L*c.B,re=c.sa,Ie=c.ta+16*_+16*L*c.R,ve=c.qa,ae=c.ra+8*_+p,X=c.Ha,Z=c.Ia+8*_+p,p=0;16>p;++p)r(re,Ie+p*c.R,R,D+32*p,16);for(p=0;8>p;++p)r(ve,ae+p*c.B,V,q+32*p,8),r(X,Z+p*c.B,Y,oe+32*p,8)}}function bi(c,h,p,_,S,L,R,D,V){var q=[0],Y=[0],oe=0,ae=V!=null?V.kd:0,re=V??new Is;if(c==null||12>p)return 7;re.data=c,re.w=h,re.ha=p,h=[h],p=[p],re.gb=[re.gb];e:{var Ie=h,ve=p,X=re.gb;if(e(c!=null),e(ve!=null),e(X!=null),X[0]=0,12<=ve[0]&&!t(c,Ie[0],"RIFF")){if(t(c,Ie[0]+8,"WEBP")){X=3;break e}var Z=Oe(c,Ie[0]+4);if(12>Z||4294967286<Z){X=3;break e}if(ae&&Z>ve[0]-8){X=7;break e}X[0]=Z,Ie[0]+=12,ve[0]-=12}X=0}if(X!=0)return X;for(Z=0<re.gb[0],p=p[0];;){e:{var Ae=c;ve=h,X=p;var Ne=q,Ee=Y,ze=Ie=[0];if((Ue=oe=[oe])[0]=0,8>X[0])X=7;else{if(!t(Ae,ve[0],"VP8X")){if(Oe(Ae,ve[0]+4)!=10){X=3;break e}if(18>X[0]){X=7;break e}var De=Oe(Ae,ve[0]+8),et=1+Fe(Ae,ve[0]+12);if(2147483648<=et*(Ae=1+Fe(Ae,ve[0]+15))){X=3;break e}ze!=null&&(ze[0]=De),Ne!=null&&(Ne[0]=et),Ee!=null&&(Ee[0]=Ae),ve[0]+=18,X[0]-=18,Ue[0]=1}X=0}}if(oe=oe[0],Ie=Ie[0],X!=0)return X;if(ve=!!(2&Ie),!Z&&oe)return 3;if(L!=null&&(L[0]=!!(16&Ie)),R!=null&&(R[0]=ve),D!=null&&(D[0]=0),R=q[0],Ie=Y[0],oe&&ve&&V==null){X=0;break}if(4>p){X=7;break}if(Z&&oe||!Z&&!oe&&!t(c,h[0],"ALPH")){p=[p],re.na=[re.na],re.P=[re.P],re.Sa=[re.Sa];e:{De=c,X=h,Z=p;var Ue=re.gb;Ne=re.na,Ee=re.P,ze=re.Sa,et=22,e(De!=null),e(Z!=null),Ae=X[0];var Rt=Z[0];for(e(Ne!=null),e(ze!=null),Ne[0]=null,Ee[0]=null,ze[0]=0;;){if(X[0]=Ae,Z[0]=Rt,8>Rt){X=7;break e}var Dt=Oe(De,Ae+4);if(4294967286<Dt){X=3;break e}var Pt=8+Dt+1&-2;if(et+=Pt,0<Ue&&et>Ue){X=3;break e}if(!t(De,Ae,"VP8 ")||!t(De,Ae,"VP8L")){X=0;break e}if(Rt[0]<Pt){X=7;break e}t(De,Ae,"ALPH")||(Ne[0]=De,Ee[0]=Ae+8,ze[0]=Dt),Ae+=Pt,Rt-=Pt}}if(p=p[0],re.na=re.na[0],re.P=re.P[0],re.Sa=re.Sa[0],X!=0)break}p=[p],re.Ja=[re.Ja],re.xa=[re.xa];e:if(Ue=c,X=h,Z=p,Ne=re.gb[0],Ee=re.Ja,ze=re.xa,De=X[0],Ae=!t(Ue,De,"VP8 "),et=!t(Ue,De,"VP8L"),e(Ue!=null),e(Z!=null),e(Ee!=null),e(ze!=null),8>Z[0])X=7;else{if(Ae||et){if(Ue=Oe(Ue,De+4),12<=Ne&&Ue>Ne-12){X=3;break e}if(ae&&Ue>Z[0]-8){X=7;break e}Ee[0]=Ue,X[0]+=8,Z[0]-=8,ze[0]=et}else ze[0]=5<=Z[0]&&Ue[De+0]==47&&!(Ue[De+4]>>5),Ee[0]=Z[0];X=0}if(p=p[0],re.Ja=re.Ja[0],re.xa=re.xa[0],h=h[0],X!=0)break;if(4294967286<re.Ja)return 3;if(D==null||ve||(D[0]=re.xa?2:1),R=[R],Ie=[Ie],re.xa){if(5>p){X=7;break}D=R,ae=Ie,ve=L,c==null||5>p?c=0:5<=p&&c[h+0]==47&&!(c[h+4]>>5)?(Z=[0],Ue=[0],Ne=[0],se(Ee=new C,c,h,p),He(Ee,Z,Ue,Ne)?(D!=null&&(D[0]=Z[0]),ae!=null&&(ae[0]=Ue[0]),ve!=null&&(ve[0]=Ne[0]),c=1):c=0):c=0}else{if(10>p){X=7;break}D=Ie,c==null||10>p||!yo(c,h+3,p-3)?c=0:(ae=c[h+0]|c[h+1]<<8|c[h+2]<<16,ve=16383&(c[h+7]<<8|c[h+6]),c=16383&(c[h+9]<<8|c[h+8]),1&ae||3<(ae>>1&7)||!(ae>>4&1)||ae>>5>=re.Ja||!ve||!c?c=0:(R&&(R[0]=ve),D&&(D[0]=c),c=1))}if(!c||(R=R[0],Ie=Ie[0],oe&&(q[0]!=R||Y[0]!=Ie)))return 3;V!=null&&(V[0]=re,V.offset=h-V.w,e(4294967286>h-V.w),e(V.offset==V.ha-p));break}return X==0||X==7&&oe&&V==null?(L!=null&&(L[0]|=re.na!=null&&0<re.na.length),_!=null&&(_[0]=R),S!=null&&(S[0]=Ie),0):X}function gc(c,h,p){var _=h.width,S=h.height,L=0,R=0,D=_,V=S;if(h.Da=c!=null&&0<c.Da,h.Da&&(D=c.cd,V=c.bd,L=c.v,R=c.j,11>p||(L&=-2,R&=-2),0>L||0>R||0>=D||0>=V||L+D>_||R+V>S))return 0;if(h.v=L,h.j=R,h.va=L+D,h.o=R+V,h.U=D,h.T=V,h.da=c!=null&&0<c.da,h.da){if(!ut(D,V,p=[c.ib],L=[c.hb]))return 0;h.ib=p[0],h.hb=L[0]}return h.ob=c!=null&&c.ob,h.Kb=c==null||!c.Sd,h.da&&(h.ob=h.ib<3*_/4&&h.hb<3*S/4,h.Kb=0),1}function mc(c){if(c==null)return 2;if(11>c.S){var h=c.f.RGBA;h.fb+=(c.height-1)*h.A,h.A=-h.A}else h=c.f.kb,c=c.height,h.O+=(c-1)*h.fa,h.fa=-h.fa,h.N+=(c-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(c-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(c-1)*h.lb,h.lb=-h.lb);return 0}function pa(c,h,p,_){if(_==null||0>=c||0>=h)return 2;if(p!=null){if(p.Da){var S=p.cd,L=p.bd,R=-2&p.v,D=-2&p.j;if(0>R||0>D||0>=S||0>=L||R+S>c||D+L>h)return 2;c=S,h=L}if(p.da){if(!ut(c,h,S=[p.ib],L=[p.hb]))return 2;c=S[0],h=L[0]}}_.width=c,_.height=h;e:{var V=_.width,q=_.height;if(c=_.S,0>=V||0>=q||!(c>=wu&&13>c))c=2;else{if(0>=_.Rd&&_.sd==null){R=L=S=h=0;var Y=(D=V*Np[c])*q;if(11>c||(L=(q+1)/2*(h=(V+1)/2),c==12&&(R=(S=V)*q)),(q=s(Y+2*L+R))==null){c=1;break e}_.sd=q,11>c?((V=_.f.RGBA).eb=q,V.fb=0,V.A=D,V.size=Y):((V=_.f.kb).y=q,V.O=0,V.fa=D,V.Fd=Y,V.f=q,V.N=0+Y,V.Ab=h,V.Cd=L,V.ea=q,V.W=0+Y+L,V.Db=h,V.Ed=L,c==12&&(V.F=q,V.J=0+Y+2*L),V.Tc=R,V.lb=S)}if(h=1,S=_.S,L=_.width,R=_.height,S>=wu&&13>S)if(11>S)c=_.f.RGBA,h&=(D=Math.abs(c.A))*(R-1)+L<=c.size,h&=D>=L*Np[S],h&=c.eb!=null;else{c=_.f.kb,D=(L+1)/2,Y=(R+1)/2,V=Math.abs(c.fa),q=Math.abs(c.Ab);var oe=Math.abs(c.Db),ae=Math.abs(c.lb),re=ae*(R-1)+L;h&=V*(R-1)+L<=c.Fd,h&=q*(Y-1)+D<=c.Cd,h=(h&=oe*(Y-1)+D<=c.Ed)&V>=L&q>=D&oe>=D,h&=c.y!=null,h&=c.f!=null,h&=c.ea!=null,S==12&&(h&=ae>=L,h&=re<=c.Tc,h&=c.F!=null)}else h=0;c=h?0:2}}return c!=0||p!=null&&p.fd&&(c=mc(_)),c}var kn=64,ga=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ma=24,va=32,vc=8,ar=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];xe("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(c){return c},I.Predictor2=function(c,h,p){return h[p+0]},I.Predictor3=function(c,h,p){return h[p+1]},I.Predictor4=function(c,h,p){return h[p-1]},I.Predictor5=function(c,h,p){return Ve(Ve(c,h[p+1]),h[p+0])},I.Predictor6=function(c,h,p){return Ve(c,h[p-1])},I.Predictor7=function(c,h,p){return Ve(c,h[p+0])},I.Predictor8=function(c,h,p){return Ve(h[p-1],h[p+0])},I.Predictor9=function(c,h,p){return Ve(h[p+0],h[p+1])},I.Predictor10=function(c,h,p){return Ve(Ve(c,h[p-1]),Ve(h[p+0],h[p+1]))},I.Predictor11=function(c,h,p){var _=h[p+0];return 0>=ht(_>>24&255,c>>24&255,(h=h[p-1])>>24&255)+ht(_>>16&255,c>>16&255,h>>16&255)+ht(_>>8&255,c>>8&255,h>>8&255)+ht(255&_,255&c,255&h)?_:c},I.Predictor12=function(c,h,p){var _=h[p+0];return(Je((c>>24&255)+(_>>24&255)-((h=h[p-1])>>24&255))<<24|Je((c>>16&255)+(_>>16&255)-(h>>16&255))<<16|Je((c>>8&255)+(_>>8&255)-(h>>8&255))<<8|Je((255&c)+(255&_)-(255&h)))>>>0},I.Predictor13=function(c,h,p){var _=h[p-1];return(at((c=Ve(c,h[p+0]))>>24&255,_>>24&255)<<24|at(c>>16&255,_>>16&255)<<16|at(c>>8&255,_>>8&255)<<8|at(c>>0&255,_>>0&255))>>>0};var wh=I.PredictorAdd0;I.PredictorAdd1=Qe,xe("Predictor2","PredictorAdd2"),xe("Predictor3","PredictorAdd3"),xe("Predictor4","PredictorAdd4"),xe("Predictor5","PredictorAdd5"),xe("Predictor6","PredictorAdd6"),xe("Predictor7","PredictorAdd7"),xe("Predictor8","PredictorAdd8"),xe("Predictor9","PredictorAdd9"),xe("Predictor10","PredictorAdd10"),xe("Predictor11","PredictorAdd11"),xe("Predictor12","PredictorAdd12"),xe("Predictor13","PredictorAdd13");var yc=I.PredictorAdd2;vt("ColorIndexInverseTransform","MapARGB","32b",function(c){return c>>8&255},function(c){return c}),vt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(c){return c},function(c){return c>>8&255});var pu,Rr=I.ColorIndexInverseTransform,ya=I.MapARGB,gu=I.VP8LColorIndexInverseTransformAlpha,mu=I.MapAlpha,Ps=I.VP8LPredictorsAdd=[];Ps.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var Ro,cr,er,Ls,Ki,Ji,_a,Qi,on,_c,tr,Cr,wa,vu,wc,Co,ko,Rs,xo,ba,Oo,Cs,bc,kr,xr,$t,Ht,an,bn=s(511),Yi=s(2041),Ac=s(225),Aa=s(767),yu=0,bh=Yi,_u=Ac,br=Aa,Or=bn,wu=0,bu=1,mp=2,Au=3,Eu=4,Ah=5,vp=6,Eh=7,Ih=8,Iu=9,Th=10,hv=[2,3,7],fv=[3,3,11],yp=[280,256,256,256,40],dv=[0,1,1,1,0],pv=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],gv=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],mv=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],vv=8,Sh=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Nh=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ec=null,yv=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],_v=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],_p=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],wv=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],bv=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Av=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ev=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ks=[],Gr=[],Xi=[],Iv=1,wp=2,xs=[],Dr=[];ye("UpsampleRgbLinePair",O,3),ye("UpsampleBgrLinePair",ee,3),ye("UpsampleRgbaLinePair",dt,4),ye("UpsampleBgraLinePair",wt,4),ye("UpsampleArgbLinePair",ft,4),ye("UpsampleRgba4444LinePair",Le,2),ye("UpsampleRgb565LinePair",ce,2);var Tv=I.UpsampleRgbLinePair,Sv=I.UpsampleBgrLinePair,bp=I.UpsampleRgbaLinePair,Ap=I.UpsampleBgraLinePair,Ep=I.UpsampleArgbLinePair,Ip=I.UpsampleRgba4444LinePair,Nv=I.UpsampleRgb565LinePair,Tu=16,Su=1<<Tu-1,Ic=-227,Ph=482,Pv=6,Tp=0,Lv=s(256),Rv=s(256),Cv=s(256),kv=s(256),xv=s(Ph-Ic),Ov=s(Ph-Ic);Ut("YuvToRgbRow",O,3),Ut("YuvToBgrRow",ee,3),Ut("YuvToRgbaRow",dt,4),Ut("YuvToBgraRow",wt,4),Ut("YuvToArgbRow",ft,4),Ut("YuvToRgba4444Row",Le,2),Ut("YuvToRgb565Row",ce,2);var Sp=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Nu=[0,2,8],Dv=[8,7,6,4,4,2,2,2,1,1,1,1],Fv=1;this.WebPDecodeRGBA=function(c,h,p,_,S){var L=bu,R=new Wi,D=new Ln;R.ba=D,D.S=L,D.width=[D.width],D.height=[D.height];var V=D.width,q=D.height,Y=new gr;if(Y==null||c==null)var oe=2;else e(Y!=null),oe=bi(c,h,p,Y.width,Y.height,Y.Pd,Y.Qd,Y.format,null);if(oe!=0?V=0:(V!=null&&(V[0]=Y.width[0]),q!=null&&(q[0]=Y.height[0]),V=1),V){D.width=D.width[0],D.height=D.height[0],_!=null&&(_[0]=D.width),S!=null&&(S[0]=D.height);e:{if(_=new ji,(S=new Is).data=c,S.w=h,S.ha=p,S.kd=1,h=[0],e(S!=null),((c=bi(S.data,S.w,S.ha,null,null,null,h,null,S))==0||c==7)&&h[0]&&(c=4),(h=c)==0){if(e(R!=null),_.data=S.data,_.w=S.w+S.offset,_.ha=S.ha-S.offset,_.put=Mn,_.ac=fn,_.bc=mr,_.ma=R,S.xa){if((c=sn())==null){R=1;break e}if(function(ae,re){var Ie=[0],ve=[0],X=[0];t:for(;;){if(ae==null)return 0;if(re==null)return ae.a=2,0;if(ae.l=re,ae.a=0,se(ae.m,re.data,re.w,re.ha),!He(ae.m,Ie,ve,X)){ae.a=3;break t}if(ae.xb=wp,re.width=Ie[0],re.height=ve[0],!vr(Ie[0],ve[0],1,ae,null))break t;return 1}return e(ae.a!=0),0}(c,_)){if(_=(h=pa(_.width,_.height,R.Oa,R.ba))==0){t:{_=c;n:for(;;){if(_==null){_=0;break t}if(e(_.s.yc!=null),e(_.s.Ya!=null),e(0<_.s.Wb),e((p=_.l)!=null),e((S=p.ma)!=null),_.xb!=0){if(_.ca=S.ba,_.tb=S.tb,e(_.ca!=null),!gc(S.Oa,p,Au)){_.a=2;break n}if(!li(_,p.width)||p.da)break n;if((p.da||It(_.ca.S))&&te(),11>_.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),_.ca.f.kb.F!=null&&te()),_.Pb&&0<_.s.ua&&_.s.vb.X==null&&!Xe(_.s.vb,_.s.Wa.Xa)){_.a=1;break n}_.xb=0}if(!Yn(_,_.V,_.Ba,_.c,_.i,p.o,ls))break n;S.Dc=_.Ma,_=1;break t}e(_.a!=0),_=0}_=!_}_&&(h=c.a)}else h=c.a}else{if((c=new vo)==null){R=1;break e}if(c.Fa=S.na,c.P=S.P,c.qc=S.Sa,_o(c,_)){if((h=pa(_.width,_.height,R.Oa,R.ba))==0){if(c.Aa=0,p=R.Oa,e((S=c)!=null),p!=null){if(0<(V=0>(V=p.Md)?0:100<V?255:255*V/100)){for(q=Y=0;4>q;++q)12>(oe=S.pb[q]).lc&&(oe.ia=V*Dv[0>oe.lc?0:oe.lc]>>3),Y|=oe.ia;Y&&(alert("todo:VP8InitRandom"),S.ia=1)}S.Ga=p.Id,100<S.Ga?S.Ga=100:0>S.Ga&&(S.Ga=0)}aa(c,_)||(h=c.a)}}else h=c.a}h==0&&R.Oa!=null&&R.Oa.fd&&(h=mc(R.ba))}R=h}L=R!=0?null:11>L?D.f.RGBA.eb:D.f.kb.y}else L=null;return L};var Np=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(I,k){for(var j="",A=0;A<4;A++)j+=String.fromCharCode(I[k++]);return j}function g(I,k){return(I[k+0]<<0|I[k+1]<<8|I[k+2]<<16)>>>0}function y(I,k){return(I[k+0]<<0|I[k+1]<<8|I[k+2]<<16|I[k+3]<<24)>>>0}new l;var b=[0],v=[0],M=[],x=new l,F=n,P=function(I,k){var j={},A=0,E=!1,N=0,G=0;if(j.frames=[],!function(z,W,Q,ne){for(var ue=0;ue<ne;ue++)if(z[W+ue]!=Q.charCodeAt(ue))return!0;return!1}(I,k,"RIFF",4)){for(y(I,k+=4),k+=8;k<I.length;){var pe=f(I,k),fe=y(I,k+=4);k+=4;var ge=fe+(1&fe);switch(pe){case"VP8 ":case"VP8L":j.frames[A]===void 0&&(j.frames[A]={}),(be=j.frames[A]).src_off=E?G:k-8,be.src_size=N+fe+8,A++,E&&(E=!1,N=0,G=0);break;case"VP8X":(be=j.header={}).feature_flags=I[k];var se=k+4;be.canvas_width=1+g(I,se),se+=3,be.canvas_height=1+g(I,se),se+=3;break;case"ALPH":E=!0,N=ge+8,G=k-8;break;case"ANIM":(be=j.header).bgcolor=y(I,k),se=k+4,be.loop_count=(qe=I)[(C=se)+0]<<0|qe[C+1]<<8,se+=2;break;case"ANMF":var me,be;(be=j.frames[A]={}).offset_x=2*g(I,k),k+=3,be.offset_y=2*g(I,k),k+=3,be.width=1+g(I,k),k+=3,be.height=1+g(I,k),k+=3,be.duration=g(I,k),k+=3,me=I[k++],be.dispose=1&me,be.blend=me>>1&1}pe!="ANMF"&&(k+=ge)}var qe,C;return j}}(F,0);P.response=F,P.rgbaoutput=!0,P.dataurl=!1;var B=P.header?P.header:null,K=P.frames?P.frames:null;if(B){B.loop_counter=B.loop_count,b=[B.canvas_height],v=[B.canvas_width];for(var ie=0;ie<K.length&&K[ie].blend!=0;ie++);}var le=K[0],we=x.WebPDecodeRGBA(F,le.src_off,le.src_size,v,b);le.rgba=we,le.imgwidth=v[0],le.imgheight=b[0];for(var U=0;U<v[0]*b[0]*4;U++)M[U]=we[U];return this.width=v,this.height=b,this.data=M,this}(function(n){var e=function(){return typeof Zf=="function"},t=function(b,v,M,x){var F=4,P=o;switch(x){case n.image_compression.FAST:F=1,P=s;break;case n.image_compression.MEDIUM:F=6,P=a;break;case n.image_compression.SLOW:F=9,P=l}b=r(b,v,M,P);var B=Zf(b,{level:F});return n.__addimage__.arrayBufferToBinaryString(B)},r=function(b,v,M,x){for(var F,P,B,K=b.length/v,ie=new Uint8Array(b.length+K),le=g(),we=0;we<K;we+=1){if(B=we*v,F=b.subarray(B,B+v),x)ie.set(x(F,M,P),B+we);else{for(var U,I=le.length,k=[];U<I;U+=1)k[U]=le[U](F,M,P);var j=y(k.concat());ie.set(k[j],B+we)}P=F}return ie},i=function(b){var v=Array.apply([],b);return v.unshift(0),v},s=function(b,v){var M,x=[],F=b.length;x[0]=1;for(var P=0;P<F;P+=1)M=b[P-v]||0,x[P+1]=b[P]-M+256&255;return x},o=function(b,v,M){var x,F=[],P=b.length;F[0]=2;for(var B=0;B<P;B+=1)x=M&&M[B]||0,F[B+1]=b[B]-x+256&255;return F},a=function(b,v,M){var x,F,P=[],B=b.length;P[0]=3;for(var K=0;K<B;K+=1)x=b[K-v]||0,F=M&&M[K]||0,P[K+1]=b[K]+256-(x+F>>>1)&255;return P},l=function(b,v,M){var x,F,P,B,K=[],ie=b.length;K[0]=4;for(var le=0;le<ie;le+=1)x=b[le-v]||0,F=M&&M[le]||0,P=M&&M[le-v]||0,B=f(x,F,P),K[le+1]=b[le]-B+256&255;return K},f=function(b,v,M){if(b===v&&v===M)return b;var x=Math.abs(v-M),F=Math.abs(b-M),P=Math.abs(b+v-M-M);return x<=F&&x<=P?b:F<=P?v:M},g=function(){return[i,s,o,a,l]},y=function(b){var v=b.map(function(M){return M.reduce(function(x,F){return x+Math.abs(F)},0)});return v.indexOf(Math.min.apply(null,v))};n.processPNG=function(b,v,M,x){var F,P,B,K,ie,le,we,U,I,k,j,A,E,N,G,pe=this.decode.FLATE_DECODE,fe="";if(this.__addimage__.isArrayBuffer(b)&&(b=new Uint8Array(b)),this.__addimage__.isArrayBufferView(b)){if(b=(B=new AS(b)).imgData,P=B.bits,F=B.colorSpace,ie=B.colors,[4,6].indexOf(B.colorType)!==-1){if(B.bits===8){I=(U=B.pixelBitlength==32?new Uint32Array(B.decodePixels().buffer):B.pixelBitlength==16?new Uint16Array(B.decodePixels().buffer):new Uint8Array(B.decodePixels().buffer)).length,j=new Uint8Array(I*B.colors),k=new Uint8Array(I);var ge,se=B.pixelBitlength-B.bits;for(N=0,G=0;N<I;N++){for(E=U[N],ge=0;ge<se;)j[G++]=E>>>ge&255,ge+=B.bits;k[N]=E>>>ge&255}}if(B.bits===16){I=(U=new Uint32Array(B.decodePixels().buffer)).length,j=new Uint8Array(I*(32/B.pixelBitlength)*B.colors),k=new Uint8Array(I*(32/B.pixelBitlength)),A=B.colors>1,N=0,G=0;for(var me=0;N<I;)E=U[N++],j[G++]=E>>>0&255,A&&(j[G++]=E>>>16&255,E=U[N++],j[G++]=E>>>0&255),k[me++]=E>>>16&255;P=8}x!==n.image_compression.NONE&&e()?(b=t(j,B.width*B.colors,B.colors,x),we=t(k,B.width,1,x)):(b=j,we=k,pe=void 0)}if(B.colorType===3&&(F=this.color_spaces.INDEXED,le=B.palette,B.transparency.indexed)){var be=B.transparency.indexed,qe=0;for(N=0,I=be.length;N<I;++N)qe+=be[N];if((qe/=255)===I-1&&be.indexOf(0)!==-1)K=[be.indexOf(0)];else if(qe!==I){for(U=B.decodePixels(),k=new Uint8Array(U.length),N=0,I=U.length;N<I;N++)k[N]=be[U[N]];we=t(k,B.width,1)}}var C=function(z){var W;switch(z){case n.image_compression.FAST:W=11;break;case n.image_compression.MEDIUM:W=13;break;case n.image_compression.SLOW:W=14;break;default:W=12}return W}(x);return pe===this.decode.FLATE_DECODE&&(fe="/Predictor "+C+" "),fe+="/Colors "+ie+" /BitsPerComponent "+P+" /Columns "+B.width,(this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),(we&&this.__addimage__.isArrayBuffer(we)||this.__addimage__.isArrayBufferView(we))&&(we=this.__addimage__.arrayBufferToBinaryString(we)),{alias:M,data:b,index:v,filter:pe,decodeParameters:fe,transparency:K,palette:le,sMask:we,predictor:C,width:B.width,height:B.height,bitsPerComponent:P,colorSpace:F}}}})(nt.API),function(n){n.processGIF89A=function(e,t,r,i){var s=new ES(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var f={data:l,width:o,height:a},g=new pf(100).encode(f,100);return n.processJPEG.call(this,g,t,r,i)},n.processGIF87A=n.processGIF89A}(nt.API),Yr.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Yr.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Bt.log("bit decode error:"+t)}},Yr.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}t!==0&&(this.pos+=4-t)}},Yr.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,f=this.palette[a];if(this.data[o]=f.blue,this.data[o+1]=f.green,this.data[o+2]=f.red,this.data[o+3]=255,2*i+1>=this.width)break;f=this.palette[l],this.data[o+4]=f.blue,this.data[o+4+1]=f.green,this.data[o+4+2]=f.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Yr.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},Yr.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,f=s>>15?255:0,g=r*this.width*4+4*i;this.data[g]=l,this.data[g+1]=a,this.data[g+2]=o,this.data[g+3]=f}this.pos+=n}},Yr.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&t)/t*255|0,f=(o>>11)/e*255|0,g=i*this.width*4+4*s;this.data[g]=f,this.data[g+1]=l,this.data[g+2]=a,this.data[g+3]=255}this.pos+=n}},Yr.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Yr.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},Yr.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,i){var s=new Yr(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},f=new pf(100).encode(l,100);return n.processJPEG.call(this,f,t,r,i)}}(nt.API),u1.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,i){var s=new u1(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},f=new pf(100).encode(l,100);return n.processJPEG.call(this,f,t,r,i)}}(nt.API),nt.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,f=0;f<i;f+=4){var g=r[f],y=r[f+1],b=r[f+2],v=r[f+3];s[a++]=g,s[a++]=y,s[a++]=b,o[l++]=v}var M=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:M,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},nt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Pa=nt.API,Qu=Pa.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,f=e.kerning?e.kerning:i.metadata.Unicode.kerning,g=f.fof?f.fof:1,y=e.doKerning!==!1,b=0,v=n.length,M=0,x=a[0]||l,F=[];for(t=0;t<v;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?F.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(b=y&&Mt(f[r])==="object"&&!isNaN(parseInt(f[r][M],10))?f[r][M]/g:0,F.push((a[r]||x)/l+b)),M=r;return F},s1=Pa.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Pa.processArabic&&(n=Pa.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:Qu.apply(this,arguments).reduce(function(s,o){return s+o},0)},o1=function(n,e,t,r){for(var i=[],s=0,o=n.length,a=0;s!==o&&a+e[s]<t;)a+=e[s],s++;i.push(n.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(n.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(n.slice(l,s)),i},a1=function(n,e,t){t||(t={});var r,i,s,o,a,l,f,g=[],y=[g],b=t.textIndent||0,v=0,M=0,x=n.split(" "),F=Qu.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?x[0].length+2:t.lineIndent||0){var P=Array(l).join(" "),B=[];x.map(function(ie){(ie=ie.split(/\s*\n/)).length>1?B=B.concat(ie.map(function(le,we){return(we&&le.length?`
`:"")+le})):B.push(ie[0])}),x=B,l=s1.apply(this,[P,t])}for(s=0,o=x.length;s<o;s++){var K=0;if(r=x[s],l&&r[0]==`
`&&(r=r.substr(1),K=1),b+v+(M=(i=Qu.apply(this,[r,t])).reduce(function(ie,le){return ie+le},0))>e||K){if(M>e){for(a=o1.apply(this,[r,i,e-(b+v),e]),g.push(a.shift()),g=[a.pop()];a.length;)y.push([a.shift()]);M=i.slice(r.length-(g[0]?g[0].length:0)).reduce(function(ie,le){return ie+le},0)}else g=[r];y.push(g),b=M+l,v=F}else g.push(r),b+=v+M,v=F}return f=l?function(ie,le){return(le?P:"")+ie.join(" ")}:function(ie){return ie.join(" ")},y.map(f)},Pa.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var y=this.internal.getFont(g.fontName,g.fontStyle);return y.metadata.Unicode?{widths:y.metadata.Unicode.widths||{0:1},kerning:y.metadata.Unicode.kerning||{}}:{font:y.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var a,l,f=[];for(a=0,l=r.length;a<l;a++)f=f.concat(a1.apply(this,[r[a],o,s]));return f},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(y){return"0x"+parseInt(y,10).toString(16)},o=n.__fontmetrics__.compress=function(y){var b,v,M,x,F=["{"];for(var P in y){if(b=y[P],isNaN(parseInt(P,10))?v="'"+P+"'":(P=parseInt(P,10),v=(v=s(P).slice(2)).slice(0,-1)+r[v.slice(-1)]),typeof b=="number")b<0?(M=s(b).slice(3),x="-"):(M=s(b).slice(2),x=""),M=x+M.slice(0,-1)+r[M.slice(-1)];else{if(Mt(b)!=="object")throw new Error("Don't know what to do with value type "+Mt(b)+".");M=o(b)}F.push(v+M)}return F.push("}"),F.join("")},a=n.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,v,M,x,F={},P=1,B=F,K=[],ie="",le="",we=y.length-1,U=1;U<we;U+=1)(x=y[U])=="'"?b?(M=b.join(""),b=void 0):b=[]:b?b.push(x):x=="{"?(K.push([B,M]),B={},M=void 0):x=="}"?((v=K.pop())[0][v[1]]=B,M=void 0,B=v[0]):x=="-"?P=-1:M===void 0?t.hasOwnProperty(x)?(ie+=t[x],M=parseInt(ie,16)*P,P=1,ie=""):ie+=x:t.hasOwnProperty(x)?(le+=t[x],B[M]=parseInt(le,16)*P,P=1,M=void 0,le=""):le+=x;return F},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},g={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(y){var b=y.font,v=g.Unicode[b.postScriptName];v&&(b.metadata.Unicode={},b.metadata.Unicode.widths=v.widths,b.metadata.Unicode.kerning=v.kerning);var M=f.Unicode[b.postScriptName];M&&(b.metadata.Unicode.encoding=M,b.encoding=M.codePages[0])}])}(nt.API),function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=t.charCodeAt(s);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Hc(a)),o.metadata=n.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(nt),function(n){function e(){return(it.canvg?Promise.resolve(it.canvg):Kf(()=>import("./index.es-qouDrz9e.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}nt.API.addSvgAsImage=function(t,r,i,s,o,a,l,f){if(isNaN(r)||isNaN(i))throw Bt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Bt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var g=document.createElement("canvas");g.width=s,g.height=o;var y=g.getContext("2d");y.fillStyle="#fff",y.fillRect(0,0,g.width,g.height);var b={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},v=this;return e().then(function(M){return M.fromString(y,t,b)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(M){return M.render(b)}).then(function(){v.addImage(g.toDataURL("image/jpeg",1),r,i,s,o,l,f)})}}(),nt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},nt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],f=0,g=0,y=0;function b(M,x){var F,P=!1;for(F=0;F<M.length;F+=1)M[F]===x&&(P=!0);return P}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var v=a.length;for(y=0;y<v;y+=1)t[a[y]].value=t[a[y]].defaultValue,t[a[y]].explicitSet=!1}if(Mt(n)==="object"){for(i in n)if(s=n[i],b(a,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&b(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(f=0;f<s.length;f+=1)if(r=!0,s[f].length===1&&typeof s[f][0]=="number")l.push(String(s[f]-1));else if(s[f].length>1){for(g=0;g<s[f].length;g+=1)typeof s[f][g]!="number"&&(r=!1);r===!0&&l.push([s[f][0]-1,s[f][1]-1].join(" "))}t[i].value="["+l.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var M,x=[];for(M in t)t[M].explicitSet===!0&&(t[M].type==="name"?x.push("/"+M+" /"+t[M].value):x.push("/"+M+" "+t[M].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),f=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(nt.API),function(n){var e=n.API,t=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,f=["","0","00","000","0000"],g=[""],y=0,b=s.length;y<b;++y){if(a=o.metadata.characterToGlyph(s.charCodeAt(y)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(y),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return g.join("");a=a.toString(16),g.push(f[4-a.length],a)}return g.join("")},r=function(s){var o,a,l,f,g,y,b;for(g=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],y=0,b=(a=Object.keys(s).sort(function(v,M){return v-M})).length;y<b;y++)o=a[y],l.length>=100&&(g+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(f=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+f+">"));return l.length&&(g+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),g+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,f=o.newObject,g=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var y=a.metadata.Unicode.widths,b=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),v="",M=0;M<b.length;M++)v+=String.fromCharCode(b[M]);var x=f();g({data:v,addLength1:!0,objectId:x}),l("endobj");var F=f();g({data:r(a.metadata.toUnicode),addLength1:!0,objectId:F}),l("endobj");var P=f();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Oa(a.fontName)),l("/FontFile2 "+x+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var B=f();l("<<"),l("/Type /Font"),l("/BaseFont /"+Oa(a.fontName)),l("/FontDescriptor "+P+" 0 R"),l("/W "+n.API.PDFObject.convert(y)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=f(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+F+" 0 R"),l("/BaseFont /"+Oa(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+B+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,f=o.newObject,g=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var y=a.metadata.rawData,b="",v=0;v<y.length;v++)b+=String.fromCharCode(y[v]);var M=f();g({data:b,addLength1:!0,objectId:M}),l("endobj");var x=f();g({data:r(a.metadata.toUnicode),addLength1:!0,objectId:x}),l("endobj");var F=f();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+M+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Oa(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=f();for(var P=0;P<a.metadata.hmtx.widths.length;P++)a.metadata.hmtx.widths[P]=parseInt(a.metadata.hmtx.widths[P]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+Oa(a.fontName)+"/FontDescriptor "+F+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,f=s.y,g=s.options||{},y=s.mutex||{},b=y.pdfEscape,v=y.activeFontKey,M=y.fonts,x=v,F="",P=0,B="",K=M[x].encoding;if(M[x].encoding!=="Identity-H")return{text:a,x:l,y:f,options:g,mutex:y};for(B=a,x=v,Array.isArray(a)&&(B=a[0]),P=0;P<B.length;P+=1)M[x].metadata.hasOwnProperty("cmap")&&(o=M[x].metadata.cmap.unicode.codeMap[B[P].charCodeAt(0)]),o||B[P].charCodeAt(0)<256&&M[x].metadata.hasOwnProperty("Unicode")?F+=B[P]:F+="";var ie="";return parseInt(x.slice(1))<14||K==="WinAnsiEncoding"?ie=b(F,x).split("").map(function(le){return le.charCodeAt(0).toString(16)}).join(""):K==="Identity-H"&&(ie=t(F,M[x])),y.isHex=!0,{text:ie,x:l,y:f,options:g,mutex:y}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var f=0;for(f=0;f<o.length;f+=1)Array.isArray(o[f])&&o[f].length===3?a.push([i(Object.assign({},l,{text:o[f][0]})).text,o[f][1],o[f][2]]):a.push(i(Object.assign({},l,{text:o[f]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(nt),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(nt.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,s,o,a,l,f,g,y=e,b=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],v=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],M={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},F=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],P=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),B=!1,K=0;this.__bidiEngine__={};var ie=function(A){var E=A.charCodeAt(),N=E>>8,G=x[N];return G!==void 0?y[256*G+(255&E)]:N===252||N===253?"AL":P.test(N)?"L":N===8?"R":"N"},le=function(A){for(var E,N=0;N<A.length;N++){if((E=ie(A.charAt(N)))==="L")return!1;if(E==="R")return!0}return!1},we=function(A,E,N,G){var pe,fe,ge,se,me=E[G];switch(me){case"L":case"R":B=!1;break;case"N":case"AN":break;case"EN":B&&(me="AN");break;case"AL":B=!0,me="R";break;case"WS":me="N";break;case"CS":G<1||G+1>=E.length||(pe=N[G-1])!=="EN"&&pe!=="AN"||(fe=E[G+1])!=="EN"&&fe!=="AN"?me="N":B&&(fe="AN"),me=fe===pe?fe:"N";break;case"ES":me=(pe=G>0?N[G-1]:"B")==="EN"&&G+1<E.length&&E[G+1]==="EN"?"EN":"N";break;case"ET":if(G>0&&N[G-1]==="EN"){me="EN";break}if(B){me="N";break}for(ge=G+1,se=E.length;ge<se&&E[ge]==="ET";)ge++;me=ge<se&&E[ge]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(se=E.length,ge=G+1;ge<se&&E[ge]==="NSM";)ge++;if(ge<se){var be=A[G],qe=be>=1425&&be<=2303||be===64286;if(pe=E[ge],qe&&(pe==="R"||pe==="AL")){me="R";break}}}me=G<1||(pe=E[G-1])==="B"?"N":N[G-1];break;case"B":B=!1,i=!0,me=K;break;case"S":s=!0,me="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":B=!1;break;case"BN":me="N"}return me},U=function(A,E,N){var G=A.split("");return N&&I(G,N,{hiLevel:K}),G.reverse(),E&&E.reverse(),G.join("")},I=function(A,E,N){var G,pe,fe,ge,se,me=-1,be=A.length,qe=0,C=[],z=K?v:b,W=[];for(B=!1,i=!1,s=!1,pe=0;pe<be;pe++)W[pe]=ie(A[pe]);for(fe=0;fe<be;fe++){if(se=qe,C[fe]=we(A,W,C,fe),G=240&(qe=z[se][M[C[fe]]]),qe&=15,E[fe]=ge=z[qe][5],G>0)if(G===16){for(pe=me;pe<fe;pe++)E[pe]=1;me=-1}else me=-1;if(z[qe][6])me===-1&&(me=fe);else if(me>-1){for(pe=me;pe<fe;pe++)E[pe]=ge;me=-1}W[fe]==="B"&&(E[fe]=0),N.hiLevel|=ge}s&&function(Q,ne,ue){for(var he=0;he<ue;he++)if(Q[he]==="S"){ne[he]=K;for(var de=he-1;de>=0&&Q[de]==="WS";de--)ne[de]=K}}(W,E,be)},k=function(A,E,N,G,pe){if(!(pe.hiLevel<A)){if(A===1&&K===1&&!i)return E.reverse(),void(N&&N.reverse());for(var fe,ge,se,me,be=E.length,qe=0;qe<be;){if(G[qe]>=A){for(se=qe+1;se<be&&G[se]>=A;)se++;for(me=qe,ge=se-1;me<ge;me++,ge--)fe=E[me],E[me]=E[ge],E[ge]=fe,N&&(fe=N[me],N[me]=N[ge],N[ge]=fe);qe=se}qe++}}},j=function(A,E,N){var G=A.split(""),pe={hiLevel:K};return N||(N=[]),I(G,N,pe),function(fe,ge,se){if(se.hiLevel!==0&&g)for(var me,be=0;be<fe.length;be++)ge[be]===1&&(me=F.indexOf(fe[be]))>=0&&(fe[be]=F[me+1])}(G,N,pe),k(2,G,E,N,pe),k(1,G,E,N,pe),G.join("")};return this.__bidiEngine__.doBidiReorder=function(A,E,N){if(function(pe,fe){if(fe)for(var ge=0;ge<pe.length;ge++)fe[ge]=ge;a===void 0&&(a=le(pe)),f===void 0&&(f=le(pe))}(A,E),o||!l||f)if(o&&l&&a^f)K=a?1:0,A=U(A,E,N);else if(!o&&l&&f)K=a?1:0,A=j(A,E,N),A=U(A,E);else if(!o||a||l||f){if(o&&!l&&a^f)A=U(A,E),a?(K=0,A=j(A,E,N)):(K=1,A=j(A,E,N),A=U(A,E));else if(o&&a&&!l&&f)K=1,A=j(A,E,N),A=U(A,E);else if(!o&&!l&&a^f){var G=g;a?(K=1,A=j(A,E,N),K=0,g=!1,A=j(A,E,N),g=G):(K=0,A=j(A,E,N),A=U(A,E),K=1,g=!1,A=j(A,E,N),g=G,A=U(A,E))}}else K=0,A=j(A,E,N);else K=a?1:0,A=j(A,E,N);return A},this.__bidiEngine__.setOptions=function(A){A&&(o=A.isInputVisual,l=A.isOutputVisual,a=A.isInputRtl,f=A.isOutputRtl,g=A.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([t.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([t.doBidiReorder(i[a])]);r.text=o}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(nt),nt.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new fo(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new VS(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new IS(this.contents),this.head=new SS(this),this.name=new CS(this),this.cmap=new uv(this),this.toUnicode={},this.hhea=new NS(this),this.maxp=new kS(this),this.hmtx=new xS(this),this.post=new LS(this),this.os2=new PS(this),this.loca=new MS(this),this.glyf=new OS(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,f;for(f=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],f.push(Math.round(e*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),(32768&(t=i>>16))!=0&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return o*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var ci,fo=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,s,o,a,l;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)t=e[r],s.push(this.writeByte(t));return s},n}(),IS=function(){var n;function e(t){var r,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,s,o,a,l,f,g,y,b,v,M,x;for(x in v=Object.keys(t).length,l=Math.log(2),y=16*Math.floor(Math.log(v)/l),o=Math.floor(y/l),g=16*v-y,(i=new fo).writeInt(this.scalarType),i.writeShort(v),i.writeShort(y),i.writeShort(o),i.writeShort(g),s=16*v,f=i.pos+s,a=null,M=[],t)for(b=t[x],i.writeString(x),i.writeInt(n(b)),i.writeInt(f),i.writeInt(b.length),M=M.concat(b),x==="head"&&(a=f),f+=b.length;f%4;)M.push(0),f++;return i.write(M),r=2981146554-n(i.data),i.pos=a+8,i.writeUInt32(r),i.data},n=function(t){var r,i,s,o;for(t=lv.call(t);t.length%4;)t.push(0);for(s=new fo(t),i=0,r=0,o=t.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),TS={}.hasOwnProperty,Fi=function(n,e){for(var t in e)TS.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};ci=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var SS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Fi(e,ci),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new fo).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),l1=function(){function n(e,t){var r,i,s,o,a,l,f,g,y,b,v,M,x,F,P,B,K;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),y=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(v=e.readUInt16(),b=v/2,e.pos+=6,s=function(){var ie,le;for(le=[],l=ie=0;0<=b?ie<b:ie>b;l=0<=b?++ie:--ie)le.push(e.readUInt16());return le}(),e.pos+=2,x=function(){var ie,le;for(le=[],l=ie=0;0<=b?ie<b:ie>b;l=0<=b?++ie:--ie)le.push(e.readUInt16());return le}(),f=function(){var ie,le;for(le=[],l=ie=0;0<=b?ie<b:ie>b;l=0<=b?++ie:--ie)le.push(e.readUInt16());return le}(),g=function(){var ie,le;for(le=[],l=ie=0;0<=b?ie<b:ie>b;l=0<=b?++ie:--ie)le.push(e.readUInt16());return le}(),i=(this.length-e.pos+this.offset)/2,a=function(){var ie,le;for(le=[],l=ie=0;0<=i?ie<i:ie>i;l=0<=i?++ie:--ie)le.push(e.readUInt16());return le}(),l=P=0,K=s.length;P<K;l=++P)for(F=s[l],r=B=M=x[l];M<=F?B<=F:B>=F;r=M<=F?++B:--B)g[l]===0?o=r+f[l]:(o=a[g[l]/2+(r-M)-(b-l)]||0)!==0&&(o+=f[l]),this.codeMap[r]=65535&o}e.pos=y}return n.encode=function(e,t){var r,i,s,o,a,l,f,g,y,b,v,M,x,F,P,B,K,ie,le,we,U,I,k,j,A,E,N,G,pe,fe,ge,se,me,be,qe,C,z,W,Q,ne,ue,he,de,ke,Re,Fe;switch(G=new fo,o=Object.keys(e).sort(function(Oe,Xe){return Oe-Xe}),t){case"macroman":for(x=0,F=function(){var Oe=[];for(M=0;M<256;++M)Oe.push(0);return Oe}(),B={0:0},s={},pe=0,me=o.length;pe<me;pe++)B[de=e[i=o[pe]]]==null&&(B[de]=++x),s[i]={old:e[i],new:B[e[i]]},F[i]=B[e[i]];return G.writeUInt16(1),G.writeUInt16(0),G.writeUInt32(12),G.writeUInt16(0),G.writeUInt16(262),G.writeUInt16(0),G.write(F),{charMap:s,subtable:G.data,maxGlyphID:x+1};case"unicode":for(E=[],y=[],K=0,B={},r={},P=f=null,fe=0,be=o.length;fe<be;fe++)B[le=e[i=o[fe]]]==null&&(B[le]=++K),r[i]={old:le,new:B[le]},a=B[le]-i,P!=null&&a===f||(P&&y.push(P),E.push(i),f=a),P=i;for(P&&y.push(P),y.push(65535),E.push(65535),j=2*(k=E.length),I=2*Math.pow(Math.log(k)/Math.LN2,2),b=Math.log(I/2)/Math.LN2,U=2*k-I,l=[],we=[],v=[],M=ge=0,qe=E.length;ge<qe;M=++ge){if(A=E[M],g=y[M],A===65535){l.push(0),we.push(0);break}if(A-(N=r[A].new)>=32768)for(l.push(0),we.push(2*(v.length+k-M)),i=se=A;A<=g?se<=g:se>=g;i=A<=g?++se:--se)v.push(r[i].new);else l.push(N-A),we.push(0)}for(G.writeUInt16(3),G.writeUInt16(1),G.writeUInt32(12),G.writeUInt16(4),G.writeUInt16(16+8*k+2*v.length),G.writeUInt16(0),G.writeUInt16(j),G.writeUInt16(I),G.writeUInt16(b),G.writeUInt16(U),ue=0,C=y.length;ue<C;ue++)i=y[ue],G.writeUInt16(i);for(G.writeUInt16(0),he=0,z=E.length;he<z;he++)i=E[he],G.writeUInt16(i);for(ke=0,W=l.length;ke<W;ke++)a=l[ke],G.writeUInt16(a);for(Re=0,Q=we.length;Re<Q;Re++)ie=we[Re],G.writeUInt16(ie);for(Fe=0,ne=v.length;Fe<ne;Fe++)x=v[Fe],G.writeUInt16(x);return{charMap:r,subtable:G.data,maxGlyphID:K+1}}},n}(),uv=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Fi(e,ci),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new l1(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,s;return r==null&&(r="macroman"),i=l1.encode(t,r),(s=new fo).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),NS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Fi(e,ci),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),PS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Fi(e,ci),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),LS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Fi(e,ci),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var o;for(i=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,f;for(f=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)f.push(t.readUInt32());return f}).call(this)}},e}(),RS=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},CS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Fi(e,ci),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,s,o,a,l,f,g,y,b,v;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(f={},o=y=0,b=i.length;y<b;o=++y)s=i[o],t.pos=s.offset,g=t.readString(s.length),a=new RS(g,s),f[v=s.nameID]==null&&(f[v]=[]),f[s.nameID].push(a);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},e}(),kS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Fi(e,ci),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),xS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Fi(e,ci),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,s,o,a,l,f;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var g,y;for(y=[],r=g=0;0<=s?g<s:g>s;r=0<=s?++g:--g)y.push(t.readInt16());return y}(),this.widths=(function(){var g,y,b,v;for(v=[],g=0,y=(b=this.metrics).length;g<y;g++)o=b[g],v.push(o.advance);return v}).call(this),i=this.widths[this.widths.length-1],f=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)f.push(this.widths.push(i));return f},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),lv=[].slice,OS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Fi(e,ci),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,s,o,a,l,f,g,y,b;return t in this.cache?this.cache[t]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(t),(s=o.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,a=(l=new fo(r.read(s))).readShort(),g=l.readShort(),b=l.readShort(),f=l.readShort(),y=l.readShort(),this.cache[t]=a===-1?new FS(l,g,b,f,y):new DS(l,a,g,b,f,y),this.cache[t]))},e.prototype.encode=function(t,r,i){var s,o,a,l,f;for(a=[],o=[],l=0,f=r.length;l<f;l++)s=t[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),DS=function(){function n(e,t,r,i,s,o){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),FS=function(){function n(e,t,r,i,s){var o,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new fo(lv.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),MS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Fi(e,ci),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(t.readUInt32());return o}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],f=this.offsets[a+1]-l;f>0&&(s+=f)}for(var g=new Array(4*i.length),y=0;y<i.length;++y)g[4*y+3]=255&i[y],g[4*y+2]=(65280&i[y])>>8,g[4*y+1]=(16711680&i[y])>>16,g[4*y]=(4278190080&i[y])>>24;return g},e}(),VS=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,s;for(t in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(r=i[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in l=this.glyphsFor(t))r=l[s],i[s]=r;return i},n.prototype.encode=function(e,t){var r,i,s,o,a,l,f,g,y,b,v,M,x,F,P;for(i in r=uv.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),v={0:0},P=r.charMap)v[(l=P[i]).old]=l.new;for(M in b=r.maxGlyphID,o)M in v||(v[M]=b++);return g=function(B){var K,ie;for(K in ie={},B)ie[B[K]]=K;return ie}(v),y=Object.keys(g).sort(function(B,K){return B-K}),x=function(){var B,K,ie;for(ie=[],B=0,K=y.length;B<K;B++)a=y[B],ie.push(g[a]);return ie}(),s=this.font.glyf.encode(o,x,v),f=this.font.loca.encode(s.offsets,x),F={cmap:this.font.cmap.raw(),glyf:s.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(F["OS/2"]=this.font.os2.raw()),this.font.directory.encode(F)},n}();nt.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,s,o;if(Array.isArray(t))return"["+function(){var a,l,f;for(f=[],a=0,l=t.length;a<l;a++)r=t[a],f.push(e.convert(r));return f}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)o=t[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+t},e}();async function US(n){var e,t;try{console.time("PDF Generation"),console.log(`Starting PDF generation for report: ${n}`),console.log("Fetching report data...");const r=await O3(n);if(console.log(`Report data received: ${Object.keys(r).length} fields`),console.log(`Report has ${((e=r.floors)==null?void 0:e.length)||0} floors`),r.floors&&r.floors.length>0){console.log("Floor component counts:");let F=0;r.floors.forEach((P,B)=>{var E,N,G,pe,fe,ge,se,me;const K=((E=P.networkCabinets)==null?void 0:E.length)||0,ie=((N=P.perforations)==null?void 0:N.length)||0,le=((G=P.accessTraps)==null?void 0:G.length)||0,we=((pe=P.cablePaths)==null?void 0:pe.length)||0,U=((fe=P.cableTrunkings)==null?void 0:fe.length)||0,I=((ge=P.conduits)==null?void 0:ge.length)||0,k=((se=P.copperCablings)==null?void 0:se.length)||0,j=((me=P.fiberOpticCablings)==null?void 0:me.length)||0,A=K+ie+le+we+U+I+k+j;F+=A,console.log(`Floor ${B+1} (${P.name}): ${A} components`),A>0&&(console.log(`  - Network Cabinets: ${K}`),console.log(`  - Perforations: ${ie}`),console.log(`  - Access Traps: ${le}`),console.log(`  - Cable Paths: ${we}`),console.log(`  - Cable Trunkings: ${U}`),console.log(`  - Conduits: ${I}`),console.log(`  - Copper Cablings: ${k}`),console.log(`  - Fiber Optic Cablings: ${j}`))}),console.log(`Total components across all floors: ${F}`)}console.log("Creating PDF document...");const i=new nt({orientation:"portrait",unit:"mm",format:"a4"});console.log("Adding title and header..."),i.setFont("helvetica","bold"),i.setFontSize(16),i.text("RAPPORT DE VISITE TECHNIQUE",15,20),i.setFontSize(12),i.text("Kony - Solutions Rseaux Professionnelles",15,28),console.log("Adding basic information section..."),i.setFont("helvetica","bold"),i.setFontSize(14),i.text("Informations Gnrales",15,40),i.setDrawColor(200,200,200),i.line(15,42,195,42),i.setFont("helvetica","normal"),i.setFontSize(11);const s=F=>F?new Date(F).toLocaleDateString("fr-FR"):"N/A",o=48,a=7;i.text(`Client: ${r.clientName||"N/A"}`,20,o),i.text(`Lieu: ${r.location||"N/A"}`,20,o+a),i.text(`Date de visite: ${s(r.date)}`,20,o+a*2),i.text(`Responsable de projet: ${r.projectManager||"N/A"}`,20,o+a*3);const l=((t=r.technicians)==null?void 0:t.join(", "))||"N/A";i.text(`Techniciens: ${l}`,20,o+a*4),r.accompanyingPerson&&i.text(`Accompagnant: ${r.accompanyingPerson}`,20,o+a*5),console.log("Adding project context section...");let f=o+(r.accompanyingPerson?a*6:a*5)+10;i.setFont("helvetica","bold"),i.setFontSize(14),i.text("Contexte du Projet",15,f),i.line(15,f+2,195,f+2),f+=10,i.setFont("helvetica","normal"),i.setFontSize(11);const g=r.projectContext||"Aucun contexte fourni";console.log(`Project context length: ${g.length} characters`);const y=i.splitTextToSize(g,170);if(i.text(y,15,f),f+=y.length*6+10,r.floors&&r.floors.length>0){console.log("Processing floors and components..."),i.setFont("helvetica","bold"),i.setFontSize(14),i.text("Composants Techniques",15,f),i.line(15,f+2,195,f+2),f+=10;for(let F=0;F<r.floors.length;F++){console.log(`Processing floor ${F+1}...`);const P=r.floors[F];f>270&&(console.log("Adding new page for next floor"),i.addPage(),f=20),i.setFont("helvetica","bold"),i.setFontSize(12),i.text(`tage: ${P.name}`,15,f),f+=8,console.time(`Floor ${F+1} processing`),P.networkCabinets&&P.networkCabinets.length>0&&(console.log(`Processing ${P.networkCabinets.length} network cabinets...`),f=qs(i,"Baies Informatiques",P.networkCabinets,f)),P.perforations&&P.perforations.length>0&&(console.log(`Processing ${P.perforations.length} perforations...`),f=qs(i,"Percements",P.perforations,f)),P.accessTraps&&P.accessTraps.length>0&&(console.log(`Processing ${P.accessTraps.length} access traps...`),f=qs(i,"Trappes d'accs",P.accessTraps,f)),P.cablePaths&&P.cablePaths.length>0&&(console.log(`Processing ${P.cablePaths.length} cable paths...`),f=qs(i,"Chemins de cbles",P.cablePaths,f)),P.cableTrunkings&&P.cableTrunkings.length>0&&(console.log(`Processing ${P.cableTrunkings.length} cable trunkings...`),f=qs(i,"Goulottes",P.cableTrunkings,f)),P.conduits&&P.conduits.length>0&&(console.log(`Processing ${P.conduits.length} conduits...`),f=qs(i,"Conduits",P.conduits,f)),P.copperCablings&&P.copperCablings.length>0&&(console.log(`Processing ${P.copperCablings.length} copper cablings...`),f=qs(i,"Cblages cuivre",P.copperCablings,f)),P.fiberOpticCablings&&P.fiberOpticCablings.length>0&&(console.log(`Processing ${P.fiberOpticCablings.length} fiber optic cablings...`),f=qs(i,"Cblages fibre optique",P.fiberOpticCablings,f)),console.timeEnd(`Floor ${F+1} processing`),f+=5}}console.log("Adding conclusion section..."),f>240&&(console.log("Adding new page for conclusion"),i.addPage(),f=20),i.setFont("helvetica","bold"),i.setFontSize(14),i.text("Conclusion",15,f),i.line(15,f+2,195,f+2),f+=10,i.setFont("helvetica","normal"),i.setFontSize(11);const b=r.conclusion||"Aucune conclusion fournie";console.log(`Conclusion length: ${b.length} characters`);const v=i.splitTextToSize(b,170);i.text(v,15,f),f+=v.length*6+10,r.assumptions&&r.assumptions.length>0&&(console.log(`Processing ${r.assumptions.length} assumptions...`),i.setFont("helvetica","bold"),i.setFontSize(12),i.text("Hypothses et prrequis:",15,f),f+=8,i.setFont("helvetica","normal"),i.setFontSize(10),r.assumptions.forEach((F,P)=>{f>270&&(console.log("Adding new page for assumptions"),i.addPage(),f=20),i.text(` ${F}`,20,f),f+=6}),f+=5),i.setFont("helvetica","bold"),i.setFontSize(12),i.text(`Dure estime du dploiement: ${r.estimatedDurationDays||"N/A"} jours`,15,f),console.log("Adding page numbers and finalizing PDF...");const M=i.internal.getNumberOfPages();for(let F=1;F<=M;F++)i.setPage(F),i.setFont("helvetica","normal"),i.setFontSize(10),i.text(`Page ${F} / ${M}`,180,10),i.text(`Gnr le ${new Date().toLocaleDateString("fr-FR")}`,15,287);console.timeEnd("PDF Generation"),console.log(`PDF generated with ${M} pages`),console.log("Creating PDF blob...");const x=i.output("blob",{type:"application/pdf"});return console.log("PDF blob created successfully, size:",x.size,"bytes"),x}catch(r){throw console.error("Error generating PDF:",r),console.timeEnd("PDF Generation"),r}}function qs(n,e,t,r){try{return r>250&&(console.log(`Adding new page for ${e} section`),n.addPage(),r=20),n.setFont("helvetica","bold"),n.setFontSize(11),n.text(e,20,r),r+=6,n.setFont("helvetica","normal"),n.setFontSize(10),t.forEach((i,s)=>{try{r>270&&(console.log(`Adding new page for component ${s+1} in ${e}`),n.addPage(),r=20),n.setFillColor(240,240,240),n.rect(20,r-4,175,6,"F");const o=i.name||i.location||`Composant ${s+1}`;if(n.text(`${s+1}. ${o}`,22,r),r+=6,Object.entries(i).filter(([l])=>l!=="id"&&l!=="name"&&l!=="notes").map(([l,f])=>{try{const g=l.replace(/([A-Z])/g," $1").replace(/^./,b=>b.toUpperCase());let y=f;return typeof f=="boolean"?y=f?"Oui":"Non":typeof f=="number"?l.toLowerCase().includes("meters")&&(y=`${f} m`):f==null?y="N/A":typeof f=="object"&&(y=JSON.stringify(f)),`${g}: ${y}`}catch(g){return console.error(`Error formatting property ${l}:`,g),`${l}: Error`}}).forEach(l=>{try{r>270&&(n.addPage(),r=20),n.text(`   ${l}`,22,r),r+=5}catch(f){console.error("Error adding property to PDF:",f),r+=5}}),i.notes)try{r>270&&(n.addPage(),r=20),n.text(`   Notes: ${i.notes}`,22,r),r+=5}catch(l){console.error("Error adding notes to PDF:",l),r+=5}r+=2}catch(o){console.error(`Error processing component ${s} in ${e}:`,o),r+=5}}),r+5}catch(i){return console.error(`Error in addComponentsSection for ${e}:`,i),r+10}}async function h1(){console.log("Affichage de la liste des rapports");const n=document.getElementById("contentContainer");n.innerHTML=`
    <div class="text-center py-5">
      <div class="spinner-border text-primary" role="status"></div>
      <p class="mt-2">Chargement des rapports...</p>
    </div>
  `,n.innerHTML=`
    <div class="row mb-4">
      <div class="col-12">
        <div class="card">
          <div class="card-header bg-white">
            <h5 class="mb-0">Rapports de Visite Technique</h5>
          </div>
          <div class="card-body">
            <ul class="nav nav-tabs" id="reportTabs">
              <li class="nav-item">
                <a class="nav-link active" data-status="submitted" href="#">Soumis</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" data-status="reviewed" href="#">Examins</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" data-status="approved" href="#">Approuvs</a>
              </li>
            </ul>
            
            <div class="tab-content mt-3">
              <div id="reportsContainer" class="tab-pane active">
                <!-- Les rapports seront chargs ici -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  `,document.querySelectorAll("#reportTabs .nav-link").forEach(e=>{e.addEventListener("click",async t=>{t.preventDefault(),document.querySelectorAll("#reportTabs .nav-link").forEach(i=>{i.classList.remove("active")}),t.target.classList.add("active");const r=t.target.getAttribute("data-status");await jl(r)})}),await jl("submitted")}async function jl(n){const e=document.getElementById("reportsContainer");try{e.innerHTML=`
      <div class="text-center py-5">
        <div class="spinner-border text-primary" role="status"></div>
        <p class="mt-2">Chargement des rapports ${Bl(n).toLowerCase()}...</p>
      </div>
    `;const t=await x3(n);if(t.length===0){e.innerHTML=`
        <div class="text-center py-5">
          <div class="display-6 text-muted">Aucun rapport ${Bl(n).toLowerCase()}</div>
          <p class="text-muted">Les rapports apparatront ici lorsque les techniciens les soumettront</p>
        </div>
      `;return}e.innerHTML=t.map(r=>jS(r,n)).join(""),t.forEach(r=>{var i,s,o,a;(i=document.querySelector(`.download-pdf-btn[data-id="${r.id}"]`))==null||i.addEventListener("click",()=>{BS(r.id)}),n==="submitted"&&((s=document.querySelector(`.review-btn[data-id="${r.id}"]`))==null||s.addEventListener("click",()=>{f1(r.id,"reviewed")})),n==="reviewed"&&((o=document.querySelector(`.approve-btn[data-id="${r.id}"]`))==null||o.addEventListener("click",()=>{f1(r.id,"approved")})),(a=document.querySelector(`.delete-btn[data-id="${r.id}"]`))==null||a.addEventListener("click",()=>{qS(r.id)})})}catch(t){console.error("Erreur lors du chargement des rapports:",t),e.innerHTML=`
      <div class="alert alert-danger">
        <i class="bi bi-exclamation-triangle"></i> Erreur lors du chargement des rapports: ${t.message}
      </div>
    `}}function Bl(n){switch(n){case"submitted":return"Soumis";case"reviewed":return"Examins";case"approved":return"Approuvs";default:return n}}function jS(n,e){const t={submitted:"bg-primary",reviewed:"bg-info",approved:"bg-success"},r={year:"numeric",month:"short",day:"numeric"};return`
    <div class="card mb-3">
      <div class="card-header bg-white d-flex justify-content-between align-items-center">
        <h5 class="mb-0">${n.clientName||"Rapport sans nom"}</h5>
        <span class="status-badge ${t[n.status]||"bg-secondary"}">${Bl(n.status).toUpperCase()}</span>
      </div>
      <div class="card-body">
        <div class="row mb-3">
          <div class="col-md-6">
            <p><strong>Lieu:</strong> ${n.location||"Non spcifi"}</p>
            <p><strong>Technicien:</strong> ${n.technicianName}</p>
            <p><strong>Chef de projet:</strong> ${n.projectManager||"Non spcifi"}</p>
          </div>
          <div class="col-md-6">
            <p><strong>Date:</strong> ${new Date(n.date).toLocaleDateString("fr-FR",r)}</p>
            ${n.submittedAt?`<p><strong>Soumis le:</strong> ${new Date(n.submittedAt).toLocaleDateString("fr-FR",r)}</p>`:""}
          </div>
        </div>
        
        <div class="d-flex justify-content-end">
          <button class="btn btn-outline-danger me-2 delete-btn" data-id="${n.id}">
            <i class="bi bi-trash"></i> Supprimer
          </button>
          <button class="btn btn-outline-primary me-2 download-pdf-btn" data-id="${n.id}">
            <i class="bi bi-download"></i> Tlcharger PDF
          </button>
          ${e==="submitted"?`<button class="btn btn-outline-info review-btn" data-id="${n.id}">
              <i class="bi bi-check-circle"></i> Marquer comme Examin
            </button>`:""}
          ${e==="reviewed"?`<button class="btn btn-outline-success approve-btn" data-id="${n.id}">
              <i class="bi bi-check-all"></i> Approuver
            </button>`:""}
        </div>
      </div>
    </div>
  `}async function BS(n){try{const e=document.createElement("div");e.className="position-fixed bottom-0 end-0 p-3",e.style.zIndex="5000",e.innerHTML=`
      <div class="toast show" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header">
          <strong class="me-auto">Gnration du PDF</strong>
          <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Fermer"></button>
        </div>
        <div class="toast-body d-flex align-items-center">
          <div class="spinner-border spinner-border-sm text-primary me-2" role="status"></div>
          <span>Prparation du PDF, veuillez patienter...</span>
        </div>
      </div>
    `,document.body.appendChild(e),console.log("Dmarrage de la gnration du PDF pour le rapport ID:",n);const t=await US(n);console.log("Blob PDF gnr, taille:",t.size,"octets");const r=URL.createObjectURL(t);console.log("URL PDF cre pour le tlchargement");const i=document.createElement("a");i.href=r,i.download=`rapport-technique-${n}.pdf`,document.body.appendChild(i),i.click(),document.body.removeChild(i),e.remove();const s=document.createElement("div");s.className="position-fixed bottom-0 end-0 p-3",s.style.zIndex="5000",s.innerHTML=`
      <div class="toast show" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header bg-success text-white">
          <strong class="me-auto">Tlchargement russi</strong>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Fermer"></button>
        </div>
        <div class="toast-body">
          Le PDF a t gnr et tlcharg avec succs.
        </div>
      </div>
    `,document.body.appendChild(s),setTimeout(()=>{URL.revokeObjectURL(r),console.log("URL PDF rvoque"),setTimeout(()=>{s.remove()},3e3)},1e3)}catch(e){console.error("Erreur lors de la gnration ou du tlchargement du PDF:",e);const t=document.createElement("div");t.className="position-fixed bottom-0 end-0 p-3",t.style.zIndex="5000",t.innerHTML=`
      <div class="toast show" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header bg-danger text-white">
          <strong class="me-auto">Erreur de tlchargement</strong>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Fermer"></button>
        </div>
        <div class="toast-body">
          Erreur lors de la gnration du PDF: ${e.message}
        </div>
      </div>
    `,document.body.appendChild(t),setTimeout(()=>{t.remove()},5e3)}}async function f1(n,e){try{await D3(n,e);const t=document.querySelector("#reportTabs .nav-link.active");t&&await jl(t.getAttribute("data-status")),alert(`Statut du rapport mis  jour en ${Bl(e).toUpperCase()}`)}catch(t){console.error("Erreur lors de la mise  jour du statut du rapport:",t),alert(`Erreur lors de la mise  jour du statut du rapport: ${t.message}`)}}async function qS(n){if(confirm("tes-vous sr de vouloir supprimer ce rapport ? Cette action ne peut pas tre annule."))try{await F3(n);const e=document.querySelector("#reportTabs .nav-link.active");e&&await jl(e.getAttribute("data-status")),alert("Rapport supprim avec succs")}catch(e){console.error("Erreur lors de la suppression du rapport:",e),alert(`Erreur lors de la suppression du rapport: ${e.message}`)}}async function zS(){console.log("Showing users list");const n=document.getElementById("contentContainer");n.innerHTML=`
    <div class="text-center py-5">
      <div class="spinner-border text-primary" role="status"></div>
      <p class="mt-2">Loading users...</p>
    </div>
  `,n.innerHTML=`
    <div class="row mb-4">
      <div class="col-12">
        <div class="card">
          <div class="card-header bg-white d-flex justify-content-between align-items-center">
            <h5 class="mb-0">User Management</h5>
            <button class="btn btn-primary" id="addUserBtn" disabled>
              <i class="bi bi-person-plus"></i> Add User
            </button>
          </div>
          <div class="card-body">
            <div id="usersContainer">
              <!-- Users will be loaded here -->
            </div>
          </div>
        </div>
      </div>
    </div>
  `,document.getElementById("addUserBtn").addEventListener("click",()=>{alert("Adding new users through the web interface is not implemented yet. Please use the Firebase console to add new users.")}),await gp()}async function gp(){const n=document.getElementById("usersContainer");try{n.innerHTML=`
      <div class="text-center py-5">
        <div class="spinner-border text-primary" role="status"></div>
        <p class="mt-2">Loading users...</p>
      </div>
    `;const e=await M3();if(e.length===0){n.innerHTML=`
        <div class="text-center py-5">
          <div class="display-6 text-muted">No users found</div>
          <p class="text-muted">Users will appear here when added</p>
        </div>
      `;return}n.innerHTML=`
      <div class="table-responsive">
        <table class="table table-hover">
          <thead>
            <tr>
              <th>Name</th>
              <th>Email</th>
              <th>Role</th>
              <th>ID</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            ${e.map(t=>`
              <tr data-id="${t.id}" data-auth-uid="${t.authUid||""}">
                <td>${t.name}</td>
                <td>${t.email}</td>
                <td>
                  <span class="badge ${t.role==="admin"?"bg-danger":"bg-primary"}">${t.role}</span>
                </td>
                <td><small class="text-muted">${t.id}</small></td>
                <td>
                  <button class="btn btn-sm btn-outline-primary edit-user-btn" data-id="${t.id}">
                    <i class="bi bi-pencil"></i> Edit
                  </button>
                  <button class="btn btn-sm btn-outline-danger delete-user-btn" data-id="${t.id}">
                    <i class="bi bi-trash"></i> Delete
                  </button>
                </td>
              </tr>
            `).join("")}
          </tbody>
        </table>
      </div>
    `,e.forEach(t=>{var r,i;(r=document.querySelector(`.edit-user-btn[data-id="${t.id}"]`))==null||r.addEventListener("click",()=>{$S(t)}),(i=document.querySelector(`.delete-user-btn[data-id="${t.id}"]`))==null||i.addEventListener("click",()=>{HS(t)})})}catch(e){console.error("Error loading users:",e),n.innerHTML=`
      <div class="alert alert-danger">
        <i class="bi bi-exclamation-triangle"></i> Error loading users: ${e.message}
      </div>
    `}}function $S(n){const e=new bootstrap.Modal(document.getElementById("userModal")),t=document.getElementById("userForm"),r=document.getElementById("userModalTitle"),i=document.getElementById("passwordGroup");document.getElementById("userId").value=n.id,document.getElementById("userAuthUid").value=n.authUid||"",document.getElementById("userName").value=n.name,document.getElementById("userEmail").value=n.email,document.getElementById("userRole").value=n.role,i.style.display="none",r.textContent="Edit User";const s=document.getElementById("saveUserBtn"),o=async()=>{if(!t.checkValidity()){t.reportValidity();return}try{const a=document.getElementById("userAuthUid").value;if(!a){alert("User has no auth UID. Cannot update.");return}await V3(a,{name:document.getElementById("userName").value,email:document.getElementById("userEmail").value,role:document.getElementById("userRole").value}),e.hide(),await gp()}catch(a){console.error("Error updating user:",a),alert(`Error updating user: ${a.message}`)}};s.replaceWith(s.cloneNode(!0)),document.getElementById("saveUserBtn").addEventListener("click",o),e.show()}async function HS(n){if(confirm(`Are you sure you want to delete user "${n.name}"? This action cannot be undone.`))try{const e=n.authUid||n.id;await U3(e),await gp()}catch(e){console.error("Error deleting user:",e),alert(`Error deleting user: ${e.message}`)}}function WS(){console.log("Showing dashboard");const n=document.getElementById("app");n.innerHTML=`
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">Kony Admin</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav me-auto">
            <li class="nav-item">
              <a class="nav-link active" href="#" id="reportsLink">Reports</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#" id="usersLink">Users</a>
            </li>
          </ul>
          <button class="btn btn-outline-light" id="logoutButton">Logout</button>
        </div>
      </div>
    </nav>
    
    <div class="container-fluid mt-4">
      <div id="contentContainer">
        <!-- Content will be loaded here -->
      </div>
    </div>
  `,document.getElementById("reportsLink").addEventListener("click",e=>{e.preventDefault(),d1("reportsLink"),h1()}),document.getElementById("usersLink").addEventListener("click",e=>{e.preventDefault(),d1("usersLink"),zS()}),document.getElementById("logoutButton").addEventListener("click",async()=>{try{await C3()}catch(e){console.error("Logout error:",e),alert("Error logging out: "+e.message)}}),h1()}function d1(n){document.querySelectorAll(".navbar-nav .nav-link").forEach(t=>t.classList.remove("active")),document.getElementById(n).classList.add("active")}console.log("Initializing Kony Web Admin Dashboard");document.addEventListener("DOMContentLoaded",()=>{console.log("DOM loaded, setting up auth listener"),Tw(Ml,async n=>{if(n){console.log("User is signed in:",n.email);const e=await k3(n.uid);console.log("User role:",e),e==="admin"?WS():(Ml.signOut(),Gf("Only administrators can access this dashboard."))}else console.log("User is signed out"),Gf()})});export{Mt as _};
