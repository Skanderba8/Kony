@startuml
!theme plain
participant "App Mobile" as App
participant "Cache Local" as Cache
participant "Service Sync" as Sync
participant "Firestore" as Cloud

== Mode Hors-ligne ==
App -> Cache : Créer/Modifier Rapport
Cache -> Cache : Marquer "Dirty"

== Retour Connexion ==
App -> Sync : Détecter connexion
Sync -> Cache : Récupérer éléments "Dirty"
Sync -> Cloud : Synchroniser données
Cloud -> Sync : Confirmer
Sync -> Cache : Marquer "Clean"
@enduml